'use strict';

var _regeneratorRuntime = require('babel-runtime/regenerator')['default'];

var _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];

var _chai = require('chai');

var _chai2 = _interopRequireDefault(_chai);

var _chaiAsPromised = require('chai-as-promised');

var _chaiAsPromised2 = _interopRequireDefault(_chaiAsPromised);

var _ = require('../../../..');

var _2 = _interopRequireDefault(_);

var _sampleApps = require('sample-apps');

var _sampleApps2 = _interopRequireDefault(_sampleApps);

_chai2['default'].should();
_chai2['default'].use(_chaiAsPromised2['default']);

var driver = undefined;
var defaultCaps = {
  app: (0, _sampleApps2['default'])('ApiDemos-debug'),
  deviceName: 'Android',
  platformName: 'Android'
};
var atv = 'android.widget.TextView';
var f = "android.widget.FrameLayout";

describe('Find - xpath', function () {
  var _this = this;

  before(function callee$1$0() {
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          driver = new _2['default']();
          context$2$0.next = 3;
          return _regeneratorRuntime.awrap(driver.createSession(defaultCaps));

        case 3:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });
  after(function callee$1$0() {
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(driver.deleteSession());

        case 2:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });
  it('should find element by type', function callee$1$0() {
    var el;
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(driver.findElOrEls('xpath', '//' + atv, false));

        case 2:
          el = context$2$0.sent;
          context$2$0.next = 5;
          return _regeneratorRuntime.awrap(driver.getText(el.ELEMENT).should.eventually.equal('API Demos'));

        case 5:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });
  it('should find element by text', function callee$1$0() {
    var el;
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(driver.findElOrEls('xpath', '//' + atv + '[@text=\'Accessibility\']', false));

        case 2:
          el = context$2$0.sent;
          context$2$0.next = 5;
          return _regeneratorRuntime.awrap(driver.getText(el.ELEMENT).should.eventually.equal('Accessibility'));

        case 5:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });
  it('should find element by attribute', function callee$1$0() {
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(driver.findElOrEls('xpath', '//*[@enabled=\'true\' and @scrollable=\'true\']', true).should.eventually.have.length(1));

        case 2:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });
  it('should find exactly one element via elementsByXPath', function callee$1$0() {
    var el;
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(driver.findElOrEls('xpath', '//' + atv + '[@text=\'Accessibility\']', true));

        case 2:
          el = context$2$0.sent;

          el.length.should.equal(1);
          context$2$0.next = 6;
          return _regeneratorRuntime.awrap(driver.getText(el[0].ELEMENT).should.eventually.equal('Accessibility'));

        case 6:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });
  it('should find element by partial text', function callee$1$0() {
    var el;
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(driver.findElOrEls('xpath', '//' + atv + '[contains(@text, \'Accessibility\')]', false));

        case 2:
          el = context$2$0.sent;
          context$2$0.next = 5;
          return _regeneratorRuntime.awrap(driver.getText(el.ELEMENT).should.eventually.equal('Accessibility'));

        case 5:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });
  it('should find the last element', function callee$1$0() {
    var el, text;
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(driver.findElOrEls('xpath', '(//' + atv + ')[last()]', false));

        case 2:
          el = context$2$0.sent;
          context$2$0.next = 5;
          return _regeneratorRuntime.awrap(driver.getText(el.ELEMENT));

        case 5:
          text = context$2$0.sent;

          ["OS", "Text", "Views", "Preference"].should.include(text);

        case 7:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });
  it('should find element by index and embedded desc', function callee$1$0() {
    var el;
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(driver.findElOrEls('xpath', '//' + f + '//' + atv + '[5]', false));

        case 2:
          el = context$2$0.sent;
          context$2$0.next = 5;
          return _regeneratorRuntime.awrap(driver.getText(el.ELEMENT).should.eventually.equal('Content'));

        case 5:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });
  it('should find all elements', function callee$1$0() {
    var el;
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(driver.findElOrEls('xpath', '//*', true));

        case 2:
          el = context$2$0.sent;

          el.length.should.be.above(2);

        case 4:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });
  it('should find the first element when searching for all elements', function callee$1$0() {
    var el;
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(driver.findElOrEls('xpath', '//*', true));

        case 2:
          el = context$2$0.sent;

          el[0].should.exist;

        case 4:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });
  it('should find less elements with compression turned on', function callee$1$0() {
    var elementsWithoutCompression, elementsWithCompression;
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(driver.updateSettings({ "ignoreUnimportantViews": false }));

        case 2:
          context$2$0.next = 4;
          return _regeneratorRuntime.awrap(driver.findElOrEls('xpath', '//*', true));

        case 4:
          elementsWithoutCompression = context$2$0.sent;
          context$2$0.next = 7;
          return _regeneratorRuntime.awrap(driver.updateSettings({ "ignoreUnimportantViews": true }));

        case 7:
          context$2$0.next = 9;
          return _regeneratorRuntime.awrap(driver.findElOrEls('xpath', '//*', true));

        case 9:
          elementsWithCompression = context$2$0.sent;

          elementsWithoutCompression.length.should.be.greaterThan(elementsWithCompression.length);

        case 11:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });
  it('should find toast message element by text', function callee$1$0() {
    var popUp, popUpEl, search, add, edit, share;
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(driver.startActivity('io.appium.android.apis', '.view.PopupMenu1'));

        case 2:
          context$2$0.next = 4;
          return _regeneratorRuntime.awrap(driver.implicitWait(2000));

        case 4:
          context$2$0.next = 6;
          return _regeneratorRuntime.awrap(driver.findElOrEls('accessibility id', 'Make a Popup!', false));

        case 6:
          popUp = context$2$0.sent;
          popUpEl = popUp.ELEMENT;
          context$2$0.next = 10;
          return _regeneratorRuntime.awrap(driver.click(popUpEl));

        case 10:
          context$2$0.next = 12;
          return _regeneratorRuntime.awrap(driver.findElOrEls('xpath', './/*[@text=\'Search\']', false));

        case 12:
          search = context$2$0.sent;
          context$2$0.next = 15;
          return _regeneratorRuntime.awrap(driver.click(search.ELEMENT));

        case 15:
          context$2$0.next = 17;
          return _regeneratorRuntime.awrap(driver.findElOrEls('xpath', '//*[@text=\'Clicked popup menu item Search\']', false).should.eventually.exist);

        case 17:
          context$2$0.next = 19;
          return _regeneratorRuntime.awrap(driver.click(popUpEl));

        case 19:
          context$2$0.next = 21;
          return _regeneratorRuntime.awrap(driver.findElOrEls('xpath', './/*[@text=\'Add\']', false));

        case 21:
          add = context$2$0.sent;
          context$2$0.next = 24;
          return _regeneratorRuntime.awrap(driver.click(add.ELEMENT));

        case 24:
          context$2$0.next = 26;
          return _regeneratorRuntime.awrap(driver.findElOrEls('xpath', '//*[@text=\'Clicked popup menu item Add\']', false).should.eventually.exist);

        case 26:
          context$2$0.next = 28;
          return _regeneratorRuntime.awrap(driver.click(popUpEl));

        case 28:
          context$2$0.next = 30;
          return _regeneratorRuntime.awrap(driver.findElOrEls('xpath', './/*[@text=\'Edit\']', false));

        case 30:
          edit = context$2$0.sent;
          context$2$0.next = 33;
          return _regeneratorRuntime.awrap(driver.click(edit.ELEMENT));

        case 33:
          context$2$0.next = 35;
          return _regeneratorRuntime.awrap(driver.findElOrEls('xpath', '//*[@text=\'Clicked popup menu item Edit\']', false).should.eventually.exist);

        case 35:
          context$2$0.next = 37;
          return _regeneratorRuntime.awrap(driver.findElOrEls('xpath', './/*[@text=\'Share\']', false));

        case 37:
          share = context$2$0.sent;
          context$2$0.next = 40;
          return _regeneratorRuntime.awrap(driver.click(share.ELEMENT));

        case 40:
          context$2$0.next = 42;
          return _regeneratorRuntime.awrap(driver.findElOrEls('xpath', '//*[@text=\'Clicked popup menu item Share\']', false).should.eventually.exist);

        case 42:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QvZnVuY3Rpb25hbC9jb21tYW5kcy9maW5kL2J5LXhwYXRoLWUyZS1zcGVjcy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7b0JBQWlCLE1BQU07Ozs7OEJBQ0ksa0JBQWtCOzs7O2dCQUNQLGFBQWE7Ozs7MEJBQzVCLGFBQWE7Ozs7QUFFcEMsa0JBQUssTUFBTSxFQUFFLENBQUM7QUFDZCxrQkFBSyxHQUFHLDZCQUFnQixDQUFDOztBQUV6QixJQUFJLE1BQU0sWUFBQSxDQUFDO0FBQ1gsSUFBSSxXQUFXLEdBQUc7QUFDaEIsS0FBRyxFQUFFLDZCQUFXLGdCQUFnQixDQUFDO0FBQ2pDLFlBQVUsRUFBRSxTQUFTO0FBQ3JCLGNBQVksRUFBRSxTQUFTO0NBQ3hCLENBQUM7QUFDRixJQUFJLEdBQUcsR0FBRyx5QkFBeUIsQ0FBQztBQUNwQyxJQUFJLENBQUMsR0FBRyw0QkFBNEIsQ0FBQzs7QUFFckMsUUFBUSxDQUFDLGNBQWMsRUFBRSxZQUFZOzs7QUFDbkMsUUFBTSxDQUFDOzs7O0FBQ0wsZ0JBQU0sR0FBRyxtQkFBK0IsQ0FBQzs7MkNBQ25DLE1BQU0sQ0FBQyxhQUFhLENBQUMsV0FBVyxDQUFDOzs7Ozs7O0dBQ3hDLENBQUMsQ0FBQztBQUNILE9BQUssQ0FBQzs7Ozs7MkNBQ0UsTUFBTSxDQUFDLGFBQWEsRUFBRTs7Ozs7OztHQUM3QixDQUFDLENBQUM7QUFDSCxJQUFFLENBQUMsNkJBQTZCLEVBQUU7UUFDNUIsRUFBRTs7Ozs7MkNBQVMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxPQUFPLFNBQU8sR0FBRyxFQUFJLEtBQUssQ0FBQzs7O0FBQXpELFlBQUU7OzJDQUNBLE1BQU0sQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQzs7Ozs7OztHQUN0RSxDQUFDLENBQUM7QUFDSCxJQUFFLENBQUMsNkJBQTZCLEVBQUU7UUFDNUIsRUFBRTs7Ozs7MkNB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QyxLQUFLLENBQUMsT0FBTyxDQUFDOzs7OzJDQUNaLE1BQU0sQ0FBQyxXQUFXLENBQUMsT0FBTyx5QkFBdUIsS0FBSyxDQUFDOzs7QUFBbEUsYUFBRzs7MkNBQ0QsTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDOzs7OzJDQUN6QixNQUFNLENBQUMsV0FBVyxDQUFDLE9BQU8sZ0RBQThDLEtBQUssQ0FBQyxDQUMvRSxNQUFNLENBQUMsVUFBVSxDQUFDLEtBQUs7Ozs7MkNBRXRCLE1BQU0sQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDOzs7OzJDQUNWLE1BQU0sQ0FBQyxXQUFXLENBQUMsT0FBTywwQkFBd0IsS0FBSyxDQUFDOzs7QUFBckUsY0FBSTs7MkNBQ0YsTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDOzs7OzJDQUMxQixNQUFNLENBQUMsV0FBVyxDQUFDLE9BQU8saURBQStDLEtBQUssQ0FBQyxDQUNoRixNQUFNLENBQUMsVUFBVSxDQUFDLEtBQUs7Ozs7MkNBRVYsTUFBTSxDQUFDLFdBQVcsQ0FBQyxPQUFPLDJCQUF5QixLQUFLLENBQUM7OztBQUF2RSxlQUFLOzsyQ0FDSCxNQUFNLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUM7Ozs7MkNBQzNCLE1BQU0sQ0FBQyxXQUFXLENBQUMsT0FBTyxrREFBZ0QsS0FBSyxDQUFDLENBQ2pGLE1BQU0sQ0FBQyxVQUFVLENBQUMsS0FBSzs7Ozs7OztHQUM3QixDQUFDLENBQUM7Q0FDSixDQUFDLENBQUMiLCJmaWxlIjoidGVzdC9mdW5jdGlvbmFsL2NvbW1hbmRzL2ZpbmQvYnkteHBhdGgtZTJlLXNwZWNzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNoYWkgZnJvbSAnY2hhaSc7XG5pbXBvcnQgY2hhaUFzUHJvbWlzZWQgZnJvbSAnY2hhaS1hcy1wcm9taXNlZCc7XG5pbXBvcnQgQW5kcm9pZFVpYXV0b21hdG9yMkRyaXZlciBmcm9tICcuLi8uLi8uLi8uLic7XG5pbXBvcnQgc2FtcGxlQXBwcyBmcm9tICdzYW1wbGUtYXBwcyc7XG5cbmNoYWkuc2hvdWxkKCk7XG5jaGFpLnVzZShjaGFpQXNQcm9taXNlZCk7XG5cbmxldCBkcml2ZXI7XG5sZXQgZGVmYXVsdENhcHMgPSB7XG4gIGFwcDogc2FtcGxlQXBwcygnQXBpRGVtb3MtZGVidWcnKSxcbiAgZGV2aWNlTmFtZTogJ0FuZHJvaWQnLFxuICBwbGF0Zm9ybU5hbWU6ICdBbmRyb2lkJ1xufTtcbmxldCBhdHYgPSAnYW5kcm9pZC53aWRnZXQuVGV4dFZpZXcnO1xubGV0IGYgPSBcImFuZHJvaWQud2lkZ2V0LkZyYW1lTGF5b3V0XCI7XG5cbmRlc2NyaWJlKCdGaW5kIC0geHBhdGgnLCBmdW5jdGlvbiAoKSB7XG4gIGJlZm9yZShhc3luYyAoKSA9PiB7XG4gICAgZHJpdmVyID0gbmV3IEFuZHJvaWRVaWF1dG9tYXRvcjJEcml2ZXIoKTtcbiAgICBhd2FpdCBkcml2ZXIuY3JlYXRlU2Vzc2lvbihkZWZhdWx0Q2Fwcyk7XG4gIH0pO1xuICBhZnRlcihhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgZHJpdmVyLmRlbGV0ZVNlc3Npb24oKTtcbiAgfSk7XG4gIGl0KCdzaG91bGQgZmluZCBlbGVtZW50IGJ5IHR5cGUnLCBhc3luYyAoKSA9PiB7XG4gICAgbGV0IGVsID0gYXdhaXQgZHJpdmVyLmZpbmRFbE9yRWxzKCd4cGF0aCcsIGAvLyR7YXR2fWAsIGZhbHNlKTtcbiAgICBhd2FpdCBkcml2ZXIuZ2V0VGV4dChlbC5FTEVNRU5UKS5zaG91bGQuZXZlbnR1YWxseS5lcXVhbCgnQVBJIERlbW9zJyk7XG4gIH0pO1xuICBpdCgnc2hvdWxkIGZpbmQgZWxlbWVudCBieSB0ZXh0JywgYXN5bmMgKCkgPT4ge1xuICAgIGxldCBlbCA9IGF3YWl0IGRyaXZlci5maW5kRWxPckVscygneHBhdGgnLCBgLy8ke2F0dn1bQHRleHQ9J0FjY2Vzc2liaWxpdHknXWAsIGZhbHNlKTtcbiAgICBhd2FpdCBkcml2ZXIuZ2V0VGV4dChlbC5FTEVNRU5UKS5zaG91bGQuZXZlbnR1YWxseS5lcXVhbCgnQWNjZXNzaWJpbGl0eScpO1xuICB9KTtcbiAgaXQoJ3Nob3VsZCBmaW5kIGVsZW1lbnQgYnkgYXR0cmlidXRlJywgYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IGRyaXZlci5maW5kRWxPckVscygneHBhdGgnLCBgLy8qW0BlbmFibGVkPSd0cnVlJyBhbmQgQHNjcm9sbGFibGU9J3RydWUnXWAsIHRydWUpXG4gICAgICAgIC5zaG91bGQuZXZlbnR1YWxseS5oYXZlLmxlbmd0aCgxKTtcbiAgfSk7XG4gIGl0KCdzaG91bGQgZmluZCBleGFjdGx5IG9uZSBlbGVtZW50IHZpYSBlbGVtZW50c0J5WFBhdGgnLCBhc3luYyAoKSA9PiB7XG4gICAgbGV0IGVsID0gYXdhaXQgZHJpdmVyLmZpbmRFbE9yRWxzKCd4cGF0aCcsIGAvLyR7YXR2fVtAdGV4dD0nQWNjZXNzaWJpbGl0eSddYCwgdHJ1ZSk7XG4gICAgZWwubGVuZ3RoLnNob3VsZC5lcXVhbCgxKTtcbiAgICBhd2FpdCBkcml2ZXIuZ2V0VGV4dChlbFswXS5FTEVNRU5UKS5zaG91bGQuZXZlbnR1YWxseS5lcXVhbCgnQWNjZXNzaWJpbGl0eScpO1xuICB9KTtcbiAgaXQoJ3Nob3VsZCBmaW5kIGVsZW1lbnQgYnkgcGFydGlhbCB0ZXh0JywgYXN5bmMgKCkgPT4ge1xuICAgIGxldCBlbCA9IGF3YWl0IGRyaXZlci5maW5kRWxPckVscygneHBhdGgnLCBgLy8ke2F0dn1bY29udGFpbnMoQHRleHQsICdBY2Nlc3NpYmlsaXR5JyldYCwgZmFsc2UpO1xuICAgIGF3YWl0IGRyaXZlci5nZXRUZXh0KGVsLkVMRU1FTlQpLnNob3VsZC5ldmVudHVhbGx5LmVxdWFsKCdBY2Nlc3NpYmlsaXR5Jyk7XG4gIH0pO1xuICBpdCgnc2hvdWxkIGZpbmQgdGhlIGxhc3QgZWxlbWVudCcsIGFzeW5jICgpID0+IHtcbiAgICBsZXQgZWwgPSBhd2FpdCBkcml2ZXIuZmluZEVsT3JFbHMoJ3hwYXRoJywgYCgvLyR7YXR2fSlbbGFzdCgpXWAsIGZhbHNlKTtcbiAgICBsZXQgdGV4dCA9IGF3YWl0IGRyaXZlci5nZXRUZXh0KGVsLkVMRU1FTlQpO1xuICAgIFtcIk9TXCIsIFwiVGV4dFwiLCBcIlZpZXdzXCIsIFwiUHJlZmVyZW5jZVwiXS5zaG91bGQuaW5jbHVkZSh0ZXh0KTtcbiAgfSk7XG4gIGl0KCdzaG91bGQgZmluZCBlbGVtZW50IGJ5IGluZGV4IGFuZCBlbWJlZGRlZCBkZXNjJywgYXN5bmMgKCkgPT4ge1xuICAgIGxldCBlbCA9IGF3YWl0IGRyaXZlci5maW5kRWxPckVscygneHBhdGgnLCBgLy8ke2Z9Ly8ke2F0dn1bNV1gLCBmYWxzZSk7XG4gICAgYXdhaXQgZHJpdmVyLmdldFRleHQoZWwuRUxFTUVOVCkuc2hvdWxkLmV2ZW50dWFsbHkuZXF1YWwoJ0NvbnRlbnQnKTtcbiAgfSk7XG4gIGl0KCdzaG91bGQgZmluZCBhbGwgZWxlbWVudHMnLCBhc3luYyAoKSA9PiB7XG4gICAgbGV0IGVsID0gYXdhaXQgZHJpdmVyLmZpbmRFbE9yRWxzKCd4cGF0aCcsIGAvLypgLCB0cnVlKTtcbiAgICBlbC5sZW5ndGguc2hvdWxkLmJlLmFib3ZlKDIpO1xuICB9KTtcbiAgaXQoJ3Nob3VsZCBmaW5kIHRoZSBmaXJzdCBlbGVtZW50IHdoZW4gc2VhcmNoaW5nIGZvciBhbGwgZWxlbWVudHMnLCBhc3luYyAoKSA9PiB7XG4gICAgbGV0IGVsID0gYXdhaXQgZHJpdmVyLmZpbmRFbE9yRWxzKCd4cGF0aCcsIGAvLypgLCB0cnVlKTtcbiAgICBlbFswXS5zaG91bGQuZXhpc3Q7XG4gIH0pO1xuICBpdCgnc2hvdWxkIGZpbmQgbGVzcyBlbGVtZW50cyB3aXRoIGNvbXByZXNzaW9uIHR1cm5lZCBvbicsIGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCBkcml2ZXIudXBkYXRlU2V0dGluZ3Moe1wiaWdub3JlVW5pbXBvcnRhbnRWaWV3c1wiOiBmYWxzZX0pO1xuICAgIGxldCBlbGVtZW50c1dpdGhvdXRDb21wcmVzc2lvbiA9IGF3YWl0IGRyaXZlci5maW5kRWxPckVscygneHBhdGgnLCBgLy8qYCwgdHJ1ZSk7XG4gICAgYXdhaXQgZHJpdmVyLnVwZGF0ZVNldHRpbmdzKHtcImlnbm9yZVVuaW1wb3J0YW50Vmlld3NcIjogdHJ1ZX0pO1xuICAgIGxldCBlbGVtZW50c1dpdGhDb21wcmVzc2lvbiA9IGF3YWl0IGRyaXZlci5maW5kRWxPckVscygneHBhdGgnLCBgLy8qYCwgdHJ1ZSk7XG4gICAgZWxlbWVudHNXaXRob3V0Q29tcHJlc3Npb24ubGVuZ3RoLnNob3VsZC5iZS5ncmVhdGVyVGhhbihlbGVtZW50c1dpdGhDb21wcmVzc2lvbi5sZW5ndGgpO1xuICB9KTtcbiAgaXQoJ3Nob3VsZCBmaW5kIHRvYXN0IG1lc3NhZ2UgZWxlbWVudCBieSB0ZXh0JywgYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IGRyaXZlci5zdGFydEFjdGl2aXR5KGBpby5hcHBpdW0uYW5kcm9pZC5hcGlzYCwgYC52aWV3LlBvcHVwTWVudTFgKTtcbiAgICBhd2FpdCBkcml2ZXIuaW1wbGljaXRXYWl0KDIwMDApO1xuICAgIGxldCBwb3BVcCA9IGF3YWl0IGRyaXZlci5maW5kRWxPckVscygnYWNjZXNzaWJpbGl0eSBpZCcsICdNYWtlIGEgUG9wdXAhJywgZmFsc2UpO1xuICAgIGxldCAgcG9wVXBFbCA9IHBvcFVwLkVMRU1FTlQ7XG5cbiAgICBhd2FpdCBkcml2ZXIuY2xpY2socG9wVXBFbCk7XG4gICAgbGV0IHNlYXJjaCA9IGF3YWl0IGRyaXZlci5maW5kRWxPckVscygneHBhdGgnLCBgLi8vKltAdGV4dD0nU2VhcmNoJ11gLCBmYWxzZSk7XG4gICAgYXdhaXQgZHJpdmVyLmNsaWNrKHNlYXJjaC5FTEVNRU5UKTtcbiAgICBhd2FpdCBkcml2ZXIuZmluZEVsT3JFbHMoJ3hwYXRoJywgYC8vKltAdGV4dD0nQ2xpY2tlZCBwb3B1cCBtZW51IGl0ZW0gU2VhcmNoJ11gLCBmYWxzZSlcbiAgICAgICAgLnNob3VsZC5ldmVudHVhbGx5LmV4aXN0O1xuXG4gICAgYXdhaXQgZHJpdmVyLmNsaWNrKHBvcFVwRWwpO1xuICAgIGxldCBhZGQgPWF3YWl0IGRyaXZlci5maW5kRWxPckVscygneHBhdGgnLCBgLi8vKltAdGV4dD0nQWRkJ11gLCBmYWxzZSk7XG4gICAgYXdhaXQgZHJpdmVyLmNsaWNrKGFkZC5FTEVNRU5UKTtcbiAgICBhd2FpdCBkcml2ZXIuZmluZEVsT3JFbHMoJ3hwYXRoJywgYC8vKltAdGV4dD0nQ2xpY2tlZCBwb3B1cCBtZW51IGl0ZW0gQWRkJ11gLCBmYWxzZSlcbiAgICAgICAgLnNob3VsZC5ldmVudHVhbGx5LmV4aXN0O1xuXG4gICAgYXdhaXQgZHJpdmVyLmNsaWNrKHBvcFVwRWwpO1xuICAgIGxldCBlZGl0ID0gYXdhaXQgZHJpdmVyLmZpbmRFbE9yRWxzKCd4cGF0aCcsIGAuLy8qW0B0ZXh0PSdFZGl0J11gLCBmYWxzZSk7XG4gICAgYXdhaXQgZHJpdmVyLmNsaWNrKGVkaXQuRUxFTUVOVCk7XG4gICAgYXdhaXQgZHJpdmVyLmZpbmRFbE9yRWxzKCd4cGF0aCcsIGAvLypbQHRleHQ9J0NsaWNrZWQgcG9wdXAgbWVudSBpdGVtIEVkaXQnXWAsIGZhbHNlKVxuICAgICAgICAuc2hvdWxkLmV2ZW50dWFsbHkuZXhpc3Q7XG5cbiAgICBsZXQgc2hhcmUgPSBhd2FpdCBkcml2ZXIuZmluZEVsT3JFbHMoJ3hwYXRoJywgYC4vLypbQHRleHQ9J1NoYXJlJ11gLCBmYWxzZSk7XG4gICAgYXdhaXQgZHJpdmVyLmNsaWNrKHNoYXJlLkVMRU1FTlQpO1xuICAgIGF3YWl0IGRyaXZlci5maW5kRWxPckVscygneHBhdGgnLCBgLy8qW0B0ZXh0PSdDbGlja2VkIHBvcHVwIG1lbnUgaXRlbSBTaGFyZSddYCwgZmFsc2UpXG4gICAgICAgIC5zaG91bGQuZXZlbnR1YWxseS5leGlzdDtcbiAgfSk7XG59KTtcbiJdLCJzb3VyY2VSb290IjoiLi4vLi4vLi4vLi4vLi4ifQ==

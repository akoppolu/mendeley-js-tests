'use strict';

var _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];

Object.defineProperty(exports, '__esModule', {
  value: true
});

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

var _appiumSupport = require('appium-support');

var localIp = _appiumSupport.util.localIp;

var env = {};

env.IMPLICIT_WAIT_TIMEOUT = 5000;

env.PLATFORM_VERSION = process.env.PLATFORM_VERSION;

env.VERBOSE = process.env.VERBOSE;
if (env.VERBOSE) console.log("process.env.LAUNCH_TIMEOUT -->", process.env.LAUNCH_TIMEOUT); //eslint-disable-line no-console
env.LAUNCH_TIMEOUT = JSON.parse(process.env.LAUNCH_TIMEOUT || 60000);
env.MOCHA_INIT_TIMEOUT = parseInt(process.env.MOCHA_INIT_TIMEOUT || 300000, 10);

// real device or emulator
env.REAL_DEVICE = process.env.REAL_DEVICE;
env.EMU = !env.REAL_DEVICE;

// device selection
env.DEVICE = (process.env.DEVICE || 'ios93').toLowerCase();

function iphoneOrIpadSimulator(device, version) {
  var isIpad = device.match(/ipad/i);
  switch (version) {
    case '6.1':
    case '7.0':
    case '7.1':
      return isIpad ? 'iPad 2' : 'iPhone 5s';
    case '8.0':
      return isIpad ? 'iPad 2' : 'iPhone 6';
    case '8.1':
      return isIpad ? 'iPad 2' : 'iPhone 6';
    case '8.2':
      return isIpad ? 'iPad 2' : 'iPhone 6';
    case '8.3':
      return isIpad ? 'iPad 2' : 'iPhone 6';
    case '8.4':
      return isIpad ? 'iPad 2' : 'iPhone 6';
    case '9.0':
      return isIpad ? 'iPad 2' : 'iPhone 6';
    case '9.1':
      return isIpad ? 'iPad 2' : 'iPhone 6';
    case '9.2':
      return isIpad ? 'iPad 2' : 'iPhone 6';
    case '9.3':
      return isIpad ? 'iPad 2' : 'iPhone 6';
    default:
      throw new Error("invalid version");
  }
}

// set up the default capabilities
env.CAPS = {
  browserName: '',
  app: process.env.APP ? _path2['default'].resolve(__dirname, '../../sample-code/apps/' + process.env.APP + '/build/Release-iphonesimulator/' + process.env.APP + '.app') : ''
};
switch (env.DEVICE) {
  case 'ios6':
  case 'ios6_iphone':
  case 'ios6_ipad':
    env.CAPS.deviceName = iphoneOrIpadSimulator(env.DEVICE, "6.1");
    break;
  case 'ios7':
  case 'ios7_iphone':
  case 'ios7_ipad':
    env.CAPS.deviceName = iphoneOrIpadSimulator(env.DEVICE, "7.0");
    break;
  case 'ios71':
  case 'ios71_iphone':
  case 'ios71_ipad':
    env.CAPS.deviceName = iphoneOrIpadSimulator(env.DEVICE, "7.1");
    break;
  case 'ios8':
  case 'ios80':
  case 'ios8_iphone':
  case 'ios8_ipad':
    env.CAPS.deviceName = iphoneOrIpadSimulator(env.DEVICE, "8.0");
    break;
  case 'ios81':
  case 'ios81_iphone':
  case 'ios81_ipad':
    env.CAPS.deviceName = iphoneOrIpadSimulator(env.DEVICE, "8.1");
    break;
  case 'ios82':
  case 'ios82_iphone':
  case 'ios82_ipad':
    env.CAPS.deviceName = iphoneOrIpadSimulator(env.DEVICE, "8.2");
    break;
  case 'ios83':
  case 'ios83_iphone':
  case 'ios83_ipad':
    env.CAPS.deviceName = iphoneOrIpadSimulator(env.DEVICE, "8.3");
    break;
  case 'ios84':
  case 'ios84_iphone':
  case 'ios84_ipad':
    env.CAPS.deviceName = iphoneOrIpadSimulator(env.DEVICE, "8.4");
    break;
  case 'ios9':
  case 'ios9_iphone':
  case 'ios9_ipad':
    env.CAPS.deviceName = iphoneOrIpadSimulator(env.DEVICE, "9.0");
    break;
  case 'ios91':
  case 'ios91_iphone':
  case 'ios91_ipad':
    env.CAPS.deviceName = iphoneOrIpadSimulator(env.DEVICE, "9.1");
    break;
  case 'ios': // default. move as versions go up
  case 'ios92':
  case 'ios92_iphone':
  case 'ios92_ipad':
    env.CAPS.deviceName = iphoneOrIpadSimulator(env.DEVICE, "9.2");
    break;
  case 'ios93':
  case 'ios93_iphone':
  case 'ios93_ipad':
    env.CAPS.deviceName = iphoneOrIpadSimulator(env.DEVICE, "9.3");
    break;
  default:
    throw new Error('Unknown device!!!');
}

env.IOS6 = env.DEVICE.match(/ios6/i);
env.IOS7 = env.DEVICE.match(/ios7/i);
env.IOS71 = env.DEVICE.match(/ios71/i);
env.IOS8 = env.DEVICE.match(/ios8/i);
env.IOS80 = env.DEVICE.match(/ios80/i);
env.IOS81 = env.DEVICE.match(/ios81/i);
env.IOS82 = env.DEVICE.match(/ios82/i);
env.IOS83 = env.DEVICE.match(/ios83/i);
env.IOS84 = env.DEVICE.match(/ios84/i);
env.IOS9 = env.DEVICE.match(/ios9/i);
env.IOS91 = env.DEVICE.match(/ios91/i);
env.IOS92 = env.DEVICE.match(/ios92/i);
env.IOS93 = env.DEVICE.match(/ios93/i);

// better timeout settings for 71
env.LAUNCH_TIMEOUT = process.env.LAUNCH_TIMEOUT ? JSON.parse(process.env.LAUNCH_TIMEOUT) : env.IOS71 || env.IOS8 || env.IOS9 ? { "global": 60000, "afterSimLaunch": 10000 } : 60000;

env.CAPS.launchTimeout = env.LAUNCH_TIMEOUT;

env.CAPS.platformName = "iOS";

if (env.REAL_DEVICE) {
  env.CAPS.udid = "auto";
}

if (process.env.UDID) {
  env.CAPS.udid = process.env.UDID;
}

if (env.PLATFORM_VERSION) {
  env.CAPS.platformVersion = env.PLATFORM_VERSION;
} else if (env.IOS6) {
  env.CAPS.platformVersion = "6.1";
} else if (env.IOS71) {
  env.CAPS.platformVersion = "7.1";
} else if (env.IOS7) {
  env.CAPS.platformVersion = "7.0";
} else if (env.IOS81) {
  env.CAPS.platformVersion = "8.1";
} else if (env.IOS82) {
  env.CAPS.platformVersion = "8.2";
} else if (env.IOS83) {
  env.CAPS.platformVersion = "8.3";
} else if (env.IOS84) {
  env.CAPS.platformVersion = "8.4";
} else if (env.IOS8) {
  env.CAPS.platformVersion = "8.0";
} else if (env.IOS91) {
  env.CAPS.platformVersion = "9.1";
} else if (env.IOS92) {
  env.CAPS.platformVersion = "9.2";
} else if (env.IOS93) {
  env.CAPS.platformVersion = "9.3";
} else if (env.IOS9) {
  env.CAPS.platformVersion = "9.0";
}

// max retry
if (process.env.MAX_RETRY) env.MAX_RETRY = parseInt(process.env.MAX_RETRY, 10);

env.APPIUM_PORT = parseInt(process.env.APPIUM_PORT || 4723, 10);
env.LOCAL_APPIUM_PORT = env.SAUCE ? 4443 : env.APPIUM_PORT;
if (env.REAL_DEVICE) {
  env.TEST_END_POINT = 'http://' + localIp() + ':' + env.LOCAL_APPIUM_PORT + '/test/';
} else {
  env.TEST_END_POINT = 'http://localhost:' + env.LOCAL_APPIUM_PORT + '/test/';
}
env.GUINEA_TEST_END_POINT = env.TEST_END_POINT + 'guinea-pig';
env.PHISHING_END_POINT = env.TEST_END_POINT.replace('http://', 'http://foo:bar@');

exports['default'] = env;
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QvZTJlL2hlbHBlcnMvZW52LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O29CQUFpQixNQUFNOzs7OzZCQUNGLGdCQUFnQjs7QUFHckMsSUFBSSxPQUFPLEdBQUcsb0JBQUssT0FBTyxDQUFDOztBQUUzQixJQUFJLEdBQUcsR0FBRyxFQUFFLENBQUM7O0FBRWIsR0FBRyxDQUFDLHFCQUFxQixHQUFHLElBQUksQ0FBQzs7QUFFakMsR0FBRyxDQUFDLGdCQUFnQixHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLENBQUM7O0FBRXBELEdBQUcsQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUM7QUFDbEMsSUFBSSxHQUFHLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsZ0NBQWdDLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUMsQ0FBQztBQUMzRixHQUFHLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxjQUFjLElBQUksS0FBSyxDQUFDLENBQUM7QUFDckUsR0FBRyxDQUFDLGtCQUFrQixHQUFHLFFBQVEsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLGtCQUFrQixJQUFJLE1BQU0sRUFBRSxFQUFFLENBQUMsQ0FBQzs7O0FBR2hGLEdBQUcsQ0FBQyxXQUFXLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUM7QUFDMUMsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUM7OztBQUczQixHQUFHLENBQUMsTUFBTSxHQUFHLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxNQUFNLElBQUksT0FBTyxDQUFBLENBQUUsV0FBVyxFQUFFLENBQUM7O0FBRTNELFNBQVMscUJBQXFCLENBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRTtBQUMvQyxNQUFJLE1BQU0sR0FBRyxNQUFNLENBQUMsS0FB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SUFBSSxHQUFHLENBQUMsSUFBSSxFQUFFO0FBQ25CLEtBQUcsQ0FBQyxJQUFJLENBQUMsZUFBZSxHQUFHLEtBQUssQ0FBQztDQUNsQzs7O0FBR0QsSUFBSSxPQUFPLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRSxHQUFHLENBQUMsU0FBUyxHQUFHLFFBQVEsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRSxFQUFFLENBQUMsQ0FBQzs7QUFFL0UsR0FBRyxDQUFDLFdBQVcsR0FBRyxRQUFRLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxXQUFXLElBQUksSUFBSSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0FBQ2hFLEdBQUcsQ0FBQyxpQkFBaUIsR0FBRyxHQUFHLENBQUMsS0FBSyxHQUFHLElBQUksR0FBRyxHQUFHLENBQUMsV0FBVyxDQUFDO0FBQzNELElBQUksR0FBRyxDQUFDLFdBQVcsRUFBRTtBQUNuQixLQUFHLENBQUMsY0FBYyxlQUFhLE9BQU8sRUFBRSxTQUFJLEdBQUcsQ0FBQyxpQkFBaUIsV0FBUSxDQUFDO0NBQzNFLE1BQU07QUFDTCxLQUFHLENBQUMsY0FBYyx5QkFBdUIsR0FBRyxDQUFDLGlCQUFpQixXQUFRLENBQUM7Q0FDeEU7QUFDRCxHQUFHLENBQUMscUJBQXFCLEdBQUcsR0FBRyxDQUFDLGNBQWMsR0FBRyxZQUFZLENBQUM7QUFDOUQsR0FBRyxDQUFDLGtCQUFrQixHQUFHLEdBQUcsQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRSxpQkFBaUIsQ0FBQyxDQUFDOztxQkFFbkUsR0FBRyIsImZpbGUiOiJ0ZXN0L2UyZS9oZWxwZXJzL2Vudi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IHsgdXRpbCB9IGZyb20gJ2FwcGl1bS1zdXBwb3J0JztcblxuXG5sZXQgbG9jYWxJcCA9IHV0aWwubG9jYWxJcDtcblxubGV0IGVudiA9IHt9O1xuXG5lbnYuSU1QTElDSVRfV0FJVF9USU1FT1VUID0gNTAwMDtcblxuZW52LlBMQVRGT1JNX1ZFUlNJT04gPSBwcm9jZXNzLmVudi5QTEFURk9STV9WRVJTSU9OO1xuXG5lbnYuVkVSQk9TRSA9IHByb2Nlc3MuZW52LlZFUkJPU0U7XG5pZiAoZW52LlZFUkJPU0UpIGNvbnNvbGUubG9nKFwicHJvY2Vzcy5lbnYuTEFVTkNIX1RJTUVPVVQgLS0+XCIsIHByb2Nlc3MuZW52LkxBVU5DSF9USU1FT1VUKTsgLy9lc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGVcbmVudi5MQVVOQ0hfVElNRU9VVCA9IEpTT04ucGFyc2UocHJvY2Vzcy5lbnYuTEFVTkNIX1RJTUVPVVQgfHwgNjAwMDApO1xuZW52Lk1PQ0hBX0lOSVRfVElNRU9VVCA9IHBhcnNlSW50KHByb2Nlc3MuZW52Lk1PQ0hBX0lOSVRfVElNRU9VVCB8fCAzMDAwMDAsIDEwKTtcblxuLy8gcmVhbCBkZXZpY2Ugb3IgZW11bGF0b3JcbmVudi5SRUFMX0RFVklDRSA9IHByb2Nlc3MuZW52LlJFQUxfREVWSUNFO1xuZW52LkVNVSA9ICFlbnYuUkVBTF9ERVZJQ0U7XG5cbi8vIGRldmljZSBzZWxlY3Rpb25cbmVudi5ERVZJQ0UgPSAocHJvY2Vzcy5lbnYuREVWSUNFIHx8ICdpb3M5MycpLnRvTG93ZXJDYXNlKCk7XG5cbmZ1bmN0aW9uIGlwaG9uZU9ySXBhZFNpbXVsYXRvciAoZGV2aWNlLCB2ZXJzaW9uKSB7XG4gIGxldCBpc0lwYWQgPSBkZXZpY2UubWF0Y2goL2lwYWQvaSk7XG4gIHN3aXRjaCAodmVyc2lvbikge1xuICAgIGNhc2UgJzYuMSc6XG4gICAgY2FzZSAnNy4wJzpcbiAgICBjYXNlICc3LjEnOlxuICAgICAgcmV0dXJuIGlzSXBhZCA/ICdpUGFkIDInIDogJ2lQaG9uZSA1cyc7XG4gICAgY2FzZSAnOC4wJzpcbiAgICAgIHJldHVybiBpc0lwYWQgPyAnaVBhZCAyJyA6ICdpUGhvbmUgNic7XG4gICAgY2FzZSAnOC4xJzpcbiAgICAgIHJldHVybiBpc0lwYWQgPyAnaVBhZCAyJyA6ICdpUGhvbmUgNic7XG4gICAgY2FzZSAnOC4yJzpcbiAgICAgIHJldHVybiBpc0lwYWQgPyAnaVBhZCAyJyA6ICdpUGhvbmUgNic7XG4gICAgY2FzZSAnOC4zJzpcbiAgICAgIHJldHVybiBpc0lwYWQgPyAnaVBhZCAyJyA6ICdpUGhvbmUgNic7XG4gICAgY2FzZSAnOC40JzpcbiAgICAgIHJldHVybiBpc0lwYWQgPyAnaVBhZCAyJyA6ICdpUGhvbmUgNic7XG4gICAgY2FzZSAnOS4wJzpcbiAgICAgIHJldHVybiBpc0lwYWQgPyAnaVBhZCAyJyA6ICdpUGhvbmUgNic7XG4gICAgY2FzZSAnOS4xJzpcbiAgICAgIHJldHVybiBpc0lwYWQgPyAnaVBhZCAyJyA6ICdpUGhvbmUgNic7XG4gICAgY2FzZSAnOS4yJzpcbiAgICAgIHJldHVybiBpc0lwYWQgPyAnaVBhZCAyJyA6ICdpUGhvbmUgNic7XG4gICAgY2FzZSAnOS4zJzpcbiAgICAgIHJldHVybiBpc0lwYWQgPyAnaVBhZCAyJyA6ICdpUGhvbmUgNic7XG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93IG5ldyBFcnJvcihcImludmFsaWQgdmVyc2lvblwiKTtcbiAgfVxufVxuXG4vLyBzZXQgdXAgdGhlIGRlZmF1bHQgY2FwYWJpbGl0aWVzXG5lbnYuQ0FQUyA9IHtcbiAgYnJvd3Nlck5hbWU6ICcnLFxuICBhcHA6IHByb2Nlc3MuZW52LkFQUCA/IHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsIGAuLi8uLi9zYW1wbGUtY29kZS9hcHBzLyR7cHJvY2Vzcy5lbnYuQVBQfS9idWlsZC9SZWxlYXNlLWlwaG9uZXNpbXVsYXRvci8ke3Byb2Nlc3MuZW52LkFQUH0uYXBwYCkgOiAnJ1xufTtcbnN3aXRjaCAoZW52LkRFVklDRSkge1xuICBjYXNlICdpb3M2JzpcbiAgY2FzZSAnaW9zNl9pcGhvbmUnOlxuICBjYXNlICdpb3M2X2lwYWQnOlxuICAgIGVudi5DQVBTLmRldmljZU5hbWUgPSBpcGhvbmVPcklwYWRTaW11bGF0b3IoZW52LkRFVklDRSwgXCI2LjFcIik7XG4gICAgYnJlYWs7XG4gIGNhc2UgJ2lvczcnOlxuICBjYXNlICdpb3M3X2lwaG9uZSc6XG4gIGNhc2UgJ2lvczdfaXBhZCc6XG4gICAgZW52LkNBUFMuZGV2aWNlTmFtZSA9IGlwaG9uZU9ySXBhZFNpbXVsYXRvcihlbnYuREVWSUNFLCBcIjcuMFwiKTtcbiAgICBicmVhaztcbiAgY2FzZSAnaW9zNzEnOlxuICBjYXNlICdpb3M3MV9pcGhvbmUnOlxuICBjYXNlICdpb3M3MV9pcGFkJzpcbiAgICBlbnYuQ0FQUy5kZXZpY2VOYW1lID0gaXBob25lT3JJcGFkU2ltdWxhdG9yKGVudi5ERVZJQ0UsIFwiNy4xXCIpO1xuICAgIGJyZWFrO1xuICBjYXNlICdpb3M4JzpcbiAgY2FzZSAnaW9zODAnOlxuICBjYXNlICdpb3M4X2lwaG9uZSc6XG4gIGNhc2UgJ2lvczhfaXBhZCc6XG4gICAgZW52LkNBUFMuZGV2aWNlTmFtZSA9IGlwaG9uZU9ySXBhZFNpbXVsYXRvcihlbnYuREVWSUNFLCBcIjguMFwiKTtcbiAgICBicmVhaztcbiAgY2FzZSAnaW9zODEnOlxuICBjYXNlICdpb3M4MV9pcGhvbmUnOlxuICBjYXNlICdpb3M4MV9pcGFkJzpcbiAgICBlbnYuQ0FQUy5kZXZpY2VOYW1lID0gaXBob25lT3JJcGFkU2ltdWxhdG9yKGVudi5ERVZJQ0UsIFwiOC4xXCIpO1xuICAgIGJyZWFrO1xuICBjYXNlICdpb3M4Mic6XG4gIGNhc2UgJ2lvczgyX2lwaG9uZSc6XG4gIGNhc2UgJ2lvczgyX2lwYWQnOlxuICAgIGVudi5DQVBTLmRldmljZU5hbWUgPSBpcGhvbmVPcklwYWRTaW11bGF0b3IoZW52LkRFVklDRSwgXCI4LjJcIik7XG4gICAgYnJlYWs7XG4gIGNhc2UgJ2lvczgzJzpcbiAgY2FzZSAnaW9zODNfaXBob25lJzpcbiAgY2FzZSAnaW9zODNfaXBhZCc6XG4gICAgZW52LkNBUFMuZGV2aWNlTmFtZSA9IGlwaG9uZU9ySXBhZFNpbXVsYXRvcihlbnYuREVWSUNFLCBcIjguM1wiKTtcbiAgICBicmVhaztcbiAgY2FzZSAnaW9zODQnOlxuICBjYXNlICdpb3M4NF9pcGhvbmUnOlxuICBjYXNlICdpb3M4NF9pcGFkJzpcbiAgICBlbnYuQ0FQUy5kZXZpY2VOYW1lID0gaXBob25lT3JJcGFkU2ltdWxhdG9yKGVudi5ERVZJQ0UsIFwiOC40XCIpO1xuICAgIGJyZWFrO1xuICBjYXNlICdpb3M5JzpcbiAgY2FzZSAnaW9zOV9pcGhvbmUnOlxuICBjYXNlICdpb3M5X2lwYWQnOlxuICAgIGVudi5DQVBTLmRldmljZU5hbWUgPSBpcGhvbmVPcklwYWRTaW11bGF0b3IoZW52LkRFVklDRSwgXCI5LjBcIik7XG4gICAgYnJlYWs7XG4gIGNhc2UgJ2lvczkxJzpcbiAgY2FzZSAnaW9zOTFfaXBob25lJzpcbiAgY2FzZSAnaW9zOTFfaXBhZCc6XG4gICAgZW52LkNBUFMuZGV2aWNlTmFtZSA9IGlwaG9uZU9ySXBhZFNpbXVsYXRvcihlbnYuREVWSUNFLCBcIjkuMVwiKTtcbiAgICBicmVhaztcbiAgY2FzZSAnaW9zJzogLy8gZGVmYXVsdC4gbW92ZSBhcyB2ZXJzaW9ucyBnbyB1cFxuICBjYXNlICdpb3M5Mic6XG4gIGNhc2UgJ2lvczkyX2lwaG9uZSc6XG4gIGNhc2UgJ2lvczkyX2lwYWQnOlxuICAgIGVudi5DQVBTLmRldmljZU5hbWUgPSBpcGhvbmVPcklwYWRTaW11bGF0b3IoZW52LkRFVklDRSwgXCI5LjJcIik7XG4gICAgYnJlYWs7XG4gIGNhc2UgJ2lvczkzJzpcbiAgY2FzZSAnaW9zOTNfaXBob25lJzpcbiAgY2FzZSAnaW9zOTNfaXBhZCc6XG4gICAgZW52LkNBUFMuZGV2aWNlTmFtZSA9IGlwaG9uZU9ySXBhZFNpbXVsYXRvcihlbnYuREVWSUNFLCBcIjkuM1wiKTtcbiAgICBicmVhaztcbiAgZGVmYXVsdDpcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gZGV2aWNlISEhJyk7XG59XG5cbmVudi5JT1M2ID0gZW52LkRFVklDRS5tYXRjaCgvaW9zNi9pKTtcbmVudi5JT1M3ID0gZW52LkRFVklDRS5tYXRjaCgvaW9zNy9pKTtcbmVudi5JT1M3MSA9IGVudi5ERVZJQ0UubWF0Y2goL2lvczcxL2kpO1xuZW52LklPUzggPSBlbnYuREVWSUNFLm1hdGNoKC9pb3M4L2kpO1xuZW52LklPUzgwID0gZW52LkRFVklDRS5tYXRjaCgvaW9zODAvaSk7XG5lbnYuSU9TODEgPSBlbnYuREVWSUNFLm1hdGNoKC9pb3M4MS9pKTtcbmVudi5JT1M4MiA9IGVudi5ERVZJQ0UubWF0Y2goL2lvczgyL2kpO1xuZW52LklPUzgzID0gZW52LkRFVklDRS5tYXRjaCgvaW9zODMvaSk7XG5lbnYuSU9TODQgPSBlbnYuREVWSUNFLm1hdGNoKC9pb3M4NC9pKTtcbmVudi5JT1M5ID0gZW52LkRFVklDRS5tYXRjaCgvaW9zOS9pKTtcbmVudi5JT1M5MSA9IGVudi5ERVZJQ0UubWF0Y2goL2lvczkxL2kpO1xuZW52LklPUzkyID0gZW52LkRFVklDRS5tYXRjaCgvaW9zOTIvaSk7XG5lbnYuSU9TOTMgPSBlbnYuREVWSUNFLm1hdGNoKC9pb3M5My9pKTtcblxuLy8gYmV0dGVyIHRpbWVvdXQgc2V0dGluZ3MgZm9yIDcxXG5lbnYuTEFVTkNIX1RJTUVPVVQgPSAgcHJvY2Vzcy5lbnYuTEFVTkNIX1RJTUVPVVQgPyBKU09OLnBhcnNlKHByb2Nlc3MuZW52LkxBVU5DSF9USU1FT1VUKSA6XG4gICgoZW52LklPUzcxIHx8IGVudi5JT1M4IHx8IGVudi5JT1M5KSA/IHtcImdsb2JhbFwiOiA2MDAwMCwgXCJhZnRlclNpbUxhdW5jaFwiOiAxMDAwMH0gOiA2MDAwMCk7XG5cbmVudi5DQVBTLmxhdW5jaFRpbWVvdXQgPSBlbnYuTEFVTkNIX1RJTUVPVVQ7XG5cbmVudi5DQVBTLnBsYXRmb3JtTmFtZSA9IFwiaU9TXCI7XG5cbmlmIChlbnYuUkVBTF9ERVZJQ0UpIHtcbiAgZW52LkNBUFMudWRpZCA9IFwiYXV0b1wiO1xufVxuXG5pZiAocHJvY2Vzcy5lbnYuVURJRCkge1xuICBlbnYuQ0FQUy51ZGlkID0gcHJvY2Vzcy5lbnYuVURJRDtcbn1cblxuaWYgKGVudi5QTEFURk9STV9WRVJTSU9OKSB7XG4gIGVudi5DQVBTLnBsYXRmb3JtVmVyc2lvbiA9IGVudi5QTEFURk9STV9WRVJTSU9OO1xufSBlbHNlIGlmIChlbnYuSU9TNikge1xuICBlbnYuQ0FQUy5wbGF0Zm9ybVZlcnNpb24gPSBcIjYuMVwiO1xufSBlbHNlIGlmIChlbnYuSU9TNzEpIHtcbiAgZW52LkNBUFMucGxhdGZvcm1WZXJzaW9uID0gXCI3LjFcIjtcbn0gZWxzZSBpZiAoZW52LklPUzcpIHtcbiAgZW52LkNBUFMucGxhdGZvcm1WZXJzaW9uID0gXCI3LjBcIjtcbn0gZWxzZSBpZiAoZW52LklPUzgxKSB7XG4gIGVudi5DQVBTLnBsYXRmb3JtVmVyc2lvbiA9IFwiOC4xXCI7XG59IGVsc2UgaWYgKGVudi5JT1M4Mikge1xuICBlbnYuQ0FQUy5wbGF0Zm9ybVZlcnNpb24gPSBcIjguMlwiO1xufSBlbHNlIGlmIChlbnYuSU9TODMpIHtcbiAgZW52LkNBUFMucGxhdGZvcm1WZXJzaW9uID0gXCI4LjNcIjtcbn0gZWxzZSBpZiAoZW52LklPUzg0KSB7XG4gIGVudi5DQVBTLnBsYXRmb3JtVmVyc2lvbiA9IFwiOC40XCI7XG59IGVsc2UgaWYgKGVudi5JT1M4KSB7XG4gIGVudi5DQVBTLnBsYXRmb3JtVmVyc2lvbiA9IFwiOC4wXCI7XG59IGVsc2UgaWYgKGVudi5JT1M5MSkge1xuICBlbnYuQ0FQUy5wbGF0Zm9ybVZlcnNpb24gPSBcIjkuMVwiO1xufSBlbHNlIGlmIChlbnYuSU9TOTIpIHtcbiAgZW52LkNBUFMucGxhdGZvcm1WZXJzaW9uID0gXCI5LjJcIjtcbn0gZWxzZSBpZiAoZW52LklPUzkzKSB7XG4gIGVudi5DQVBTLnBsYXRmb3JtVmVyc2lvbiA9IFwiOS4zXCI7XG59IGVsc2UgaWYgKGVudi5JT1M5KSB7XG4gIGVudi5DQVBTLnBsYXRmb3JtVmVyc2lvbiA9IFwiOS4wXCI7XG59XG5cbi8vIG1heCByZXRyeVxuaWYgKHByb2Nlc3MuZW52Lk1BWF9SRVRSWSkgZW52Lk1BWF9SRVRSWSA9IHBhcnNlSW50KHByb2Nlc3MuZW52Lk1BWF9SRVRSWSwgMTApO1xuXG5lbnYuQVBQSVVNX1BPUlQgPSBwYXJzZUludChwcm9jZXNzLmVudi5BUFBJVU1fUE9SVCB8fCA0NzIzLCAxMCk7XG5lbnYuTE9DQUxfQVBQSVVNX1BPUlQgPSBlbnYuU0FVQ0UgPyA0NDQzIDogZW52LkFQUElVTV9QT1JUO1xuaWYgKGVudi5SRUFMX0RFVklDRSkge1xuICBlbnYuVEVTVF9FTkRfUE9JTlQgPSBgaHR0cDovLyR7bG9jYWxJcCgpfToke2Vudi5MT0NBTF9BUFBJVU1fUE9SVH0vdGVzdC9gO1xufSBlbHNlIHtcbiAgZW52LlRFU1RfRU5EX1BPSU5UID0gYGh0dHA6Ly9sb2NhbGhvc3Q6JHtlbnYuTE9DQUxfQVBQSVVNX1BPUlR9L3Rlc3QvYDtcbn1cbmVudi5HVUlORUFfVEVTVF9FTkRfUE9JTlQgPSBlbnYuVEVTVF9FTkRfUE9JTlQgKyAnZ3VpbmVhLXBpZyc7XG5lbnYuUEhJU0hJTkdfRU5EX1BPSU5UID0gZW52LlRFU1RfRU5EX1BPSU5ULnJlcGxhY2UoJ2h0dHA6Ly8nLCAnaHR0cDovL2ZvbzpiYXJAJyk7XG5cbmV4cG9ydCBkZWZhdWx0IGVudjtcbiJdLCJzb3VyY2VSb290IjoiLi4vLi4vLi4vLi4ifQ==

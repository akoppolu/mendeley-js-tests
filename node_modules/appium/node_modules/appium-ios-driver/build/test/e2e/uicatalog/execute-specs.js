'use strict';

var _regeneratorRuntime = require('babel-runtime/regenerator')['default'];

var _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];

var _setupBase = require("../setup-base");

var _setupBase2 = _interopRequireDefault(_setupBase);

var _desired = require('./desired');

var _desired2 = _interopRequireDefault(_desired);

var _bluebird = require('bluebird');

var _bluebird2 = _interopRequireDefault(_bluebird);

var _helpersRecipes = require('../helpers/recipes');

describe('uicatalog - execute', function () {
  var _this = this;

  var session = (0, _setupBase2['default'])(this, _desired2['default']);
  var driver = session.driver;

  it('should do UIAutomation commands if not in web frame', function callee$1$0() {
    var res;
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(driver.execute("UIATarget.localTarget().frontMostApp().bundleID()"));

        case 2:
          res = context$2$0.sent;

          res.should.include(".UICatalog");

        case 4:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });

  it('should not fail if UIAutomation command blows up', function callee$1$0() {
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(_bluebird2['default'].resolve(driver.execute("UIATarget.foobarblah()"))['catch'](_helpersRecipes.throwMatchableError).should.be.rejectedWith(/jsonwpCode: 17/));

        case 2:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });

  it('should not fail with quotes', function callee$1$0() {
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(driver.execute('$.log(\'hi\\\'s\');'));

        case 2:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QvZTJlL3VpY2F0YWxvZy9leGVjdXRlLXNwZWNzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozt5QkFBa0IsZUFBZTs7Ozt1QkFDYixXQUFXOzs7O3dCQUNqQixVQUFVOzs7OzhCQUNZLG9CQUFvQjs7QUFFeEQsUUFBUSxDQUFDLHFCQUFxQixFQUFFLFlBQVk7OztBQUMxQyxNQUFJLE9BQU8sR0FBRyw0QkFBTSxJQUFJLHVCQUFVLENBQUM7QUFDbkMsTUFBSSxNQUFNLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQzs7QUFFNUIsSUFBRSxDQUFDLHFEQUFxRCxFQUFFO1FBQ3BELEdBQUc7Ozs7OzJDQUFTLE1BQU0sQ0FBQyxPQUFPLENBQUMsbURBQW1ELENBQUM7OztBQUEvRSxhQUFHOztBQUNQLGFBQUcsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxDQUFDOzs7Ozs7O0dBQ2xDLENBQUMsQ0FBQzs7QUFFSCxJQUFFLENBQUMsa0RBQWtELEVBQUU7Ozs7OzJDQUMvQyxzQkFBRSxPQUFPLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDLFNBQ2pELHFDQUFxQixDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsWUFBWSxDQUFDLGdCQUFnQixDQUFDOzs7Ozs7O0dBQ3ZFLENBQUMsQ0FBQzs7QUFFSCxJQUFFLENBQUMsNkJBQTZCLEVBQUU7Ozs7OzJDQUMxQixNQUFNLENBQUMsT0FBTyxDQUFDLHFCQUFxQixDQUFDOzs7Ozs7O0dBQzVDLENBQUMsQ0FBQztDQUVKLENBQUMsQ0FBQyIsImZpbGUiOiJ0ZXN0L2UyZS91aWNhdGFsb2cvZXhlY3V0ZS1zcGVjcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBzZXR1cCBmcm9tIFwiLi4vc2V0dXAtYmFzZVwiO1xuaW1wb3J0IGRlc2lyZWQgZnJvbSAnLi9kZXNpcmVkJztcbmltcG9ydCBCIGZyb20gJ2JsdWViaXJkJztcbmltcG9ydCB7IHRocm93TWF0Y2hhYmxlRXJyb3IgfSBmcm9tICcuLi9oZWxwZXJzL3JlY2lwZXMnO1xuXG5kZXNjcmliZSgndWljYXRhbG9nIC0gZXhlY3V0ZScsIGZ1bmN0aW9uICgpIHtcbiAgbGV0IHNlc3Npb24gPSBzZXR1cCh0aGlzLCBkZXNpcmVkKTtcbiAgbGV0IGRyaXZlciA9IHNlc3Npb24uZHJpdmVyO1xuXG4gIGl0KCdzaG91bGQgZG8gVUlBdXRvbWF0aW9uIGNvbW1hbmRzIGlmIG5vdCBpbiB3ZWIgZnJhbWUnLCBhc3luYyAoKSA9PiB7XG4gICAgbGV0IHJlcyA9IGF3YWl0IGRyaXZlci5leGVjdXRlKFwiVUlBVGFyZ2V0LmxvY2FsVGFyZ2V0KCkuZnJvbnRNb3N0QXBwKCkuYnVuZGxlSUQoKVwiKTtcbiAgICByZXMuc2hvdWxkLmluY2x1ZGUoXCIuVUlDYXRhbG9nXCIpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIG5vdCBmYWlsIGlmIFVJQXV0b21hdGlvbiBjb21tYW5kIGJsb3dzIHVwJywgYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IEIucmVzb2x2ZShkcml2ZXIuZXhlY3V0ZShcIlVJQVRhcmdldC5mb29iYXJibGFoKClcIikpXG4gICAgICAuY2F0Y2godGhyb3dNYXRjaGFibGVFcnJvcikuc2hvdWxkLmJlLnJlamVjdGVkV2l0aCgvanNvbndwQ29kZTogMTcvKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBub3QgZmFpbCB3aXRoIHF1b3RlcycsIGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCBkcml2ZXIuZXhlY3V0ZSgnJC5sb2coXFwnaGlcXFxcXFwnc1xcJyk7Jyk7XG4gIH0pO1xuXG59KTtcbiJdLCJzb3VyY2VSb290IjoiLi4vLi4vLi4vLi4ifQ==

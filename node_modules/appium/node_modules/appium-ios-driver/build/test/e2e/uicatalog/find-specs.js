'use strict';

var _regeneratorRuntime = require('babel-runtime/regenerator')['default'];

var _getIterator = require('babel-runtime/core-js/get-iterator')['default'];

var _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];

var _helpersEnv = require('../helpers/env');

var _helpersEnv2 = _interopRequireDefault(_helpersEnv);

var _setupBase = require("../setup-base");

var _setupBase2 = _interopRequireDefault(_setupBase);

var _desired = require('./desired');

var _desired2 = _interopRequireDefault(_desired);

var _bluebird = require('bluebird');

var _bluebird2 = _interopRequireDefault(_bluebird);

var _lodash = require('lodash');

var _lodash2 = _interopRequireDefault(_lodash);

var _helpersRecipes = require('../helpers/recipes');

var byUIA = '-ios uiautomation';

describe('uicatalog - find -', function () {
  var session = (0, _setupBase2['default'])(this, _desired2['default']);
  var driver = session.driver;

  describe('basics', function () {
    var _this = this;

    it('should find a single element by id', function callee$2$0() {
      var el;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(driver.findElement('id', 'Date Picker'));

          case 2:
            el = context$3$0.sent;

            el.should.exist;

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });

    it('should find a single element by id wrapped in array for multi', function callee$2$0() {
      var els;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(driver.findElements('id', 'Back'));

          case 2:
            els = context$3$0.sent;

            els.should.have.length(1);

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });

    it('should find a single element using elementByAccessibilityId', function callee$2$0() {
      var axId, el;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            axId = _helpersEnv2['default'].IOS8 || _helpersEnv2['default'].IOS9 ? 'AAPLImageViewController' : 'Image View, AAPLImageViewController';
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.findElement('accessibility id', axId));

          case 3:
            el = context$3$0.sent;

            el.should.exist;

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });

    it('should find an element within descendants', function callee$2$0() {
      var el1, el2;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(driver.findElement('xpath', "//UIATableCell[contains(@name, 'Buttons')]"));

          case 2:
            el1 = context$3$0.sent;

            el1.should.exist;
            context$3$0.next = 6;
            return _regeneratorRuntime.awrap(driver.findElementFromElement('class name', 'UIAStaticText', el1));

          case 6:
            el2 = context$3$0.sent;
            context$3$0.next = 9;
            return _regeneratorRuntime.awrap(driver.getAttribute('name', el2));

          case 9:
            context$3$0.sent.should.contain("Buttons");

          case 10:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });

    it('should not find an element not within itself', function callee$2$0() {
      var el1;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(driver.findElement('xpath', "//UIATableCell[contains(@name, 'Buttons')]"));

          case 2:
            el1 = context$3$0.sent;

            el1.should.exist;
            context$3$0.next = 6;
            return _regeneratorRuntime.awrap(_bluebird2['default'].resolve(driver.findElementFromElement('class name', 'UIANavigationBar', el1))['catch'](_helpersRecipes.throwMatchableError).should.be.rejectedWith(/jsonwpCode: 7/));

          case 6:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });

    it('should find some elements within itself', function callee$2$0() {
      var elLength, el1, els;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            elLength = _helpersEnv2['default'].IOS8 || _helpersEnv2['default'].IOS9 ? 2 : 1;
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.findElement('xpath', "//UIATableCell[contains(@name, 'Buttons')]"));

          case 3:
            el1 = context$3$0.sent;

            el1.should.exist;
            context$3$0.next = 7;
            return _regeneratorRuntime.awrap(driver.findElementsFromElement('class name', 'UIAStaticText', el1));

          case 7:
            els = context$3$0.sent;

            els.should.have.length(elLength);

          case 9:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });

    it('should not find elements not within itself', function callee$2$0() {
      var el1, els;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(driver.findElement('xpath', "//UIATableCell[contains(@name, 'Buttons')]"));

          case 2:
            el1 = context$3$0.sent;

            el1.should.exist;
            context$3$0.next = 6;
            return _regeneratorRuntime.awrap(driver.findElementsFromElement('class name', 'UIANavigationBar', el1));

          case 6:
            els = context$3$0.sent;

            els.should.have.length(0);

          case 8:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });

    describe('no mix up', function () {
      after(function callee$3$0() {
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              if (!(!_helpersEnv2['default'].IOS81 && !_helpersEnv2['default'].IOS82 && !_helpersEnv2['default'].IOS83 && !_helpersEnv2['default'].IOS84 && !_helpersEnv2['default'].IOS9)) {
                context$4$0.next = 3;
                break;
              }

              context$4$0.next = 3;
              return _regeneratorRuntime.awrap((0, _helpersRecipes.clickButton)(driver, 'UICatalog'));

            case 3:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this);
      });

      it('should not allow found elements to be mixed up', function callee$3$0() {
        var el1, el1Name, el2, el2Name;
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              context$4$0.next = 2;
              return _regeneratorRuntime.awrap(driver.findElement('class name', 'UIATableCell'));

            case 2:
              el1 = context$4$0.sent;
              context$4$0.next = 5;
              return _regeneratorRuntime.awrap(driver.getAttribute('name', el1));

            case 5:
              el1Name = context$4$0.sent;
              context$4$0.next = 8;
              return _regeneratorRuntime.awrap(driver.click(el1));

            case 8:
              context$4$0.next = 10;
              return _regeneratorRuntime.awrap(_bluebird2['default'].delay(1000));

            case 10:
              context$4$0.next = 12;
              return _regeneratorRuntime.awrap(driver.findElement('class name', 'UIATableCell'));

            case 12:
              el2 = context$4$0.sent;
              context$4$0.next = 15;
              return _regeneratorRuntime.awrap(driver.getAttribute('name', el2));

            case 15:
              el2Name = context$4$0.sent;

              el1.ELEMENT.should.not.equal(el2.ELEMENT);
              el1Name.should.not.equal(el2Name);

              // el1 is gone, so it doesn't have a name anymore
              context$4$0.next = 20;
              return _regeneratorRuntime.awrap(driver.getAttribute('name', el1));

            case 20:
              context$4$0.sent.should.equal("");

            case 21:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this);
      });
    });

    it('should return all image elements with internally generated ids', function callee$2$0() {
      var els, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, el;

      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(driver.findElements('class name', 'UIAImage'));

          case 2:
            els = context$3$0.sent;

            els.length.should.be.above(0);
            _iteratorNormalCompletion = true;
            _didIteratorError = false;
            _iteratorError = undefined;
            context$3$0.prev = 7;
            for (_iterator = _getIterator(els); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
              el = _step.value;

              el.should.exist;
            }
            context$3$0.next = 15;
            break;

          case 11:
            context$3$0.prev = 11;
            context$3$0.t0 = context$3$0['catch'](7);
            _didIteratorError = true;
            _iteratorError = context$3$0.t0;

          case 15:
            context$3$0.prev = 15;
            context$3$0.prev = 16;

            if (!_iteratorNormalCompletion && _iterator['return']) {
              _iterator['return']();
            }

          case 18:
            context$3$0.prev = 18;

            if (!_didIteratorError) {
              context$3$0.next = 21;
              break;
            }

            throw _iteratorError;

          case 21:
            return context$3$0.finish(18);

          case 22:
            return context$3$0.finish(15);

          case 23:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this, [[7, 11, 15, 23], [16,, 18, 22]]);
    });

    describe('findElementsByClassName textfield case', function () {
      after(function callee$3$0() {
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              if (!(!_helpersEnv2['default'].IOS81 && !_helpersEnv2['default'].IOS82 && !_helpersEnv2['default'].IOS83 && !_helpersEnv2['default'].IOS84 && !_helpersEnv2['default'].IOS9)) {
                context$4$0.next = 3;
                break;
              }

              context$4$0.next = 3;
              return _regeneratorRuntime.awrap((0, _helpersRecipes.clickButton)(driver, 'UICatalog'));

            case 3:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this);
      });
      var axIdExt = _helpersEnv2['default'].IOS8 || _helpersEnv2['default'].IOS9 ? '' : ', AAPLActionSheetViewController';
      it('should find only one textfield', function callee$3$0() {
        var el1, el2, els;
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              context$4$0.next = 2;
              return _regeneratorRuntime.awrap(driver.findElement('accessibility id', 'Action Sheets' + axIdExt));

            case 2:
              el1 = context$4$0.sent;
              context$4$0.next = 5;
              return _regeneratorRuntime.awrap(driver.click(el1));

            case 5:
              context$4$0.next = 7;
              return _regeneratorRuntime.awrap(driver.findElement('accessibility id', 'Okay / Cancel'));

            case 7:
              el2 = context$4$0.sent;
              context$4$0.next = 10;
              return _regeneratorRuntime.awrap(driver.findElementsFromElement('class name', 'UIAStaticText', el2));

            case 10:
              els = context$4$0.sent;

              els.should.have.length(1);

            case 12:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this);
      });
    });

    describe('findElement(s) containing accessibility id', function () {
      afterEach(function callee$3$0() {
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              context$4$0.next = 2;
              return _regeneratorRuntime.awrap((0, _helpersRecipes.clickButton)(driver, 'UICatalog'));

            case 2:
              context$4$0.next = 4;
              return _regeneratorRuntime.awrap(_bluebird2['default'].delay(1000));

            case 4:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this);
      });

      var axIdExt = _helpersEnv2['default'].IOS8 || _helpersEnv2['default'].IOS9 ? '' : ', AAPLActionSheetViewController';
      it('should find one element', function callee$3$0() {
        var el1, el2;
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              context$4$0.next = 2;
              return _regeneratorRuntime.awrap(driver.findElement('accessibility id', 'Action Sheets' + axIdExt));

            case 2:
              el1 = context$4$0.sent;
              context$4$0.next = 5;
              return _regeneratorRuntime.awrap(driver.click(el1));

            case 5:
              context$4$0.next = 7;
              return _regeneratorRuntime.awrap(driver.findElement('accessibility id', 'Okay / Cancel'));

            case 7:
              el2 = context$4$0.sent;
              context$4$0.next = 10;
              return _regeneratorRuntime.awrap(driver.getAttribute('name', el2));

            case 10:
              context$4$0.sent.should.equal('Okay / Cancel');

            case 11:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this);
      });

      it('should find several elements', function callee$3$0() {
        var el1, el2;
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              context$4$0.next = 2;
              return _regeneratorRuntime.awrap(driver.findElement('accessibility id', 'Action Sheets' + axIdExt));

            case 2:
              el1 = context$4$0.sent;
              context$4$0.next = 5;
              return _regeneratorRuntime.awrap(driver.click(el1));

            case 5:
              context$4$0.next = 7;
              return _regeneratorRuntime.awrap(driver.findElements('accessibility id', 'Okay / Cancel'));

            case 7:
              el2 = context$4$0.sent;

              el2.should.have.length(2);

            case 9:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this);
      });
    });

    describe('duplicate text field', function () {
      beforeEach(function callee$3$0() {
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              context$4$0.prev = 0;
              context$4$0.next = 3;
              return _regeneratorRuntime.awrap(driver.execute("mobile: scroll", { direction: 'down' }));

            case 3:
              context$4$0.next = 7;
              break;

            case 5:
              context$4$0.prev = 5;
              context$4$0.t0 = context$4$0['catch'](0);

            case 7:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this, [[0, 5]]);
      });

      afterEach(function callee$3$0() {
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              context$4$0.next = 2;
              return _regeneratorRuntime.awrap((0, _helpersRecipes.clickButton)(driver, 'UICatalog'));

            case 2:
              context$4$0.next = 4;
              return _regeneratorRuntime.awrap(_bluebird2['default'].delay(1000));

            case 4:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this);
      });

      var axIdExt = _helpersEnv2['default'].IOS8 || _helpersEnv2['default'].IOS9 ? '' : ', AAPLTextFieldViewController';

      it('should find only one element per text field', function callee$3$0() {
        var el1, els;
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              context$4$0.next = 2;
              return _regeneratorRuntime.awrap(driver.findElement('accessibility id', 'Text Fields' + axIdExt));

            case 2:
              el1 = context$4$0.sent;
              context$4$0.next = 5;
              return _regeneratorRuntime.awrap(driver.click(el1));

            case 5:
              _bluebird2['default'].delay(2000);
              context$4$0.next = 8;
              return _regeneratorRuntime.awrap(driver.findElements('class name', 'UIATextField'));

            case 8:
              els = context$4$0.sent;

              els.should.have.length(4);

            case 10:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this);
      });

      it('should find only one element per secure text field', function callee$3$0() {
        var el1, els;
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              context$4$0.next = 2;
              return _regeneratorRuntime.awrap(driver.findElement('accessibility id', 'Text Fields' + axIdExt));

            case 2:
              el1 = context$4$0.sent;
              context$4$0.next = 5;
              return _regeneratorRuntime.awrap(driver.click(el1));

            case 5:
              _bluebird2['default'].delay(2000);
              context$4$0.next = 8;
              return _regeneratorRuntime.awrap(driver.findElements('class name', 'UIASecureTextField'));

            case 8:
              els = context$4$0.sent;

              els.should.have.length(1);

            case 10:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this);
      });
    });
  });

  describe('by accessibility id', function () {
    var _this2 = this;

    afterEach(function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap((0, _helpersRecipes.clickButton)(driver, 'UICatalog'));

          case 2:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this2);
    });

    it('should find an element by name beneath another element', function callee$2$0() {
      var axIdExt, el, el2;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            axIdExt = _helpersEnv2['default'].IOS8 || _helpersEnv2['default'].IOS9 ? '' : ', AAPLActionSheetViewController';
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.findElement('accessibility id', "UICatalog"));

          case 3:
            el = context$3$0.sent;
            context$3$0.next = 6;
            return _regeneratorRuntime.awrap(driver.click(el));

          case 6:
            context$3$0.next = 8;
            return _regeneratorRuntime.awrap(driver.findElement('accessibility id', 'Action Sheets' + axIdExt));

          case 8:
            el2 = context$3$0.sent;

            el2.should.exist;

          case 10:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this2);
    });
  });

  describe('by ui automation', function () {
    var _this3 = this;

    before(function callee$2$0() {
      var el;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(driver.findElement(byUIA, '.navigationBars()[0]'));

          case 2:
            el = context$3$0.sent;
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(driver.getAttribute('name', el));

          case 5:
            context$3$0.t0 = context$3$0.sent;

            if (!(context$3$0.t0 !== 'UICatalog')) {
              context$3$0.next = 9;
              break;
            }

            context$3$0.next = 9;
            return _regeneratorRuntime.awrap((0, _helpersRecipes.clickButton)(driver, 'UICatalog'));

          case 9:
            context$3$0.next = 11;
            return _regeneratorRuntime.awrap(_bluebird2['default'].delay(500));

          case 11:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this3);
    });

    it('should process most basic UIAutomation query', function callee$2$0() {
      var els, displayedEls;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(driver.findElements(byUIA, '.elements()'));

          case 2:
            els = context$3$0.sent;
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap((0, _helpersRecipes.filterDisplayed)(driver, els));

          case 5:
            displayedEls = context$3$0.sent;

            displayedEls.should.have.length(2);

          case 7:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this3);
    });

    it('should use raw selector code if selector does not start with a dot', function callee$2$0() {
      var els, displayedEls;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(driver.findElements(byUIA, '$.mainWindow().elements()'));

          case 2:
            els = context$3$0.sent;
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap((0, _helpersRecipes.filterDisplayed)(driver, els));

          case 5:
            displayedEls = context$3$0.sent;

            displayedEls.should.have.length(2);

          case 7:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this3);
    });

    it('should get a single element', function callee$2$0() {
      var el;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(driver.findElement(byUIA, '.elements()[0]'));

          case 2:
            el = context$3$0.sent;
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(driver.getAttribute('name', el));

          case 5:
            context$3$0.sent.should.equal('UICatalog');

          case 6:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this3);
    });

    it('should get a single element with non-zero index', function callee$2$0() {
      var name, el;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            name = _helpersEnv2['default'].IOS8 || _helpersEnv2['default'].IOS9 ? '' : 'Empty list';
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.findElement(byUIA, '.elements()[1]'));

          case 3:
            el = context$3$0.sent;
            context$3$0.next = 6;
            return _regeneratorRuntime.awrap(driver.getAttribute('name', el));

          case 6:
            context$3$0.t0 = name;
            context$3$0.sent.should.equal(context$3$0.t0);

          case 8:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this3);
    });

    it('should get single element as array', function callee$2$0() {
      var els;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(driver.findElements(byUIA, '.tableViews()[0]'));

          case 2:
            els = context$3$0.sent;

            els.should.have.length(1);

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this3);
    });

    it('should find elements by index multiple times', function callee$2$0() {
      var el;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(driver.findElement(byUIA, '.elements()[1].cells()[2]'));

          case 2:
            el = context$3$0.sent;
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(driver.getAttribute('name', el));

          case 5:
            context$3$0.sent.should.include('Alert Views');

          case 6:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this3);
    });

    it('should find element by name', function callee$2$0() {
      var el;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(driver.findElement(byUIA, '.elements()["UICatalog"]'));

          case 2:
            el = context$3$0.sent;
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(driver.getAttribute('name', el));

          case 5:
            context$3$0.sent.should.equal('UICatalog');

          case 6:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this3);
    });

    it('should find element by type and index', function callee$2$0() {
      var el;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(driver.findElement(byUIA, '.navigationBar().elements()[1]'));

          case 2:
            el = context$3$0.sent;
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(driver.getAttribute('name', el));

          case 5:
            context$3$0.sent.should.equal('Back');

          case 6:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this3);
    });

    describe('start from a given context instead of root target', function () {
      var _this4 = this;

      it('should process a simple query', function callee$3$0() {
        var el, els;
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              context$4$0.next = 2;
              return _regeneratorRuntime.awrap(driver.findElement(byUIA, '.elements()[1]'));

            case 2:
              el = context$4$0.sent;
              context$4$0.next = 5;
              return _regeneratorRuntime.awrap(driver.findElementsFromElement(byUIA, (0, _helpersRecipes.filterVisibleUiaSelector)('.elements();'), el));

            case 5:
              els = context$4$0.sent;

              els.should.have.length.at.least(10);

            case 7:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this4);
      });

      it('should find element by name', function callee$3$0() {
        var axIdExt, el1, el2;
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              axIdExt = _helpersEnv2['default'].IOS8 || _helpersEnv2['default'].IOS9 ? "" : ", AAPLButtonViewController";
              context$4$0.next = 3;
              return _regeneratorRuntime.awrap(driver.findElement(byUIA, '.elements()[1]'));

            case 3:
              el1 = context$4$0.sent;
              context$4$0.next = 6;
              return _regeneratorRuntime.awrap(driver.findElementFromElement(byUIA, '.elements()["Buttons' + axIdExt + '"]', el1));

            case 6:
              el2 = context$4$0.sent;

              el2.should.exist;

            case 8:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this4);
      });
    });
  });

  describe('by xpath', function () {
    describe('individual calls', function () {
      var _this5 = this;

      before(function callee$3$0() {
        var el;
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              context$4$0.prev = 0;
              context$4$0.next = 3;
              return _regeneratorRuntime.awrap(driver.findElement(byUIA, '.navigationBar().elements()[1]'));

            case 3:
              el = context$4$0.sent;
              context$4$0.next = 6;
              return _regeneratorRuntime.awrap(driver.click(el));

            case 6:
              context$4$0.next = 10;
              break;

            case 8:
              context$4$0.prev = 8;
              context$4$0.t0 = context$4$0['catch'](0);

            case 10:
              context$4$0.prev = 10;
              context$4$0.next = 13;
              return _regeneratorRuntime.awrap(driver.execute("mobile: scroll", { direction: 'up' }));

            case 13:
              context$4$0.next = 17;
              break;

            case 15:
              context$4$0.prev = 15;
              context$4$0.t1 = context$4$0['catch'](10);

            case 17:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this5, [[0, 8], [10, 15]]);
      });
      beforeEach(function callee$3$0() {
        var el;
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              context$4$0.next = 2;
              return _regeneratorRuntime.awrap(driver.findElement('xpath', "//UIAStaticText[contains(@label,'Buttons')]"));

            case 2:
              el = context$4$0.sent;
              context$4$0.next = 5;
              return _regeneratorRuntime.awrap(driver.click(el));

            case 5:
            case 'end':
              return context$4$0.stop();
          }
        }, null, this);
      });
      afterEach(function callee$3$0() {
        var el;
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              context$4$0.next = 2;
              return _regeneratorRuntime.awrap(driver.findElement(byUIA, '.navigationBar().elements()[1]'));

            case 2:
              el = context$4$0.sent;
              context$4$0.next = 5;
              return _regeneratorRuntime.awrap(driver.click(el));

            case 5:
            case 'end':
              return context$4$0.stop();
          }
        }, null, this);
      });

      it('should respect implicit wait', function callee$3$0() {
        var begin, end;
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              context$4$0.next = 2;
              return _regeneratorRuntime.awrap(driver.implicitWait(5000));

            case 2:
              begin = Date.now();
              context$4$0.next = 5;
              return _regeneratorRuntime.awrap(driver.findElement('xpath', "//something_not_there").should.eventually.be.rejected);

            case 5:
              end = Date.now();

              (end - begin).should.be.above(5000);

            case 7:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this5);
      });

      it('should return the last button', function callee$3$0() {
        var el;
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              context$4$0.next = 2;
              return _regeneratorRuntime.awrap(driver.findElement('xpath', "//UIAButton[last()]"));

            case 2:
              el = context$4$0.sent;
              context$4$0.next = 5;
              return _regeneratorRuntime.awrap(driver.getText(el));

            case 5:
              context$4$0.sent.should.equal("Button");

            case 6:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this5);
      });

      // this is the name of the last button
      it('should return a single element', function callee$3$0() {
        var el;
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              context$4$0.next = 2;
              return _regeneratorRuntime.awrap(driver.findElement('xpath', "//UIAButton"));

            case 2:
              el = context$4$0.sent;
              context$4$0.next = 5;
              return _regeneratorRuntime.awrap(driver.getText(el));

            case 5:
              context$4$0.sent.should.equal("UICatalog");

            case 6:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this5);
      });

      it('should return multiple elements', function callee$3$0() {
        var els;
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              context$4$0.next = 2;
              return _regeneratorRuntime.awrap(driver.findElements('xpath', "//UIAButton"));

            case 2:
              els = context$4$0.sent;

              els.should.have.length.above(5);

            case 4:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this5);
      });

      it('should filter by name', function callee$3$0() {
        var el;
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              context$4$0.next = 2;
              return _regeneratorRuntime.awrap(driver.findElement('xpath', "//UIAButton[@name='X Button']"));

            case 2:
              el = context$4$0.sent;
              context$4$0.next = 5;
              return _regeneratorRuntime.awrap(driver.getText(el));

            case 5:
              context$4$0.sent.should.equal("X Button");

            case 6:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this5);
      });

      it('should know how to restrict root-level elements', function callee$3$0() {
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              context$4$0.next = 2;
              return _regeneratorRuntime.awrap(_bluebird2['default'].resolve(driver.findElement('xpath', "/UIAButton"))['catch'](_helpersRecipes.throwMatchableError).should.be.rejectedWith(/jsonwpCode: 7/));

            case 2:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this5);
      });

      it('should search an extended path by child', function callee$3$0() {
        var el;
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              context$4$0.next = 2;
              return _regeneratorRuntime.awrap(driver.findElement('xpath', "//UIANavigationBar/UIAStaticText"));

            case 2:
              el = context$4$0.sent;
              context$4$0.next = 5;
              return _regeneratorRuntime.awrap(driver.getText(el));

            case 5:
              context$4$0.sent.should.equal('Buttons');

            case 6:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this5);
      });

      it('should search an extended path by descendant', function callee$3$0() {
        var els, texts;
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              context$4$0.next = 2;
              return _regeneratorRuntime.awrap(driver.findElements('xpath', "//UIATableCell//UIAButton"));

            case 2:
              els = context$4$0.sent;
              context$4$0.next = 5;
              return _regeneratorRuntime.awrap(_bluebird2['default'].all(_lodash2['default'].map(els, function (el) {
                return driver.getText(el);
              })));

            case 5:
              texts = context$4$0.sent;

              texts.should.not.include("UICatalog");
              texts.should.include("X Button");

            case 8:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this5);
      });

      it('should filter by indices', function callee$3$0() {
        var el;
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              context$4$0.next = 2;
              return _regeneratorRuntime.awrap(driver.implicitWait(10000));

            case 2:
              context$4$0.next = 4;
              return _regeneratorRuntime.awrap(driver.findElement('xpath', "//UIATableCell[4]/UIAButton[1]"));

            case 4:
              el = context$4$0.sent;
              context$4$0.next = 7;
              return _regeneratorRuntime.awrap(driver.getAttribute('name', el));

            case 7:
              context$4$0.sent.should.equal('X Button');

            case 8:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this5);
      });

      it('should filter by partial text', function callee$3$0() {
        var el;
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              context$4$0.next = 2;
              return _regeneratorRuntime.awrap(driver.findElement('xpath', "//UIATableCell//UIAButton[contains(@name, 'X ')]"));

            case 2:
              el = context$4$0.sent;
              context$4$0.next = 5;
              return _regeneratorRuntime.awrap(driver.getText(el));

            case 5:
              context$4$0.sent.should.equal("X Button");

            case 6:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this5);
      });

      it('should find an element within itself', function callee$3$0() {
        var e1, e2;
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              context$4$0.next = 2;
              return _regeneratorRuntime.awrap(driver.findElement('xpath', "//UIATableCell[@name='X Button']"));

            case 2:
              e1 = context$4$0.sent;
              context$4$0.next = 5;
              return _regeneratorRuntime.awrap(driver.findElementFromElement('xpath', "//UIAButton[1]", e1));

            case 5:
              e2 = context$4$0.sent;
              context$4$0.next = 8;
              return _regeneratorRuntime.awrap(driver.getText(e2));

            case 8:
              context$4$0.sent.should.equal("X Button");

            case 9:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this5);
      });
    });

    describe('duplicate text field', function () {
      var _this6 = this;

      beforeEach(function callee$3$0() {
        var el;
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              context$4$0.next = 2;
              return _regeneratorRuntime.awrap(driver.findElement('accessibility id', 'Text Fields'));

            case 2:
              el = context$4$0.sent;
              context$4$0.next = 5;
              return _regeneratorRuntime.awrap(driver.click(el));

            case 5:
              context$4$0.next = 7;
              return _regeneratorRuntime.awrap(_bluebird2['default'].delay(2000));

            case 7:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this6);
      });

      afterEach(function callee$3$0() {
        var el;
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              context$4$0.next = 2;
              return _regeneratorRuntime.awrap(driver.findElement('accessibility id', 'UICatalog'));

            case 2:
              el = context$4$0.sent;
              context$4$0.next = 5;
              return _regeneratorRuntime.awrap(driver.click(el));

            case 5:
              context$4$0.next = 7;
              return _regeneratorRuntime.awrap(_bluebird2['default'].delay(1000));

            case 7:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this6);
      });

      it('should find only one text field', function callee$3$0() {
        var els;
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              context$4$0.next = 2;
              return _regeneratorRuntime.awrap(driver.findElements('xpath', '//UIATableView["Empty list"]/UIATableCell[1]/UIATextField'));

            case 2:
              els = context$4$0.sent;

              els.should.have.length(1);

            case 4:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this6);
      });

      it('should find only one text field when doing relative search', function callee$3$0() {
        var el2, els;
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              context$4$0.next = 2;
              return _regeneratorRuntime.awrap(driver.findElement('xpath', '//UIATableView["Empty list"]'));

            case 2:
              el2 = context$4$0.sent;
              context$4$0.next = 5;
              return _regeneratorRuntime.awrap(driver.findElementsFromElement('xpath', '//UIATableCell[1]/UIATextField', el2));

            case 5:
              els = context$4$0.sent;

              els.should.have.length(1);

            case 7:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this6);
      });

      it('should find only one secure text field', function callee$3$0() {
        var els;
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              context$4$0.next = 2;
              return _regeneratorRuntime.awrap(driver.findElements('xpath', '//UIATableView["Empty list"]/UIATableCell[3]/UIASecureTextField'));

            case 2:
              els = context$4$0.sent;

              els.should.have.length(1);

            case 4:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this6);
      });
    });

    describe('multiple calls', function () {
      var runs = 5;

      var test = function test(path, minLength) {
        return function () {
          var _this7 = this;

          it('should not crash', function callee$5$0() {
            var els;
            return _regeneratorRuntime.async(function callee$5$0$(context$6$0) {
              while (1) switch (context$6$0.prev = context$6$0.next) {
                case 0:
                  context$6$0.next = 2;
                  return _regeneratorRuntime.awrap(driver.findElements('xpath', path));

                case 2:
                  els = context$6$0.sent;

                  els.should.have.length.above(minLength);

                case 4:
                case 'end':
                  return context$6$0.stop();
              }
            }, null, _this7);
          });
        };
      };

      describe('finding specific path', function () {
        for (var n = 0; n < runs; n++) {
          describe('test ' + (n + 1), test("//UIAApplication[1]/UIAWindow/UIATableView/UIATableCell", 17));
        }
      });

      describe('finding //*', function () {
        for (var n = 0; n < runs; n++) {
          describe('test ' + (n + 1), test("//*", 52));
        }
      });
    });
  });
});

// before anything, try to go back

// and make sure we are at the top of the page

// go into the right page

// go back
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QvZTJlL3VpY2F0YWxvZy9maW5kLXNwZWNzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OzBCQUFnQixnQkFBZ0I7Ozs7eUJBQ2QsZUFBZTs7Ozt1QkFDYixXQUFXOzs7O3dCQUNqQixVQUFVOzs7O3NCQUNWLFFBQVE7Ozs7OEJBRW1CLG9CQUFvQjs7QUFHN0QsSUFBTSxLQUFLLEdBQUcsbUJBQW1CLENBQUM7O0FBRWxDLFFBQVEsQ0FBQyxvQkFBb0IsRUFBRSxZQUFZO0FBQ3pDLE1BQUksT0FBTyxHQUFHLDRCQUFNLElBQUksdUJBQVUsQ0FBQztBQUNuQyxNQUFJLE1BQU0sR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDOztBQUU1QixVQUFRLENBQUMsUUFBUSxFQUFFLFlBQVk7OztBQUM3QixNQUFFLENBQUMsb0NBQW9DLEVBQUU7VUFDbkMsRUFBRTs7Ozs7NkNBQVMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxJQUFJLEVBQUUsYUFBYSxDQUFDOzs7QUFBbEQsY0FBRTs7QUFDTixjQUFFLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQzs7Ozs7OztLQUNqQixDQUFDLENBQUM7O0FBRUgsTUFBRSxDQUFDLCtEQUErRCxFQUFFO1VBQzlELEdBQUc7Ozs7OzZDQUFTLE1BQU0sQ0FBQyxZQUFZLENBQUMsSUFBSSxFQUFFLE1BQU0sQ0FBQzs7O0FBQTdDLGVBQUc7O0FBQ1AsZUFBRyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDOzs7Ozs7O0tBQzNCLENBQUMsQ0FBQzs7QUFFSCxNQUFFLENBQUMsNkRBQTZELEVBQUU7VUFDNUQsSUFBSSxFQUVKLEVBQUU7Ozs7QUFGRixnQkFBSSxHQUFHLEFBQUMsd0JBQUksSUFBSSxJQUFJLHdCQUFJLElBQUksR0FBSSx5QkFBeUIsR0FDekIscUNBQXFDOzs2Q0FDMUQsTUFBTSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsRUFBRSxJQUFJLENBQUM7OztBQUF2RCxjQUFFOztB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QUUsQ0FBQyxDQUFDLENBQUM7U0FDNUM7T0FDRixDQUFDLENBQUM7S0FDSixDQUFDLENBQUM7R0FDSixDQUFDLENBQUM7Q0FDSixDQUFDLENBQUMiLCJmaWxlIjoidGVzdC9lMmUvdWljYXRhbG9nL2ZpbmQtc3BlY3MuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZW52IGZyb20gJy4uL2hlbHBlcnMvZW52JztcbmltcG9ydCBzZXR1cCBmcm9tIFwiLi4vc2V0dXAtYmFzZVwiO1xuaW1wb3J0IGRlc2lyZWQgZnJvbSAnLi9kZXNpcmVkJztcbmltcG9ydCBCIGZyb20gJ2JsdWViaXJkJztcbmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgeyBjbGlja0J1dHRvbiwgdGhyb3dNYXRjaGFibGVFcnJvciwgZmlsdGVyRGlzcGxheWVkLFxuICAgICAgICAgZmlsdGVyVmlzaWJsZVVpYVNlbGVjdG9yIH0gZnJvbSAnLi4vaGVscGVycy9yZWNpcGVzJztcblxuXG5jb25zdCBieVVJQSA9ICctaW9zIHVpYXV0b21hdGlvbic7XG5cbmRlc2NyaWJlKCd1aWNhdGFsb2cgLSBmaW5kIC0nLCBmdW5jdGlvbiAoKSB7XG4gIGxldCBzZXNzaW9uID0gc2V0dXAodGhpcywgZGVzaXJlZCk7XG4gIGxldCBkcml2ZXIgPSBzZXNzaW9uLmRyaXZlcjtcblxuICBkZXNjcmliZSgnYmFzaWNzJywgZnVuY3Rpb24gKCkge1xuICAgIGl0KCdzaG91bGQgZmluZCBhIHNpbmdsZSBlbGVtZW50IGJ5IGlkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbGV0IGVsID0gYXdhaXQgZHJpdmVyLmZpbmRFbGVtZW50KCdpZCcsICdEYXRlIFBpY2tlcicpO1xuICAgICAgZWwuc2hvdWxkLmV4aXN0O1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBmaW5kIGEgc2luZ2xlIGVsZW1lbnQgYnkgaWQgd3JhcHBlZCBpbiBhcnJheSBmb3IgbXVsdGknLCBhc3luYyAoKSA9PiB7XG4gICAgICBsZXQgZWxzID0gYXdhaXQgZHJpdmVyLmZpbmRFbGVtZW50cygnaWQnLCAnQmFjaycpO1xuICAgICAgZWxzLnNob3VsZC5oYXZlLmxlbmd0aCgxKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZmluZCBhIHNpbmdsZSBlbGVtZW50IHVzaW5nIGVsZW1lbnRCeUFjY2Vzc2liaWxpdHlJZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGxldCBheElkID0gKGVudi5JT1M4IHx8IGVudi5JT1M5KSA/ICdBQVBMSW1hZ2VWaWV3Q29udHJvbGxlcicgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0ltYWdlIFZpZXcsIEFBUExJbWFnZVZpZXdDb250cm9sbGVyJztcbiAgICAgIGxldCBlbCA9IGF3YWl0IGRyaXZlci5maW5kRWxlbWVudCgnYWNjZXNzaWJpbGl0eSBpZCcsIGF4SWQpO1xuICAgICAgZWwuc2hvdWxkLmV4aXN0O1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBmaW5kIGFuIGVsZW1lbnQgd2l0aGluIGRlc2NlbmRhbnRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbGV0IGVsMSA9IGF3YWl0IGRyaXZlci5maW5kRWxlbWVudCgneHBhdGgnLCBcIi8vVUlBVGFibGVDZWxsW2NvbnRhaW5zKEBuYW1lLCAnQnV0dG9ucycpXVwiKTtcbiAgICAgIGVsMS5zaG91bGQuZXhpc3Q7XG4gICAgICBsZXQgZWwyID0gYXdhaXQgZHJpdmVyLmZpbmRFbGVtZW50RnJvbUVsZW1lbnQoJ2NsYXNzIG5hbWUnLCAnVUlBU3RhdGljVGV4dCcsIGVsMSk7XG4gICAgICAoYXdhaXQgZHJpdmVyLmdldEF0dHJpYnV0ZSgnbmFtZScsIGVsMikpLnNob3VsZC5jb250YWluKFwiQnV0dG9uc1wiKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbm90IGZpbmQgYW4gZWxlbWVudCBub3Qgd2l0aGluIGl0c2VsZicsIGFzeW5jICgpID0+IHtcbiAgICAgIGxldCBlbDEgPSBhd2FpdCBkcml2ZXIuZmluZEVsZW1lbnQoJ3hwYXRoJywgXCIvL1VJQVRhYmxlQ2VsbFtjb250YWlucyhAbmFtZSwgJ0J1dHRvbnMnKV1cIik7XG4gICAgICBlbDEuc2hvdWxkLmV4aXN0O1xuICAgICAgYXdhaXQgQi5yZXNvbHZlKGRyaXZlci5maW5kRWxlbWVudEZyb21FbGVtZW50KCdjbGFzcyBuYW1lJywgJ1VJQU5hdmlnYXRpb25CYXInLCBlbDEpKVxuICAgICAgICAuY2F0Y2godGhyb3dNYXRjaGFibGVFcnJvcilcbiAgICAgICAgLnNob3VsZC5iZS5yZWplY3RlZFdpdGgoL2pzb253cENvZGU6IDcvKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZmluZCBzb21lIGVsZW1lbnRzIHdpdGhpbiBpdHNlbGYnLCBhc3luYyAoKSA9PiB7XG4gICAgICBsZXQgZWxMZW5ndGggPSAoZW52LklPUzggfHwgZW52LklPUzkpID8gMiA6IDE7XG4gICAgICBsZXQgZWwxID0gYXdhaXQgZHJpdmVyLmZpbmRFbGVtZW50KCd4cGF0aCcsIFwiLy9VSUFUYWJsZUNlbGxbY29udGFpbnMoQG5hbWUsICdCdXR0b25zJyldXCIpO1xuICAgICAgZWwxLnNob3VsZC5leGlzdDtcbiAgICAgIGxldCBlbHMgPSBhd2FpdCBkcml2ZXIuZmluZEVsZW1lbnRzRnJvbUVsZW1lbnQoJ2NsYXNzIG5hbWUnLCAnVUlBU3RhdGljVGV4dCcsIGVsMSk7XG4gICAgICBlbHMuc2hvdWxkLmhhdmUubGVuZ3RoKGVsTGVuZ3RoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbm90IGZpbmQgZWxlbWVudHMgbm90IHdpdGhpbiBpdHNlbGYnLCBhc3luYyAoKSA9PiB7XG4gICAgICBsZXQgZWwxID0gYXdhaXQgZHJpdmVyLmZpbmRFbGVtZW50KCd4cGF0aCcsIFwiLy9VSUFUYWJsZUNlbGxbY29udGFpbnMoQG5hbWUsICdCdXR0b25zJyldXCIpO1xuICAgICAgZWwxLnNob3VsZC5leGlzdDtcbiAgICAgIGxldCBlbHMgPSBhd2FpdCBkcml2ZXIuZmluZEVsZW1lbnRzRnJvbUVsZW1lbnQoJ2NsYXNzIG5hbWUnLCAnVUlBTmF2aWdhdGlvbkJhcicsIGVsMSk7XG4gICAgICBlbHMuc2hvdWxkLmhhdmUubGVuZ3RoKDApO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ25vIG1peCB1cCcsICgpID0+IHtcbiAgICAgIGFmdGVyKGFzeW5jKCkgPT4ge1xuICAgICAgICBpZiAoIWVudi5JT1M4MSAmJiAhZW52LklPUzgyICYmICFlbnYuSU9TODMgJiYgIWVudi5JT1M4NCAmJiAhZW52LklPUzkpIHtcbiAgICAgICAgICBhd2FpdCBjbGlja0J1dHRvbihkcml2ZXIsICdVSUNhdGFsb2cnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgbm90IGFsbG93IGZvdW5kIGVsZW1lbnRzIHRvIGJlIG1peGVkIHVwJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBsZXQgZWwxID0gYXdhaXQgZHJpdmVyLmZpbmRFbGVtZW50KCdjbGFzcyBuYW1lJywgJ1VJQVRhYmxlQ2VsbCcpO1xuICAgICAgICBsZXQgZWwxTmFtZSA9IGF3YWl0IGRyaXZlci5nZXRBdHRyaWJ1dGUoJ25hbWUnLCBlbDEpO1xuICAgICAgICBhd2FpdCBkcml2ZXIuY2xpY2soZWwxKTtcbiAgICAgICAgYXdhaXQgQi5kZWxheSgxMDAwKTtcblxuICAgICAgICBsZXQgZWwyID0gYXdhaXQgZHJpdmVyLmZpbmRFbGVtZW50KCdjbGFzcyBuYW1lJywgJ1VJQVRhYmxlQ2VsbCcpO1xuICAgICAgICBsZXQgZWwyTmFtZSA9IGF3YWl0IGRyaXZlci5nZXRBdHRyaWJ1dGUoJ25hbWUnLCBlbDIpO1xuICAgICAgICBlbDEuRUxFTUVOVC5zaG91bGQubm90LmVxdWFsKGVsMi5FTEVNRU5UKTtcbiAgICAgICAgZWwxTmFtZS5zaG91bGQubm90LmVxdWFsKGVsMk5hbWUpO1xuXG4gICAgICAgIC8vIGVsMSBpcyBnb25lLCBzbyBpdCBkb2Vzbid0IGhhdmUgYSBuYW1lIGFueW1vcmVcbiAgICAgICAgKGF3YWl0IGRyaXZlci5nZXRBdHRyaWJ1dGUoJ25hbWUnLCBlbDEpKS5zaG91bGQuZXF1YWwoXCJcIik7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGFsbCBpbWFnZSBlbGVtZW50cyB3aXRoIGludGVybmFsbHkgZ2VuZXJhdGVkIGlkcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGxldCBlbHMgPSBhd2FpdCBkcml2ZXIuZmluZEVsZW1lbnRzKCdjbGFzcyBuYW1lJywgJ1VJQUltYWdlJyk7XG4gICAgICBlbHMubGVuZ3RoLnNob3VsZC5iZS5hYm92ZSgwKTtcbiAgICAgIGZvciAobGV0IGVsIG9mIGVscykge1xuICAgICAgICBlbC5zaG91bGQuZXhpc3Q7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnZmluZEVsZW1lbnRzQnlDbGFzc05hbWUgdGV4dGZpZWxkIGNhc2UnLCAoKSA9PiB7XG4gICAgICBhZnRlcihhc3luYyAoKSA9PiB7XG4gICAgICAgIGlmICghZW52LklPUzgxICYmICFlbnYuSU9TODIgJiYgIWVudi5JT1M4MyAmJiAhZW52LklPUzg0ICYmICFlbnYuSU9TOSkge1xuICAgICAgICAgIGF3YWl0IGNsaWNrQnV0dG9uKGRyaXZlciwgJ1VJQ2F0YWxvZycpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGxldCBheElkRXh0ID0gKGVudi5JT1M4IHx8IGVudi5JT1M5KSA/ICcnIDogJywgQUFQTEFjdGlvblNoZWV0Vmlld0NvbnRyb2xsZXInO1xuICAgICAgaXQoJ3Nob3VsZCBmaW5kIG9ubHkgb25lIHRleHRmaWVsZCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgbGV0IGVsMSA9IGF3YWl0IGRyaXZlci5maW5kRWxlbWVudCgnYWNjZXNzaWJpbGl0eSBpZCcsIGBBY3Rpb24gU2hlZXRzJHtheElkRXh0fWApO1xuICAgICAgICBhd2FpdCBkcml2ZXIuY2xpY2soZWwxKTtcbiAgICAgICAgbGV0IGVsMiA9IGF3YWl0IGRyaXZlci5maW5kRWxlbWVudCgnYWNjZXNzaWJpbGl0eSBpZCcsICdPa2F5IC8gQ2FuY2VsJyk7XG4gICAgICAgIGxldCBlbHMgPSBhd2FpdCBkcml2ZXIuZmluZEVsZW1lbnRzRnJvbUVsZW1lbnQoJ2NsYXNzIG5hbWUnLCAnVUlBU3RhdGljVGV4dCcsIGVsMik7XG4gICAgICAgIGVscy5zaG91bGQuaGF2ZS5sZW5ndGgoMSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdmaW5kRWxlbWVudChzKSBjb250YWluaW5nIGFjY2Vzc2liaWxpdHkgaWQnLCAoKSA9PiB7XG4gICAgICBhZnRlckVhY2goYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCBjbGlja0J1dHRvbihkcml2ZXIsICdVSUNhdGFsb2cnKTtcbiAgICAgICAgYXdhaXQgQi5kZWxheSgxMDAwKTtcbiAgICAgIH0pO1xuXG4gICAgICBsZXQgYXhJZEV4dCA9IChlbnYuSU9TOCB8fCBlbnYuSU9TOSkgPyAnJyA6ICcsIEFBUExBY3Rpb25TaGVldFZpZXdDb250cm9sbGVyJztcbiAgICAgIGl0KCdzaG91bGQgZmluZCBvbmUgZWxlbWVudCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgbGV0IGVsMSA9IGF3YWl0IGRyaXZlci5maW5kRWxlbWVudCgnYWNjZXNzaWJpbGl0eSBpZCcsIGBBY3Rpb24gU2hlZXRzJHtheElkRXh0fWApO1xuICAgICAgICBhd2FpdCBkcml2ZXIuY2xpY2soZWwxKTtcbiAgICAgICAgbGV0IGVsMiA9IGF3YWl0IGRyaXZlci5maW5kRWxlbWVudCgnYWNjZXNzaWJpbGl0eSBpZCcsICdPa2F5IC8gQ2FuY2VsJyk7XG4gICAgICAgIChhd2FpdCBkcml2ZXIuZ2V0QXR0cmlidXRlKCduYW1lJywgZWwyKSkuc2hvdWxkLmVxdWFsKCdPa2F5IC8gQ2FuY2VsJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBmaW5kIHNldmVyYWwgZWxlbWVudHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGxldCBlbDEgPSBhd2FpdCBkcml2ZXIuZmluZEVsZW1lbnQoJ2FjY2Vzc2liaWxpdHkgaWQnLCBgQWN0aW9uIFNoZWV0cyR7YXhJZEV4dH1gKTtcbiAgICAgICAgYXdhaXQgZHJpdmVyLmNsaWNrKGVsMSk7XG4gICAgICAgIGxldCBlbDIgPSBhd2FpdCBkcml2ZXIuZmluZEVsZW1lbnRzKCdhY2Nlc3NpYmlsaXR5IGlkJywgJ09rYXkgLyBDYW5jZWwnKTtcbiAgICAgICAgZWwyLnNob3VsZC5oYXZlLmxlbmd0aCgyKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ2R1cGxpY2F0ZSB0ZXh0IGZpZWxkJywgKCkgPT4ge1xuICAgICAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgZHJpdmVyLmV4ZWN1dGUoXCJtb2JpbGU6IHNjcm9sbFwiLCB7ZGlyZWN0aW9uOiAnZG93bid9KTtcbiAgICAgICAgfSBjYXRjaCAoaWduKSB7fVxuICAgICAgfSk7XG5cbiAgICAgIGFmdGVyRWFjaChhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IGNsaWNrQnV0dG9uKGRyaXZlciwgJ1VJQ2F0YWxvZycpO1xuICAgICAgICBhd2FpdCBCLmRlbGF5KDEwMDApO1xuICAgICAgfSk7XG5cbiAgICAgIGxldCBheElkRXh0ID0gKGVudi5JT1M4IHx8IGVudi5JT1M5KSA/ICcnIDogJywgQUFQTFRleHRGaWVsZFZpZXdDb250cm9sbGVyJztcblxuICAgICAgaXQoJ3Nob3VsZCBmaW5kIG9ubHkgb25lIGVsZW1lbnQgcGVyIHRleHQgZmllbGQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGxldCBlbDEgPSBhd2FpdCBkcml2ZXIuZmluZEVsZW1lbnQoJ2FjY2Vzc2liaWxpdHkgaWQnLCBgVGV4dCBGaWVsZHMke2F4SWRFeHR9YCk7XG4gICAgICAgIGF3YWl0IGRyaXZlci5jbGljayhlbDEpO1xuICAgICAgICBCLmRlbGF5KDIwMDApO1xuICAgICAgICBsZXQgZWxzID0gYXdhaXQgZHJpdmVyLmZpbmRFbGVtZW50cygnY2xhc3MgbmFtZScsICdVSUFUZXh0RmllbGQnKTtcbiAgICAgICAgZWxzLnNob3VsZC5oYXZlLmxlbmd0aCg0KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGZpbmQgb25seSBvbmUgZWxlbWVudCBwZXIgc2VjdXJlIHRleHQgZmllbGQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGxldCBlbDEgPSBhd2FpdCBkcml2ZXIuZmluZEVsZW1lbnQoJ2FjY2Vzc2liaWxpdHkgaWQnLCBgVGV4dCBGaWVsZHMke2F4SWRFeHR9YCk7XG4gICAgICAgIGF3YWl0IGRyaXZlci5jbGljayhlbDEpO1xuICAgICAgICBCLmRlbGF5KDIwMDApO1xuICAgICAgICBsZXQgZWxzID0gYXdhaXQgZHJpdmVyLmZpbmRFbGVtZW50cygnY2xhc3MgbmFtZScsICdVSUFTZWN1cmVUZXh0RmllbGQnKTtcbiAgICAgICAgZWxzLnNob3VsZC5oYXZlLmxlbmd0aCgxKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnYnkgYWNjZXNzaWJpbGl0eSBpZCcsIGZ1bmN0aW9uICgpIHtcbiAgICBhZnRlckVhY2goYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgY2xpY2tCdXR0b24oZHJpdmVyLCAnVUlDYXRhbG9nJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGZpbmQgYW4gZWxlbWVudCBieSBuYW1lIGJlbmVhdGggYW5vdGhlciBlbGVtZW50JywgYXN5bmMgKCkgPT4ge1xuICAgICAgbGV0IGF4SWRFeHQgPSBlbnYuSU9TOCB8fCBlbnYuSU9TOSA/ICcnIDogJywgQUFQTEFjdGlvblNoZWV0Vmlld0NvbnRyb2xsZXInO1xuICAgICAgbGV0IGVsID0gYXdhaXQgZHJpdmVyLmZpbmRFbGVtZW50KCdhY2Nlc3NpYmlsaXR5IGlkJywgXCJVSUNhdGFsb2dcIik7XG4gICAgICBhd2FpdCBkcml2ZXIuY2xpY2soZWwpO1xuICAgICAgbGV0IGVsMiA9IGF3YWl0IGRyaXZlci5maW5kRWxlbWVudCgnYWNjZXNzaWJpbGl0eSBpZCcsIGBBY3Rpb24gU2hlZXRzJHtheElkRXh0fWApO1xuICAgICAgZWwyLnNob3VsZC5leGlzdDtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2J5IHVpIGF1dG9tYXRpb24nLCBmdW5jdGlvbiAoKSB7XG4gICAgYmVmb3JlKGFzeW5jICgpID0+IHtcbiAgICAgIGxldCBlbCA9IGF3YWl0IGRyaXZlci5maW5kRWxlbWVudChieVVJQSwgJy5uYXZpZ2F0aW9uQmFycygpWzBdJyk7XG4gICAgICBpZiAoKGF3YWl0IGRyaXZlci5nZXRBdHRyaWJ1dGUoJ25hbWUnLCBlbCkpICE9PSAnVUlDYXRhbG9nJykge1xuICAgICAgICBhd2FpdCBjbGlja0J1dHRvbihkcml2ZXIsICdVSUNhdGFsb2cnKTtcbiAgICAgIH1cbiAgICAgIGF3YWl0IEIuZGVsYXkoNTAwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcHJvY2VzcyBtb3N0IGJhc2ljIFVJQXV0b21hdGlvbiBxdWVyeScsIGFzeW5jICgpID0+IHtcbiAgICAgIGxldCBlbHMgPSBhd2FpdCBkcml2ZXIuZmluZEVsZW1lbnRzKGJ5VUlBLCAnLmVsZW1lbnRzKCknKTtcbiAgICAgIGxldCBkaXNwbGF5ZWRFbHMgPSBhd2FpdCBmaWx0ZXJEaXNwbGF5ZWQoZHJpdmVyLCBlbHMpO1xuICAgICAgZGlzcGxheWVkRWxzLnNob3VsZC5oYXZlLmxlbmd0aCgyKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdXNlIHJhdyBzZWxlY3RvciBjb2RlIGlmIHNlbGVjdG9yIGRvZXMgbm90IHN0YXJ0IHdpdGggYSBkb3QnLCBhc3luYyAoKSA9PiB7XG4gICAgICBsZXQgZWxzID0gYXdhaXQgZHJpdmVyLmZpbmRFbGVtZW50cyhieVVJQSwgJyQubWFpbldpbmRvdygpLmVsZW1lbnRzKCknKTtcbiAgICAgIGxldCBkaXNwbGF5ZWRFbHMgPSBhd2FpdCBmaWx0ZXJEaXNwbGF5ZWQoZHJpdmVyLCBlbHMpO1xuICAgICAgZGlzcGxheWVkRWxzLnNob3VsZC5oYXZlLmxlbmd0aCgyKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZ2V0IGEgc2luZ2xlIGVsZW1lbnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBsZXQgZWwgPSBhd2FpdCBkcml2ZXIuZmluZEVsZW1lbnQoYnlVSUEsICcuZWxlbWVudHMoKVswXScpO1xuICAgICAgKGF3YWl0IGRyaXZlci5nZXRBdHRyaWJ1dGUoJ25hbWUnLCBlbCkpLnNob3VsZC5lcXVhbCgnVUlDYXRhbG9nJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGdldCBhIHNpbmdsZSBlbGVtZW50IHdpdGggbm9uLXplcm8gaW5kZXgnLCBhc3luYyAoKSA9PiB7XG4gICAgICBsZXQgbmFtZSA9IGVudi5JT1M4IHx8IGVudi5JT1M5ID8gJycgOiAnRW1wdHkgbGlzdCc7XG4gICAgICBsZXQgZWwgPSBhd2FpdCBkcml2ZXIuZmluZEVsZW1lbnQoYnlVSUEsICcuZWxlbWVudHMoKVsxXScpO1xuICAgICAgKGF3YWl0IGRyaXZlci5nZXRBdHRyaWJ1dGUoJ25hbWUnLCBlbCkpLnNob3VsZC5lcXVhbChuYW1lKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZ2V0IHNpbmdsZSBlbGVtZW50IGFzIGFycmF5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgbGV0IGVscyA9IGF3YWl0IGRyaXZlci5maW5kRWxlbWVudHMoYnlVSUEsICcudGFibGVWaWV3cygpWzBdJyk7XG4gICAgICBlbHMuc2hvdWxkLmhhdmUubGVuZ3RoKDEpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBmaW5kIGVsZW1lbnRzIGJ5IGluZGV4IG11bHRpcGxlIHRpbWVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbGV0IGVsID0gYXdhaXQgZHJpdmVyLmZpbmRFbGVtZW50KGJ5VUlBLCAnLmVsZW1lbnRzKClbMV0uY2VsbHMoKVsyXScpO1xuICAgICAgKGF3YWl0IGRyaXZlci5nZXRBdHRyaWJ1dGUoJ25hbWUnLCBlbCkpLnNob3VsZC5pbmNsdWRlKCdBbGVydCBWaWV3cycpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBmaW5kIGVsZW1lbnQgYnkgbmFtZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGxldCBlbCA9IGF3YWl0IGRyaXZlci5maW5kRWxlbWVudChieVVJQSwgJy5lbGVtZW50cygpW1wiVUlDYXRhbG9nXCJdJyk7XG4gICAgICAoYXdhaXQgZHJpdmVyLmdldEF0dHJpYnV0ZSgnbmFtZScsIGVsKSkuc2hvdWxkLmVxdWFsKCdVSUNhdGFsb2cnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZmluZCBlbGVtZW50IGJ5IHR5cGUgYW5kIGluZGV4JywgYXN5bmMgKCkgPT4ge1xuICAgICAgbGV0IGVsID0gYXdhaXQgZHJpdmVyLmZpbmRFbGVtZW50KGJ5VUlBLCAnLm5hdmlnYXRpb25CYXIoKS5lbGVtZW50cygpWzFdJyk7XG4gICAgICAoYXdhaXQgZHJpdmVyLmdldEF0dHJpYnV0ZSgnbmFtZScsIGVsKSkuc2hvdWxkLmVxdWFsKCdCYWNrJyk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnc3RhcnQgZnJvbSBhIGdpdmVuIGNvbnRleHQgaW5zdGVhZCBvZiByb290IHRhcmdldCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGl0KCdzaG91bGQgcHJvY2VzcyBhIHNpbXBsZSBxdWVyeScsIGFzeW5jICgpID0+IHtcbiAgICAgICAgbGV0IGVsID0gYXdhaXQgZHJpdmVyLmZpbmRFbGVtZW50KGJ5VUlBLCAnLmVsZW1lbnRzKClbMV0nKTtcbiAgICAgICAgbGV0IGVscyA9IGF3YWl0IGRyaXZlci5maW5kRWxlbWVudHNGcm9tRWxlbWVudChieVVJQSwgZmlsdGVyVmlzaWJsZVVpYVNlbGVjdG9yKCcuZWxlbWVudHMoKTsnKSwgZWwpO1xuICAgICAgICBlbHMuc2hvdWxkLmhhdmUubGVuZ3RoLmF0LmxlYXN0KDEwKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGZpbmQgZWxlbWVudCBieSBuYW1lJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBsZXQgYXhJZEV4dCA9IGVudi5JT1M4IHx8IGVudi5JT1M5ID8gXCJcIiA6IFwiLCBBQVBMQnV0dG9uVmlld0NvbnRyb2xsZXJcIjtcbiAgICAgICAgbGV0IGVsMSA9IGF3YWl0IGRyaXZlci5maW5kRWxlbWVudChieVVJQSwgJy5lbGVtZW50cygpWzFdJyk7XG4gICAgICAgIGxldCBlbDIgPSBhd2FpdCBkcml2ZXIuZmluZEVsZW1lbnRGcm9tRWxlbWVudChieVVJQSwgYC5lbGVtZW50cygpW1wiQnV0dG9ucyR7YXhJZEV4dH1cIl1gLCBlbDEpO1xuICAgICAgICBlbDIuc2hvdWxkLmV4aXN0O1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdieSB4cGF0aCcsIGZ1bmN0aW9uICgpIHtcbiAgICBkZXNjcmliZSgnaW5kaXZpZHVhbCBjYWxscycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGJlZm9yZShhc3luYyAoKSA9PiB7XG4gICAgICAgIC8vIGJlZm9yZSBhbnl0aGluZywgdHJ5IHRvIGdvIGJhY2tcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBsZXQgZWwgPSBhd2FpdCBkcml2ZXIuZmluZEVsZW1lbnQoYnlVSUEsICcubmF2aWdhdGlvbkJhcigpLmVsZW1lbnRzKClbMV0nKTtcbiAgICAgICAgICBhd2FpdCBkcml2ZXIuY2xpY2soZWwpO1xuICAgICAgICB9IGNhdGNoIChpZ24pIHt9XG4gICAgICAgIC8vIGFuZCBtYWtlIHN1cmUgd2UgYXJlIGF0IHRoZSB0b3Agb2YgdGhlIHBhZ2VcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhd2FpdCBkcml2ZXIuZXhlY3V0ZShcIm1vYmlsZTogc2Nyb2xsXCIsIHtkaXJlY3Rpb246ICd1cCd9KTtcbiAgICAgICAgfSBjYXRjaCAoaWduKSB7fVxuICAgICAgfSk7XG4gICAgICBiZWZvcmVFYWNoKGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gZ28gaW50byB0aGUgcmlnaHQgcGFnZVxuICAgICAgICBsZXQgZWwgPSBhd2FpdCBkcml2ZXIuZmluZEVsZW1lbnQoJ3hwYXRoJywgXCIvL1VJQVN0YXRpY1RleHRbY29udGFpbnMoQGxhYmVsLCdCdXR0b25zJyldXCIpO1xuICAgICAgICBhd2FpdCBkcml2ZXIuY2xpY2soZWwpO1xuICAgICAgfSk7XG4gICAgICBhZnRlckVhY2goYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBnbyBiYWNrXG4gICAgICAgIGxldCBlbCA9IGF3YWl0IGRyaXZlci5maW5kRWxlbWVudChieVVJQSwgJy5uYXZpZ2F0aW9uQmFyKCkuZWxlbWVudHMoKVsxXScpO1xuICAgICAgICBhd2FpdCBkcml2ZXIuY2xpY2soZWwpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgcmVzcGVjdCBpbXBsaWNpdCB3YWl0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCBkcml2ZXIuaW1wbGljaXRXYWl0KDUwMDApO1xuXG4gICAgICAgIGxldCBiZWdpbiA9IERhdGUubm93KCk7XG4gICAgICAgIGF3YWl0IGRyaXZlci5maW5kRWxlbWVudCgneHBhdGgnLCBcIi8vc29tZXRoaW5nX25vdF90aGVyZVwiKVxuICAgICAgICAgIC5zaG91bGQuZXZlbnR1YWxseS5iZS5yZWplY3RlZDtcbiAgICAgICAgbGV0IGVuZCA9IERhdGUubm93KCk7XG4gICAgICAgIChlbmQgLSBiZWdpbikuc2hvdWxkLmJlLmFib3ZlKDUwMDApO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgcmV0dXJuIHRoZSBsYXN0IGJ1dHRvbicsIGFzeW5jICgpID0+IHtcbiAgICAgICAgbGV0IGVsID0gYXdhaXQgZHJpdmVyLmZpbmRFbGVtZW50KCd4cGF0aCcsIFwiLy9VSUFCdXR0b25bbGFzdCgpXVwiKTtcbiAgICAgICAgKGF3YWl0IGRyaXZlci5nZXRUZXh0KGVsKSkuc2hvdWxkLmVxdWFsKFwiQnV0dG9uXCIpOyAvLyB0aGlzIGlzIHRoZSBuYW1lIG9mIHRoZSBsYXN0IGJ1dHRvblxuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgcmV0dXJuIGEgc2luZ2xlIGVsZW1lbnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGxldCBlbCA9IGF3YWl0IGRyaXZlci5maW5kRWxlbWVudCgneHBhdGgnLCBcIi8vVUlBQnV0dG9uXCIpO1xuICAgICAgICAoYXdhaXQgZHJpdmVyLmdldFRleHQoZWwpKS5zaG91bGQuZXF1YWwoXCJVSUNhdGFsb2dcIik7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gbXVsdGlwbGUgZWxlbWVudHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGxldCBlbHMgPSBhd2FpdCBkcml2ZXIuZmluZEVsZW1lbnRzKCd4cGF0aCcsIFwiLy9VSUFCdXR0b25cIik7XG4gICAgICAgIGVscy5zaG91bGQuaGF2ZS5sZW5ndGguYWJvdmUoNSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBmaWx0ZXIgYnkgbmFtZScsIGFzeW5jICgpID0+IHtcbiAgICAgICAgbGV0IGVsID0gYXdhaXQgZHJpdmVyLmZpbmRFbGVtZW50KCd4cGF0aCcsIFwiLy9VSUFCdXR0b25bQG5hbWU9J1ggQnV0dG9uJ11cIik7XG4gICAgICAgIChhd2FpdCBkcml2ZXIuZ2V0VGV4dChlbCkpLnNob3VsZC5lcXVhbChcIlggQnV0dG9uXCIpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQga25vdyBob3cgdG8gcmVzdHJpY3Qgcm9vdC1sZXZlbCBlbGVtZW50cycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgQi5yZXNvbHZlKGRyaXZlci5maW5kRWxlbWVudCgneHBhdGgnLCBcIi9VSUFCdXR0b25cIikpXG4gICAgICAgICAgLmNhdGNoKHRocm93TWF0Y2hhYmxlRXJyb3IpXG4gICAgICAgICAgLnNob3VsZC5iZS5yZWplY3RlZFdpdGgoL2pzb253cENvZGU6IDcvKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHNlYXJjaCBhbiBleHRlbmRlZCBwYXRoIGJ5IGNoaWxkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBsZXQgZWwgPSBhd2FpdCBkcml2ZXIuZmluZEVsZW1lbnQoJ3hwYXRoJywgXCIvL1VJQU5hdmlnYXRpb25CYXIvVUlBU3RhdGljVGV4dFwiKTtcbiAgICAgICAgKGF3YWl0IGRyaXZlci5nZXRUZXh0KGVsKSkuc2hvdWxkLmVxdWFsKCdCdXR0b25zJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZWFyY2ggYW4gZXh0ZW5kZWQgcGF0aCBieSBkZXNjZW5kYW50JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBsZXQgZWxzID0gYXdhaXQgZHJpdmVyLmZpbmRFbGVtZW50cygneHBhdGgnLCBcIi8vVUlBVGFibGVDZWxsLy9VSUFCdXR0b25cIik7XG4gICAgICAgIGxldCB0ZXh0cyA9IGF3YWl0IEIuYWxsKF8ubWFwKGVscywgKGVsKSA9PiB7IHJldHVybiBkcml2ZXIuZ2V0VGV4dChlbCk7IH0pKTtcbiAgICAgICAgdGV4dHMuc2hvdWxkLm5vdC5pbmNsdWRlKFwiVUlDYXRhbG9nXCIpO1xuICAgICAgICB0ZXh0cy5zaG91bGQuaW5jbHVkZShcIlggQnV0dG9uXCIpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgZmlsdGVyIGJ5IGluZGljZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IGRyaXZlci5pbXBsaWNpdFdhaXQoMTAwMDApO1xuICAgICAgICBsZXQgZWwgPSBhd2FpdCBkcml2ZXIuZmluZEVsZW1lbnQoJ3hwYXRoJywgXCIvL1VJQVRhYmxlQ2VsbFs0XS9VSUFCdXR0b25bMV1cIik7XG4gICAgICAgIChhd2FpdCBkcml2ZXIuZ2V0QXR0cmlidXRlKCduYW1lJywgZWwpKS5zaG91bGQuZXF1YWwoJ1ggQnV0dG9uJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBmaWx0ZXIgYnkgcGFydGlhbCB0ZXh0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBsZXQgZWwgPSBhd2FpdCBkcml2ZXIuZmluZEVsZW1lbnQoJ3hwYXRoJywgXCIvL1VJQVRhYmxlQ2VsbC8vVUlBQnV0dG9uW2NvbnRhaW5zKEBuYW1lLCAnWCAnKV1cIik7XG4gICAgICAgIChhd2FpdCBkcml2ZXIuZ2V0VGV4dChlbCkpLnNob3VsZC5lcXVhbChcIlggQnV0dG9uXCIpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgZmluZCBhbiBlbGVtZW50IHdpdGhpbiBpdHNlbGYnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGxldCBlMSA9IGF3YWl0IGRyaXZlci5maW5kRWxlbWVudCgneHBhdGgnLCBcIi8vVUlBVGFibGVDZWxsW0BuYW1lPSdYIEJ1dHRvbiddXCIpO1xuICAgICAgICBsZXQgZTIgPSBhd2FpdCBkcml2ZXIuZmluZEVsZW1lbnRGcm9tRWxlbWVudCgneHBhdGgnLCBcIi8vVUlBQnV0dG9uWzFdXCIsIGUxKTtcbiAgICAgICAgKGF3YWl0IGRyaXZlci5nZXRUZXh0KGUyKSkuc2hvdWxkLmVxdWFsKFwiWCBCdXR0b25cIik7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdkdXBsaWNhdGUgdGV4dCBmaWVsZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xuICAgICAgICBsZXQgZWwgPSBhd2FpdCBkcml2ZXIuZmluZEVsZW1lbnQoJ2FjY2Vzc2liaWxpdHkgaWQnLCAnVGV4dCBGaWVsZHMnKTtcbiAgICAgICAgYXdhaXQgZHJpdmVyLmNsaWNrKGVsKTtcbiAgICAgICAgYXdhaXQgQi5kZWxheSgyMDAwKTtcbiAgICAgIH0pO1xuXG4gICAgICBhZnRlckVhY2goYXN5bmMgKCkgPT4ge1xuICAgICAgICBsZXQgZWwgPSBhd2FpdCBkcml2ZXIuZmluZEVsZW1lbnQoJ2FjY2Vzc2liaWxpdHkgaWQnLCAnVUlDYXRhbG9nJyk7XG4gICAgICAgIGF3YWl0IGRyaXZlci5jbGljayhlbCk7XG4gICAgICAgIGF3YWl0IEIuZGVsYXkoMTAwMCk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBmaW5kIG9ubHkgb25lIHRleHQgZmllbGQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGxldCBlbHMgPSBhd2FpdCBkcml2ZXIuZmluZEVsZW1lbnRzKCd4cGF0aCcsICcvL1VJQVRhYmxlVmlld1tcIkVtcHR5IGxpc3RcIl0vVUlBVGFibGVDZWxsWzFdL1VJQVRleHRGaWVsZCcpO1xuICAgICAgICBlbHMuc2hvdWxkLmhhdmUubGVuZ3RoKDEpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgZmluZCBvbmx5IG9uZSB0ZXh0IGZpZWxkIHdoZW4gZG9pbmcgcmVsYXRpdmUgc2VhcmNoJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBsZXQgZWwyID0gYXdhaXQgZHJpdmVyLmZpbmRFbGVtZW50KCd4cGF0aCcsICcvL1VJQVRhYmxlVmlld1tcIkVtcHR5IGxpc3RcIl0nKTtcbiAgICAgICAgbGV0IGVscyA9IGF3YWl0IGRyaXZlci5maW5kRWxlbWVudHNGcm9tRWxlbWVudCgneHBhdGgnLCAnLy9VSUFUYWJsZUNlbGxbMV0vVUlBVGV4dEZpZWxkJywgZWwyKTtcbiAgICAgICAgZWxzLnNob3VsZC5oYXZlLmxlbmd0aCgxKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGZpbmQgb25seSBvbmUgc2VjdXJlIHRleHQgZmllbGQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGxldCBlbHMgPSBhd2FpdCBkcml2ZXIuZmluZEVsZW1lbnRzKCd4cGF0aCcsICcvL1VJQVRhYmxlVmlld1tcIkVtcHR5IGxpc3RcIl0vVUlBVGFibGVDZWxsWzNdL1VJQVNlY3VyZVRleHRGaWVsZCcpO1xuICAgICAgICBlbHMuc2hvdWxkLmhhdmUubGVuZ3RoKDEpO1xuICAgICAgfSk7XG5cbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdtdWx0aXBsZSBjYWxscycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCBydW5zID0gNTtcblxuICAgICAgbGV0IHRlc3QgPSBmdW5jdGlvbiAocGF0aCwgbWluTGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaXQoJ3Nob3VsZCBub3QgY3Jhc2gnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBsZXQgZWxzID0gYXdhaXQgZHJpdmVyLmZpbmRFbGVtZW50cygneHBhdGgnLCBwYXRoKTtcbiAgICAgICAgICAgIGVscy5zaG91bGQuaGF2ZS5sZW5ndGguYWJvdmUobWluTGVuZ3RoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgIH07XG5cbiAgICAgIGRlc2NyaWJlKCdmaW5kaW5nIHNwZWNpZmljIHBhdGgnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgcnVuczsgbisrKSB7XG4gICAgICAgICAgZGVzY3JpYmUoYHRlc3QgJHtuICsgMX1gLCB0ZXN0KFwiLy9VSUFBcHBsaWNhdGlvblsxXS9VSUFXaW5kb3cvVUlBVGFibGVWaWV3L1VJQVRhYmxlQ2VsbFwiLCAxNykpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgZGVzY3JpYmUoJ2ZpbmRpbmcgLy8qJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IHJ1bnM7IG4rKykge1xuICAgICAgICAgIGRlc2NyaWJlKGB0ZXN0ICR7biArIDF9YCwgdGVzdChcIi8vKlwiLCA1MikpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJzb3VyY2VSb290IjoiLi4vLi4vLi4vLi4ifQ==

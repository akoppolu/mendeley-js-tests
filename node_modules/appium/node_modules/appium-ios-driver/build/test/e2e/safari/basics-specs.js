'use strict';

var _regeneratorRuntime = require('babel-runtime/regenerator')['default'];

var _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];

var _safariSetup = require('./safari-setup');

var _safariSetup2 = _interopRequireDefault(_safariSetup);

var _helpersEnv = require('../helpers/env');

var _helpersEnv2 = _interopRequireDefault(_helpersEnv);

var _helpersSession = require('../helpers/session');

describe('safari - basics @skip-real-device', function () {
  this.timeout(_helpersSession.MOCHA_SAFARI_TIMEOUT);

  if (!(_helpersEnv2['default'].IOS8 || _helpersEnv2['default'].IOS9) && _helpersEnv2['default'].IOS80) {
    return describe('default init', function () {
      var _this = this;

      var driver = (0, _safariSetup2['default'])(this, {
        browserName: 'safari',
        noReset: true
      }).driver;

      it('it should use safari default init page', function callee$2$0() {
        return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
          while (1) switch (context$3$0.prev = context$3$0.next) {
            case 0:
              context$3$0.next = 2;
              return _regeneratorRuntime.awrap(driver.getPageSource());

            case 2:
              context$3$0.sent.should.include('Apple');

            case 3:
            case 'end':
              return context$3$0.stop();
          }
        }, null, _this);
      });
    });
  }

  describe('default init', function () {
    var _this2 = this;

    var driver = (0, _safariSetup2['default'])(this, {
      browserName: 'safari',
      noReset: true
    }).driver;

    it('it should use appium default init page', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(driver.getPageSource());

          case 2:
            context$3$0.sent.should.include('Let\'s browse!');

          case 3:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this2);
    });
  });

  describe('init with safariInitialUrl', function () {
    var _this3 = this;

    var driver = (0, _safariSetup2['default'])(this, {
      browserName: 'safari',
      safariInitialUrl: _helpersEnv2['default'].GUINEA_TEST_END_POINT,
      noReset: true
    }).driver;

    it('should go to the requested page', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(driver.getPageSource());

          case 2:
            context$3$0.sent.should.include('I am some page content');

          case 3:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this3);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QvZTJlL3NhZmFyaS9iYXNpY3Mtc3BlY3MuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7OzJCQUFrQixnQkFBZ0I7Ozs7MEJBQ2xCLGdCQUFnQjs7Ozs4QkFDSyxvQkFBb0I7O0FBR3pELFFBQVEsQ0FBQyxtQ0FBbUMsRUFBRSxZQUFZO0FBQ3hELE1BQUksQ0FBQyxPQUFPLHNDQUFzQixDQUFDOztBQUVuQyxNQUFJLEVBQUUsd0JBQUksSUFBSSxJQUFJLHdCQUFJLElBQUksQ0FBQSxBQUFDLElBQUksd0JBQUksS0FBSyxFQUFFO0FBQ3hDLFdBQU8sUUFBUSxDQUFDLGNBQWMsRUFBRSxZQUFZOzs7QUFDMUMsVUFBTSxNQUFNLEdBQUcsOEJBQU0sSUFBSSxFQUFFO0FBQ3pCLG1CQUFXLEVBQUUsUUFBUTtBQUNyQixlQUFPLEVBQUUsSUFBSTtPQUNkLENBQUMsQ0FBQyxNQUFNLENBQUM7O0FBRVYsUUFBRSxDQUFDLHdDQUF3QyxFQUFFOzs7OzsrQ0FDcEMsTUFBTSxDQUFDLGFBQWEsRUFBRTs7OytCQUFFLE1BQU0sQ0FBQyxPQUFPLENBQUMsT0FBTzs7Ozs7OztPQUN0RCxDQUFDLENBQUM7S0FDSixDQUFDLENBQUM7R0FDSjs7QUFFRCxVQUFRLENBQUMsY0FBYyxFQUFFLFlBQVk7OztBQUNuQyxRQUFNLE1BQU0sR0FBRyw4QkFBTSxJQUFJLEVBQUU7QUFDekIsaUJBQVcsRUFBRSxRQUFRO0FBQ3JCLGFBQU8sRUFBRSxJQUFJO0tBQ2QsQ0FBQyxDQUFDLE1BQU0sQ0FBQzs7QUFFVixNQUFFLENBQUMsd0NBQXdDLEVBQUU7Ozs7OzZDQUNwQyxNQUFNLENBQUMsYUFBYSxFQUFFOzs7NkJBQUUsTUFBTSxDQUFDLE9BQU8sQ0FBQyxnQkFBZ0I7Ozs7Ozs7S0FDL0QsQ0FBQyxDQUFDO0dBQ0osQ0FBQyxDQUFDOztBQUVILFVBQVEsQ0FBQyw0QkFBNEIsRUFBRSxZQUFZOzs7QUFDakQsUUFBTSxNQUFNLEdBQUcsOEJBQU0sSUFBSSxFQUFFO0FBQ3pCLGlCQUFXLEVBQUUsUUFBUTtBQUNyQixzQkFBZ0IsRUFBRSx3QkFBSSxxQkFBcUI7QUFDM0MsYUFBTyxFQUFFLElBQUk7S0FDZCxDQUFDLENBQUMsTUFBTSxDQUFDOztBQUVWLE1BQUUsQ0FBQyxpQ0FBaUMsRUFBRTs7Ozs7NkNBQzdCLE1BQU0sQ0FBQyxhQUFhLEVBQUU7Ozs2QkFBRSxNQUFNLENBQUMsT0FBTyxDQUFDLHdCQUF3Qjs7Ozs7OztLQUN2RSxDQUFDLENBQUM7R0FDSixDQUFDLENBQUM7Q0FDSixDQUFDLENBQUMiLCJmaWxlIjoidGVzdC9lMmUvc2FmYXJpL2Jhc2ljcy1zcGVjcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBzZXR1cCBmcm9tICcuL3NhZmFyaS1zZXR1cCc7XG5pbXBvcnQgZW52IGZyb20gJy4uL2hlbHBlcnMvZW52JztcbmltcG9ydCB7IE1PQ0hBX1NBRkFSSV9USU1FT1VUIH0gZnJvbSAnLi4vaGVscGVycy9zZXNzaW9uJztcblxuXG5kZXNjcmliZSgnc2FmYXJpIC0gYmFzaWNzIEBza2lwLXJlYWwtZGV2aWNlJywgZnVuY3Rpb24gKCkge1xuICB0aGlzLnRpbWVvdXQoTU9DSEFfU0FGQVJJX1RJTUVPVVQpO1xuXG4gIGlmICghKGVudi5JT1M4IHx8IGVudi5JT1M5KSAmJiBlbnYuSU9TODApIHtcbiAgICByZXR1cm4gZGVzY3JpYmUoJ2RlZmF1bHQgaW5pdCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0IGRyaXZlciA9IHNldHVwKHRoaXMsIHtcbiAgICAgICAgYnJvd3Nlck5hbWU6ICdzYWZhcmknLFxuICAgICAgICBub1Jlc2V0OiB0cnVlLFxuICAgICAgfSkuZHJpdmVyO1xuXG4gICAgICBpdCgnaXQgc2hvdWxkIHVzZSBzYWZhcmkgZGVmYXVsdCBpbml0IHBhZ2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIChhd2FpdCBkcml2ZXIuZ2V0UGFnZVNvdXJjZSgpKS5zaG91bGQuaW5jbHVkZSgnQXBwbGUnKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZGVzY3JpYmUoJ2RlZmF1bHQgaW5pdCcsIGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBkcml2ZXIgPSBzZXR1cCh0aGlzLCB7XG4gICAgICBicm93c2VyTmFtZTogJ3NhZmFyaScsXG4gICAgICBub1Jlc2V0OiB0cnVlLFxuICAgIH0pLmRyaXZlcjtcblxuICAgIGl0KCdpdCBzaG91bGQgdXNlIGFwcGl1bSBkZWZhdWx0IGluaXQgcGFnZScsIGFzeW5jICgpID0+IHtcbiAgICAgIChhd2FpdCBkcml2ZXIuZ2V0UGFnZVNvdXJjZSgpKS5zaG91bGQuaW5jbHVkZSgnTGV0XFwncyBicm93c2UhJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdpbml0IHdpdGggc2FmYXJpSW5pdGlhbFVybCcsIGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBkcml2ZXIgPSBzZXR1cCh0aGlzLCB7XG4gICAgICBicm93c2VyTmFtZTogJ3NhZmFyaScsXG4gICAgICBzYWZhcmlJbml0aWFsVXJsOiBlbnYuR1VJTkVBX1RFU1RfRU5EX1BPSU5ULFxuICAgICAgbm9SZXNldDogdHJ1ZSxcbiAgICB9KS5kcml2ZXI7XG5cbiAgICBpdCgnc2hvdWxkIGdvIHRvIHRoZSByZXF1ZXN0ZWQgcGFnZScsIGFzeW5jICgpID0+IHtcbiAgICAgIChhd2FpdCBkcml2ZXIuZ2V0UGFnZVNvdXJjZSgpKS5zaG91bGQuaW5jbHVkZSgnSSBhbSBzb21lIHBhZ2UgY29udGVudCcpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIuLi8uLi8uLi8uLiJ9

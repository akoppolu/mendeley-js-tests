'use strict';

var _regeneratorRuntime = require('babel-runtime/regenerator')['default'];

var _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];

var _setupBase = require("../../setup-base");

var _setupBase2 = _interopRequireDefault(_setupBase);

var _desired = require('../desired');

var _desired2 = _interopRequireDefault(_desired);

var _bluebird = require('bluebird');

var _bluebird2 = _interopRequireDefault(_bluebird);

var _helpersRecipes = require('../../helpers/recipes');

var _helpersEnv = require('../../helpers/env');

var _helpersEnv2 = _interopRequireDefault(_helpersEnv);

var _lodash = require('lodash');

var _lodash2 = _interopRequireDefault(_lodash);

describe('testapp - timeout', function () {
  var _this = this;

  this.timeout(_helpersEnv2['default'].MOCHA_INIT_TIMEOUT);

  afterEach(function callee$1$0() {
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(_bluebird2['default'].delay(3000));

        case 2:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });

  describe('via desired caps', function () {
    var _this2 = this;

    var session = (0, _setupBase2['default'])(this, _lodash2['default'].defaults({ newCommandTimeout: 3 }, _desired2['default']));
    var driver = session.driver;

    it('should die with short command timeout', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(_bluebird2['default'].delay(5500));

          case 2:
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(_bluebird2['default'].resolve(driver.findElement('accessibility id', 'dont exist dogg'))['catch'](_helpersRecipes.throwMatchableError).should.be.rejectedWith(/jsonwpCode: (13|6)/));

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this2);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QvZTJlL3Rlc3RhcHAvdGltZW91dC90aW1lb3V0LXZpYS1kZXNpcmVkLXNwZWNzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozt5QkFBa0Isa0JBQWtCOzs7O3VCQUNoQixZQUFZOzs7O3dCQUNsQixVQUFVOzs7OzhCQUNZLHVCQUF1Qjs7MEJBQzNDLG1CQUFtQjs7OztzQkFDckIsUUFBUTs7OztBQUV0QixRQUFRLENBQUMsbUJBQW1CLEVBQUUsWUFBWTs7O0FBQ3hDLE1BQUksQ0FBQyxPQUFPLENBQUMsd0JBQUksa0JBQWtCLENBQUMsQ0FBQzs7QUFFckMsV0FBUyxDQUFDOzs7OzsyQ0FBb0Isc0JBQUUsS0FBSyxDQUFDLElBQUksQ0FBQzs7Ozs7OztHQUFHLENBQUMsQ0FBQzs7QUFFaEQsVUFBUSxDQUFDLGtCQUFrQixFQUFFLFlBQVk7OztBQUN2QyxRQUFJLE9BQU8sR0FBRyw0QkFBTSxJQUFJLEVBQUUsb0JBQUUsUUFBUSxDQUFDLEVBQUMsaUJBQWlCLEVBQUUsQ0FBQyxFQUFDLHVCQUFVLENBQUMsQ0FBQztBQUN2RSxRQUFJLE1BQU0sR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDOztBQUU1QixNQUFFLENBQUMsdUNBQXVDLEVBQUU7Ozs7OzZDQUNwQyxzQkFBRSxLQUFLLENBQUMsSUFBSSxDQUFDOzs7OzZDQUNiLHNCQUFFLE9BQU8sQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLGtCQUFrQixFQUFFLGlCQUFpQixDQUFDLENBQUMsU0FDbEUscUNBQXFCLENBQzFCLE1BQU0sQ0FBQyxFQUFFLENBQUMsWUFBWSxDQUFDLG9CQUFvQixDQUFDOzs7Ozs7O0tBQ2hELENBQUMsQ0FBQztHQUNKLENBQUMsQ0FBQztDQUNKLENBQUMsQ0FBQyIsImZpbGUiOiJ0ZXN0L2UyZS90ZXN0YXBwL3RpbWVvdXQvdGltZW91dC12aWEtZGVzaXJlZC1zcGVjcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBzZXR1cCBmcm9tIFwiLi4vLi4vc2V0dXAtYmFzZVwiO1xuaW1wb3J0IGRlc2lyZWQgZnJvbSAnLi4vZGVzaXJlZCc7XG5pbXBvcnQgQiBmcm9tICdibHVlYmlyZCc7XG5pbXBvcnQgeyB0aHJvd01hdGNoYWJsZUVycm9yIH0gZnJvbSAnLi4vLi4vaGVscGVycy9yZWNpcGVzJztcbmltcG9ydCBlbnYgZnJvbSAnLi4vLi4vaGVscGVycy9lbnYnO1xuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcblxuZGVzY3JpYmUoJ3Rlc3RhcHAgLSB0aW1lb3V0JywgZnVuY3Rpb24gKCkge1xuICB0aGlzLnRpbWVvdXQoZW52Lk1PQ0hBX0lOSVRfVElNRU9VVCk7XG5cbiAgYWZ0ZXJFYWNoKGFzeW5jICgpID0+IHsgYXdhaXQgQi5kZWxheSgzMDAwKTsgfSk7XG5cbiAgZGVzY3JpYmUoJ3ZpYSBkZXNpcmVkIGNhcHMnLCBmdW5jdGlvbiAoKSB7XG4gICAgbGV0IHNlc3Npb24gPSBzZXR1cCh0aGlzLCBfLmRlZmF1bHRzKHtuZXdDb21tYW5kVGltZW91dDogM30sIGRlc2lyZWQpKTtcbiAgICBsZXQgZHJpdmVyID0gc2Vzc2lvbi5kcml2ZXI7XG5cbiAgICBpdCgnc2hvdWxkIGRpZSB3aXRoIHNob3J0IGNvbW1hbmQgdGltZW91dCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IEIuZGVsYXkoNTUwMCk7XG4gICAgICBhd2FpdCBCLnJlc29sdmUoZHJpdmVyLmZpbmRFbGVtZW50KCdhY2Nlc3NpYmlsaXR5IGlkJywgJ2RvbnQgZXhpc3QgZG9nZycpKVxuICAgICAgICAuY2F0Y2godGhyb3dNYXRjaGFibGVFcnJvcilcbiAgICAgICAgLnNob3VsZC5iZS5yZWplY3RlZFdpdGgoL2pzb253cENvZGU6ICgxM3w2KS8pO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIuLi8uLi8uLi8uLi8uLiJ9

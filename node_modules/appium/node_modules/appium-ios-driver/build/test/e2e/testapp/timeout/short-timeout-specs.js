'use strict';

var _regeneratorRuntime = require('babel-runtime/regenerator')['default'];

var _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];

var _setupBase = require("../../setup-base");

var _setupBase2 = _interopRequireDefault(_setupBase);

var _desired = require('../desired');

var _desired2 = _interopRequireDefault(_desired);

var _bluebird = require('bluebird');

var _bluebird2 = _interopRequireDefault(_bluebird);

var _helpersRecipes = require('../../helpers/recipes');

var _helpersEnv = require('../../helpers/env');

var _helpersEnv2 = _interopRequireDefault(_helpersEnv);

describe('testapp - timeout', function () {
  var _this = this;

  this.timeout(_helpersEnv2['default'].MOCHA_INIT_TIMEOUT);

  afterEach(function callee$1$0() {
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(_bluebird2['default'].delay(3000));

        case 2:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });

  describe('short timeout', function () {
    var _this2 = this;

    var session = (0, _setupBase2['default'])(this, _desired2['default']);
    var driver = session.driver;

    it('should die with short command timeout', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(driver.timeouts('command', 3000));

          case 2:
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(_bluebird2['default'].delay(5500));

          case 4:
            context$3$0.next = 6;
            return _regeneratorRuntime.awrap(_bluebird2['default'].resolve(driver.findElement('accessibility id', 'dont exist dogg'))['catch'](_helpersRecipes.throwMatchableError).should.be.rejectedWith(/jsonwpCode: (13|6)/));

          case 6:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this2);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QvZTJlL3Rlc3RhcHAvdGltZW91dC9zaG9ydC10aW1lb3V0LXNwZWNzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozt5QkFBa0Isa0JBQWtCOzs7O3VCQUNoQixZQUFZOzs7O3dCQUNsQixVQUFVOzs7OzhCQUNZLHVCQUF1Qjs7MEJBQzNDLG1CQUFtQjs7OztBQUVuQyxRQUFRLENBQUMsbUJBQW1CLEVBQUUsWUFBWTs7O0FBQ3hDLE1BQUksQ0FBQyxPQUFPLENBQUMsd0JBQUksa0JBQWtCLENBQUMsQ0FBQzs7QUFFckMsV0FBUyxDQUFDOzs7OzsyQ0FBb0Isc0JBQUUsS0FBSyxDQUFDLElBQUksQ0FBQzs7Ozs7OztHQUFHLENBQUMsQ0FBQzs7QUFFaEQsVUFBUSxDQUFDLGVBQWUsRUFBRSxZQUFZOzs7QUFDcEMsUUFBSSxPQUFPLEdBQUcsNEJBQU0sSUFBSSx1QkFBVSxDQUFDO0FBQ25DLFFBQUksTUFBTSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUM7O0FBRTVCLE1BQUUsQ0FBQyx1Q0FBdUMsRUFBRTs7Ozs7NkNBQ3BDLE1BQU0sQ0FBQyxRQUFRLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQzs7Ozs2Q0FDaEMsc0JBQUUsS0FBSyxDQUFDLElBQUksQ0FBQzs7Ozs2Q0FDYixzQkFBRSxPQUFPLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsRUFBRSxpQkFBaUIsQ0FBQyxDQUFDLFNBQ2xFLHFDQUFxQixDQUMxQixNQUFNLENBQUMsRUFBRSxDQUFDLFlBQVksQ0FBQyxvQkFBb0IsQ0FBQzs7Ozs7OztLQUNoRCxDQUFDLENBQUM7R0FDSixDQUFDLENBQUM7Q0FDSixDQUFDLENBQUMiLCJmaWxlIjoidGVzdC9lMmUvdGVzdGFwcC90aW1lb3V0L3Nob3J0LXRpbWVvdXQtc3BlY3MuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgc2V0dXAgZnJvbSBcIi4uLy4uL3NldHVwLWJhc2VcIjtcbmltcG9ydCBkZXNpcmVkIGZyb20gJy4uL2Rlc2lyZWQnO1xuaW1wb3J0IEIgZnJvbSAnYmx1ZWJpcmQnO1xuaW1wb3J0IHsgdGhyb3dNYXRjaGFibGVFcnJvciB9IGZyb20gJy4uLy4uL2hlbHBlcnMvcmVjaXBlcyc7XG5pbXBvcnQgZW52IGZyb20gJy4uLy4uL2hlbHBlcnMvZW52JztcblxuZGVzY3JpYmUoJ3Rlc3RhcHAgLSB0aW1lb3V0JywgZnVuY3Rpb24gKCkge1xuICB0aGlzLnRpbWVvdXQoZW52Lk1PQ0hBX0lOSVRfVElNRU9VVCk7XG5cbiAgYWZ0ZXJFYWNoKGFzeW5jICgpID0+IHsgYXdhaXQgQi5kZWxheSgzMDAwKTsgfSk7XG5cbiAgZGVzY3JpYmUoJ3Nob3J0IHRpbWVvdXQnLCBmdW5jdGlvbiAoKSB7XG4gICAgbGV0IHNlc3Npb24gPSBzZXR1cCh0aGlzLCBkZXNpcmVkKTtcbiAgICBsZXQgZHJpdmVyID0gc2Vzc2lvbi5kcml2ZXI7XG5cbiAgICBpdCgnc2hvdWxkIGRpZSB3aXRoIHNob3J0IGNvbW1hbmQgdGltZW91dCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGRyaXZlci50aW1lb3V0cygnY29tbWFuZCcsIDMwMDApO1xuICAgICAgYXdhaXQgQi5kZWxheSg1NTAwKTtcbiAgICAgIGF3YWl0IEIucmVzb2x2ZShkcml2ZXIuZmluZEVsZW1lbnQoJ2FjY2Vzc2liaWxpdHkgaWQnLCAnZG9udCBleGlzdCBkb2dnJykpXG4gICAgICAgIC5jYXRjaCh0aHJvd01hdGNoYWJsZUVycm9yKVxuICAgICAgICAuc2hvdWxkLmJlLnJlamVjdGVkV2l0aCgvanNvbndwQ29kZTogKDEzfDYpLyk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwic291cmNlUm9vdCI6Ii4uLy4uLy4uLy4uLy4uIn0=

'use strict';

var _regeneratorRuntime = require('babel-runtime/regenerator')['default'];

var _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];

var _setupBase = require("../setup-base");

var _setupBase2 = _interopRequireDefault(_setupBase);

var _desired = require('./desired');

var _desired2 = _interopRequireDefault(_desired);

var _xmldom = require('xmldom');

var _xpath = require('xpath');

var _xpath2 = _interopRequireDefault(_xpath);

describe('testapp - source', function () {
  var _this = this;

  var session = (0, _setupBase2['default'])(this, _desired2['default']);
  var driver = session.driver;

  it('should return page source', function callee$1$0() {
    var source, dom, nodes;
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(driver.getPageSource());

        case 2:
          source = context$2$0.sent;
          dom = new _xmldom.DOMParser().parseFromString(source);
          nodes = _xpath2['default'].select('//AppiumAUT', dom);

          nodes.should.not.be.empty;

        case 6:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QvZTJlL3Rlc3RhcHAvc291cmNlLXNwZWNzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozt5QkFBa0IsZUFBZTs7Ozt1QkFDYixXQUFXOzs7O3NCQUNLLFFBQVE7O3FCQUMxQixPQUFPOzs7O0FBRXpCLFFBQVEsQ0FBQyxrQkFBa0IsRUFBRSxZQUFZOzs7QUFDdkMsTUFBSSxPQUFPLEdBQUcsNEJBQU0sSUFBSSx1QkFBVSxDQUFDO0FBQ25DLE1BQUksTUFBTSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUM7O0FBRTVCLElBQUUsQ0FBQywyQkFBMkIsRUFBRTtRQUMxQixNQUFNLEVBQ04sR0FBRyxFQUNILEtBQUs7Ozs7OzJDQUZVLE1BQU0sQ0FBQyxhQUFhLEVBQUU7OztBQUFyQyxnQkFBTTtBQUNOLGFBQUcsR0FBRyx1QkFBWSxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUM7QUFDMUMsZUFBSyxHQUFHLG1CQUFNLE1BQU0sQ0FBQyxhQUFhLEVBQUUsR0FBRyxDQUFDOztBQUM1QyxlQUFLLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDOzs7Ozs7O0dBQzNCLENBQUMsQ0FBQztDQUNKLENBQUMsQ0FBQyIsImZpbGUiOiJ0ZXN0L2UyZS90ZXN0YXBwL3NvdXJjZS1zcGVjcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBzZXR1cCBmcm9tIFwiLi4vc2V0dXAtYmFzZVwiO1xuaW1wb3J0IGRlc2lyZWQgZnJvbSAnLi9kZXNpcmVkJztcbmltcG9ydCB7IERPTVBhcnNlciBhcyBYTUxEb20gfSBmcm9tICd4bWxkb20nO1xuaW1wb3J0IHhwYXRoIGZyb20gJ3hwYXRoJztcblxuZGVzY3JpYmUoJ3Rlc3RhcHAgLSBzb3VyY2UnLCBmdW5jdGlvbiAoKSB7XG4gIGxldCBzZXNzaW9uID0gc2V0dXAodGhpcywgZGVzaXJlZCk7XG4gIGxldCBkcml2ZXIgPSBzZXNzaW9uLmRyaXZlcjtcblxuICBpdCgnc2hvdWxkIHJldHVybiBwYWdlIHNvdXJjZScsIGFzeW5jICgpID0+IHtcbiAgICBsZXQgc291cmNlID0gYXdhaXQgZHJpdmVyLmdldFBhZ2VTb3VyY2UoKTtcbiAgICBsZXQgZG9tID0gbmV3IFhNTERvbSgpLnBhcnNlRnJvbVN0cmluZyhzb3VyY2UpO1xuICAgIGxldCBub2RlcyA9IHhwYXRoLnNlbGVjdCgnLy9BcHBpdW1BVVQnLCBkb20pO1xuICAgIG5vZGVzLnNob3VsZC5ub3QuYmUuZW1wdHk7XG4gIH0pO1xufSk7XG4iXSwic291cmNlUm9vdCI6Ii4uLy4uLy4uLy4uIn0=

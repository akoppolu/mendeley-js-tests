require('source-map-support').install();

'use strict';

var _regeneratorRuntime = require('babel-runtime/regenerator')['default'];

var _interopRequireWildcard = require('babel-runtime/helpers/interop-require-wildcard')['default'];

var _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];

var _this = this;

var _ = require('../../..');

var _teen_process = require('teen_process');

var tp = _interopRequireWildcard(_teen_process);

var _chai = require('chai');

var _chai2 = _interopRequireDefault(_chai);

var _appiumXcode = require('appium-xcode');

var _appiumXcode2 = _interopRequireDefault(_appiumXcode);

var _appiumTestSupport = require('appium-test-support');

var _appiumSupport = require('appium-support');

var _sinon = require('sinon');

var _sinon2 = _interopRequireDefault(_sinon);

var _bluebird = require('bluebird');

var _bluebird2 = _interopRequireDefault(_bluebird);

var _helpers = require('./helpers');

_chai2['default'].should();

describe('instruments', function () {
  function getInstruments() {
    var opts = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];

    var instruments = new _.Instruments(opts);
    instruments.xcodeVersion = (0, _helpers.getXcodeVersion)();
    instruments.template = '/a/b/c/d/tracetemplate';
    instruments.instrumentsPath = '/a/b/c/instrumentspath';
    return instruments;
  }
  describe('quickInstrument', (0, _appiumTestSupport.withMocks)({ xcode: _appiumXcode2['default'], instrumentsUtils: _.instrumentsUtils }, function (mocks) {
    it('should create instruments', function callee$2$0() {
      var opts, instruments;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.xcode.expects('getVersion').once().returns(_bluebird2['default'].resolve((0, _helpers.getXcodeVersion)()));
            mocks.xcode.expects('getAutomationTraceTemplatePath').once().returns(_bluebird2['default'].resolve('/a/b/c/d/tracetemplate'));
            mocks.instrumentsUtils.expects('getInstrumentsPath').once().returns(_bluebird2['default'].resolve('/a/b/c/instrumentspath'));
            opts = {
              app: '/a/b/c/my.app'
            };
            context$3$0.next = 6;
            return _regeneratorRuntime.awrap(_.Instruments.quickInstruments(opts));

          case 6:
            instruments = context$3$0.sent;

            instruments.app.should.equal(opts.app);

          case 8:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  }));
  describe('constructor', function () {
    it('should create instruments', function () {
      var opts = {
        app: '/a/b/c/my.app'
      };
      var instruments = new _.Instruments(opts);
      instruments.app.should.equal(opts.app);
    });
  });
  describe('configure', (0, _appiumTestSupport.withMocks)({ xcode: _appiumXcode2['default'], instrumentsUtils: _.instrumentsUtils }, function (mocks) {
    it('should work', function callee$2$0() {
      var instruments;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            instruments = new _.Instruments({});

            mocks.xcode.expects('getVersion').once().returns(_bluebird2['default'].resolve((0, _helpers.getXcodeVersion)()));
            mocks.xcode.expects('getAutomationTraceTemplatePath').once().returns(_bluebird2['default'].resolve('/a/b/c/d/tracetemplate'));
            mocks.instrumentsUtils.expects('getInstrumentsPath').once().returns(_bluebird2['default'].resolve('/a/b/c/instrumentspath'));
            context$3$0.next = 6;
            return _regeneratorRuntime.awrap(instruments.configure());

          case 6:
            instruments.xcodeVersion.versionString.should.equal((0, _helpers.getXcodeVersion)().versionString);
            instruments.template.should.equal('/a/b/c/d/tracetemplate');
            instruments.instrumentsPath.should.equal('/a/b/c/instrumentspath');
            (0, _appiumTestSupport.verify)(mocks);

          case 10:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  }));
  describe('spawnInstruments', (0, _appiumTestSupport.withMocks)({ fs: _appiumSupport.fs, tp: tp, instrumentsUtils: _.instrumentsUtils }, function (mocks) {
    it('should work', function callee$2$0() {
      var instruments;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            instruments = getInstruments();

            mocks.fs.expects('exists').once().returns(_bluebird2['default'].resolve(false));
            mocks.tp.expects('spawn').once().returns({});
            mocks.instrumentsUtils.expects('getIwdPath').once().returns(_bluebird2['default'].resolve('/a/b/c/iwd'));
            context$3$0.next = 6;
            return _regeneratorRuntime.awrap(instruments.spawnInstruments());

          case 6:
            (0, _appiumTestSupport.verify)(mocks);

          case 7:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should properly handle process arguments', function callee$2$0() {
      var instruments;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            instruments = getInstruments();

            instruments.processArguments = '-e firstoption firstoptionsarg -e secondoption second option arg';
            mocks.fs.expects('exists').once().returns(_bluebird2['default'].resolve(false));
            mocks.tp.expects('spawn').once().withArgs(_sinon2['default'].match(instruments.instrumentsPath),
            // sinon.match.string,
            ["-t", "/a/b/c/d/tracetemplate", "-D", "/tmp/appium-instruments/instrumentscli0.trace", undefined, "-e", "firstoption", "firstoptionsarg", "-e", "secondoption", "second option arg", "-e", "UIASCRIPT", undefined, "-e", "UIARESULTSPATH", "/tmp/appium-instruments"], _sinon2['default'].match.object).returns({});
            mocks.instrumentsUtils.expects('getIwdPath').once().returns(_bluebird2['default'].resolve('/a/b/c/iwd'));
            context$3$0.next = 7;
            return _regeneratorRuntime.awrap(instruments.spawnInstruments());

          case 7:

            (0, _appiumTestSupport.verify)(mocks);

          case 8:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should properly handle non-environment-variable process arguments', function callee$2$0() {
      var instruments;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            instruments = getInstruments();

            instruments.processArguments = 'some random process arguments';
            mocks.fs.expects('exists').once().returns(_bluebird2['default'].resolve(false));
            mocks.tp.expects('spawn').once().withArgs(_sinon2['default'].match(instruments.instrumentsPath),
            // sinon.match.string,
            ["-t", "/a/b/c/d/tracetemplate", "-D", "/tmp/appium-instruments/instrumentscli0.trace", undefined, "some random process arguments", "-e", "UIASCRIPT", undefined, "-e", "UIARESULTSPATH", "/tmp/appium-instruments"], _sinon2['default'].match.object).returns({});
            mocks.instrumentsUtils.expects('getIwdPath').once().returns(_bluebird2['default'].resolve('/a/b/c/iwd'));
            context$3$0.next = 7;
            return _regeneratorRuntime.awrap(instruments.spawnInstruments());

          case 7:

            (0, _appiumTestSupport.verify)(mocks);

          case 8:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should properly handle process arguments as hash', function callee$2$0() {
      var instruments;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            instruments = getInstruments();

            instruments.processArguments = { firstoption: 'firstoptionsarg', secondoption: 'second option arg' };
            mocks.fs.expects('exists').once().returns(_bluebird2['default'].resolve(false));
            mocks.tp.expects('spawn').once().withArgs(_sinon2['default'].match(instruments.instrumentsPath),
            // sinon.match.string,
            ["-t", "/a/b/c/d/tracetemplate", "-D", "/tmp/appium-instruments/instrumentscli0.trace", undefined, "-e", "firstoption", "firstoptionsarg", "-e", "secondoption", "second option arg", "-e", "UIASCRIPT", undefined, "-e", "UIARESULTSPATH", "/tmp/appium-instruments"], _sinon2['default'].match.object).returns({});
            mocks.instrumentsUtils.expects('getIwdPath').once().returns(_bluebird2['default'].resolve('/a/b/c/iwd'));
            context$3$0.next = 7;
            return _regeneratorRuntime.awrap(instruments.spawnInstruments());

          case 7:

            (0, _appiumTestSupport.verify)(mocks);

          case 8:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should add language and locale arguments when appropriate', function callee$2$0() {
      var instruments;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            instruments = getInstruments({ locale: "de_DE", language: "de" });

            instruments.processArguments = 'some random process arguments';
            mocks.fs.expects('exists').once().returns(_bluebird2['default'].resolve(false));
            mocks.tp.expects('spawn').once().withArgs(_sinon2['default'].match(instruments.instrumentsPath),
            // sinon.match.string,
            ["-t", "/a/b/c/d/tracetemplate", "-D", "/tmp/appium-instruments/instrumentscli0.trace", undefined, "some random process arguments", "-e", "UIASCRIPT", undefined, "-e", "UIARESULTSPATH", "/tmp/appium-instruments", "-AppleLanguages (de)", "-NSLanguages (de)", "-AppleLocale de_DE"], _sinon2['default'].match.object).returns({});
            mocks.instrumentsUtils.expects('getIwdPath').once().returns(_bluebird2['default'].resolve('/a/b/c/iwd'));
            context$3$0.next = 7;
            return _regeneratorRuntime.awrap(instruments.spawnInstruments());

          case 7:

            (0, _appiumTestSupport.verify)(mocks);

          case 8:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  }));
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QvdW5pdC9pbnN0cnVtZW50cy9pbnN0cnVtZW50cy1zcGVjcy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Z0JBRThDLFVBQVU7OzRCQUNwQyxjQUFjOztJQUF0QixFQUFFOztvQkFDRyxNQUFNOzs7OzJCQUNMLGNBQWM7Ozs7aUNBQ0UscUJBQXFCOzs2QkFDcEMsZ0JBQWdCOztxQkFDakIsT0FBTzs7Ozt3QkFDWCxVQUFVOzs7O3VCQUNRLFdBQVc7O0FBRzNDLGtCQUFLLE1BQU0sRUFBRSxDQUFDOztBQUVkLFFBQVEsQ0FBQyxhQUFhLEVBQUUsWUFBTTtBQUM1QixXQUFTLGNBQWMsR0FBYTtRQUFYLElBQUkseURBQUcsRUFBRTs7QUFDaEMsUUFBSSxXQUFXLEdBQUcsa0JBQWdCLElBQUksQ0FBQyxDQUFDO0FBQ3hDLGVBQVcsQ0FBQyxZQUFZLEdBQUcsK0JBQWlCLENBQUM7QUFDN0MsZUFBVyxDQUFDLFFBQVEsR0FBRyx3QkFBd0IsQ0FBQztBQUNoRCxlQUFXLENBQUMsZUFBZSxHQUFHLHdCQUF3QixDQUFDO0FBQ3ZELFdBQU8sV0FBVyxDQUFDO0dBQ3BCO0FBQ0QsVUFBUSxDQUFDLGlCQUFpQixFQUFFLGtDQUFVLEVBQUMsS0FBSywwQkFBQSxFQUFFLGdCQUFnQixvQkFBQSxFQUFDLEVBQUUsVUFBQyxLQUFLLEVBQUs7QUFDMUUsTUFBRSxDQUFDLDJCQUEyQixFQUFFO1VBYTFCLElBQUksRUFHSixXQUFXOzs7O0FBZmYsaUJBQUssQ0FBQyxLQUFLLENBQ1IsT0FBTyxDQUFDLFlBQVksQ0FBQyxDQUNyQixJQUFJLEVBQUUsQ0FDTixPQUFPLENBQUMsc0JBQUUsT0FBTyxDQUFDLCtCQUFpQixDQUFDLENBQUMsQ0FBQztBQUN6QyxpQkFBSyxDQUFDLEtBQUssQ0FDUixPQUFPLENBQUMsZ0NBQWdDLENBQUMsQ0FDekMsSUFBSSxFQUFFLENBQ04sT0FBTyxDQUFDLHNCQUFFLE9BQU8sQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDLENB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QVcsQ0FBQyxnQkFBZ0IsR0FBRywrQkFBK0IsQ0FBQztBQUMvRCxpQkFBSyxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDLHNCQUFFLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO0FBQzVELGlCQUFLLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FDN0IsUUFBUSxDQUNQLG1CQUFNLEtBQUssQ0FBQyxXQUFXLENBQUMsZUFBZSxDQUFDOztBQUV4QyxhQUFDLElBQUksRUFBRSx3QkFBd0IsRUFDOUIsSUFBSSxFQUFFLCtDQUErQyxFQUFFLFNBQVMsRUFDaEUsK0JBQStCLEVBQy9CLElBQUksRUFBRSxXQUFXLEVBQUUsU0FBUyxFQUM1QixJQUFJLEVBQUUsZ0JBQWdCLEVBQUUseUJBQXlCLEVBQ2pELHNCQUFzQixFQUN0QixtQkFBbUIsRUFDbkIsb0JBQW9CLENBQUMsRUFDdEIsbUJBQU0sS0FBSyxDQUFDLE1BQU0sQ0FDbkIsQ0FDQSxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDZixpQkFBSyxDQUFDLGdCQUFnQixDQUNuQixPQUFPLENBQUMsWUFBWSxDQUFDLENBQ3JCLElBQUksRUFBRSxDQUNOLE9BQU8sQ0FBQyxzQkFBRSxPQUFPLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQzs7NkNBQzlCLFdBQVcsQ0FBQyxnQkFBZ0IsRUFBRTs7OztBQUVwQywyQ0FBTyxLQUFLLENBQUMsQ0FBQzs7Ozs7OztLQUNmLENBQUMsQ0FBQztHQUNKLENBQUMsQ0FBQyxDQUFDO0NBQ0wsQ0FBQyxDQUFDIiwiZmlsZSI6InRlc3QvdW5pdC9pbnN0cnVtZW50cy9pbnN0cnVtZW50cy1zcGVjcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIHRyYW5zcGlsZTptb2NoYVxuXG5pbXBvcnQgeyBJbnN0cnVtZW50cywgaW5zdHJ1bWVudHNVdGlscyB9IGZyb20gJy4uLy4uLy4uJztcbmltcG9ydCAqIGFzIHRwIGZyb20gJ3RlZW5fcHJvY2Vzcyc7XG5pbXBvcnQgY2hhaSBmcm9tICdjaGFpJztcbmltcG9ydCB4Y29kZSBmcm9tICdhcHBpdW0teGNvZGUnO1xuaW1wb3J0IHsgd2l0aE1vY2tzLCB2ZXJpZnkgfSBmcm9tICdhcHBpdW0tdGVzdC1zdXBwb3J0JztcbmltcG9ydCB7IGZzIH0gZnJvbSAnYXBwaXVtLXN1cHBvcnQnO1xuaW1wb3J0IHNpbm9uIGZyb20gJ3Npbm9uJztcbmltcG9ydCBCIGZyb20gJ2JsdWViaXJkJztcbmltcG9ydCB7IGdldFhjb2RlVmVyc2lvbiB9IGZyb20gJy4vaGVscGVycyc7XG5cblxuY2hhaS5zaG91bGQoKTtcblxuZGVzY3JpYmUoJ2luc3RydW1lbnRzJywgKCkgPT4ge1xuICBmdW5jdGlvbiBnZXRJbnN0cnVtZW50cyAob3B0cyA9IHt9KSB7XG4gICAgbGV0IGluc3RydW1lbnRzID0gbmV3IEluc3RydW1lbnRzKG9wdHMpO1xuICAgIGluc3RydW1lbnRzLnhjb2RlVmVyc2lvbiA9IGdldFhjb2RlVmVyc2lvbigpO1xuICAgIGluc3RydW1lbnRzLnRlbXBsYXRlID0gJy9hL2IvYy9kL3RyYWNldGVtcGxhdGUnO1xuICAgIGluc3RydW1lbnRzLmluc3RydW1lbnRzUGF0aCA9ICcvYS9iL2MvaW5zdHJ1bWVudHNwYXRoJztcbiAgICByZXR1cm4gaW5zdHJ1bWVudHM7XG4gIH1cbiAgZGVzY3JpYmUoJ3F1aWNrSW5zdHJ1bWVudCcsIHdpdGhNb2Nrcyh7eGNvZGUsIGluc3RydW1lbnRzVXRpbHN9LCAobW9ja3MpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSBpbnN0cnVtZW50cycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tzLnhjb2RlXG4gICAgICAgIC5leHBlY3RzKCdnZXRWZXJzaW9uJylcbiAgICAgICAgLm9uY2UoKVxuICAgICAgICAucmV0dXJucyhCLnJlc29sdmUoZ2V0WGNvZGVWZXJzaW9uKCkpKTtcbiAgICAgIG1vY2tzLnhjb2RlXG4gICAgICAgIC5leHBlY3RzKCdnZXRBdXRvbWF0aW9uVHJhY2VUZW1wbGF0ZVBhdGgnKVxuICAgICAgICAub25jZSgpXG4gICAgICAgIC5yZXR1cm5zKEIucmVzb2x2ZSgnL2EvYi9jL2QvdHJhY2V0ZW1wbGF0ZScpKTtcbiAgICAgIG1vY2tzLmluc3RydW1lbnRzVXRpbHNcbiAgICAgICAgLmV4cGVjdHMoJ2dldEluc3RydW1lbnRzUGF0aCcpXG4gICAgICAgIC5vbmNlKClcbiAgICAgICAgLnJldHVybnMoQi5yZXNvbHZlKCcvYS9iL2MvaW5zdHJ1bWVudHNwYXRoJykpO1xuICAgICAgbGV0IG9wdHMgPSB7XG4gICAgICAgIGFwcDogJy9hL2IvYy9teS5hcHAnLFxuICAgICAgfTtcbiAgICAgIGxldCBpbnN0cnVtZW50cyA9IGF3YWl0IEluc3RydW1lbnRzLnF1aWNrSW5zdHJ1bWVudHMob3B0cyk7XG4gICAgICBpbnN0cnVtZW50cy5hcHAuc2hvdWxkLmVxdWFsKG9wdHMuYXBwKTtcbiAgICB9KTtcbiAgfSkpO1xuICBkZXNjcmliZSgnY29uc3RydWN0b3InLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgaW5zdHJ1bWVudHMnLCAoKSA9PiB7XG4gICAgICBsZXQgb3B0cyA9IHtcbiAgICAgICAgYXBwOiAnL2EvYi9jL215LmFwcCcsXG4gICAgICB9O1xuICAgICAgbGV0IGluc3RydW1lbnRzID0gbmV3IEluc3RydW1lbnRzKG9wdHMpO1xuICAgICAgaW5zdHJ1bWVudHMuYXBwLnNob3VsZC5lcXVhbChvcHRzLmFwcCk7XG4gICAgfSk7XG4gIH0pO1xuICBkZXNjcmliZSgnY29uZmlndXJlJywgd2l0aE1vY2tzKHt4Y29kZSwgaW5zdHJ1bWVudHNVdGlsc30sIChtb2NrcykgPT4ge1xuICAgIGl0KCdzaG91bGQgd29yaycsIGFzeW5jICgpID0+IHtcbiAgICAgIGxldCBpbnN0cnVtZW50cyA9IG5ldyBJbnN0cnVtZW50cyh7fSk7XG4gICAgICBtb2Nrcy54Y29kZVxuICAgICAgICAuZXhwZWN0cygnZ2V0VmVyc2lvbicpXG4gICAgICAgIC5vbmNlKClcbiAgICAgICAgLnJldHVybnMoQi5yZXNvbHZlKGdldFhjb2RlVmVyc2lvbigpKSk7XG4gICAgICBtb2Nrcy54Y29kZVxuICAgICAgICAuZXhwZWN0cygnZ2V0QXV0b21hdGlvblRyYWNlVGVtcGxhdGVQYXRoJylcbiAgICAgICAgLm9uY2UoKVxuICAgICAgICAucmV0dXJucyhCLnJlc29sdmUoJy9hL2IvYy9kL3RyYWNldGVtcGxhdGUnKSk7XG4gICAgICBtb2Nrcy5pbnN0cnVtZW50c1V0aWxzXG4gICAgICAgIC5leHBlY3RzKCdnZXRJbnN0cnVtZW50c1BhdGgnKVxuICAgICAgICAub25jZSgpXG4gICAgICAgIC5yZXR1cm5zKEIucmVzb2x2ZSgnL2EvYi9jL2luc3RydW1lbnRzcGF0aCcpKTtcbiAgICAgIGF3YWl0IGluc3RydW1lbnRzLmNvbmZpZ3VyZSgpO1xuICAgICAgaW5zdHJ1bWVudHMueGNvZGVWZXJzaW9uLnZlcnNpb25TdHJpbmcuc2hvdWxkLmVxdWFsKGdldFhjb2RlVmVyc2lvbigpLnZlcnNpb25TdHJpbmcpO1xuICAgICAgaW5zdHJ1bWVudHMudGVtcGxhdGUuc2hvdWxkLmVxdWFsKCcvYS9iL2MvZC90cmFjZXRlbXBsYXRlJyk7XG4gICAgICBpbnN0cnVtZW50cy5pbnN0cnVtZW50c1BhdGguc2hvdWxkLmVxdWFsKCcvYS9iL2MvaW5zdHJ1bWVudHNwYXRoJyk7XG4gICAgICB2ZXJpZnkobW9ja3MpO1xuICAgIH0pO1xuICB9KSk7XG4gIGRlc2NyaWJlKCdzcGF3bkluc3RydW1lbnRzJywgd2l0aE1vY2tzKHtmcywgdHAsIGluc3RydW1lbnRzVXRpbHN9LCAobW9ja3MpID0+IHtcbiAgICBpdCgnc2hvdWxkIHdvcmsnLCBhc3luYyAoKSA9PiB7XG4gICAgICBsZXQgaW5zdHJ1bWVudHMgPSBnZXRJbnN0cnVtZW50cygpO1xuICAgICAgbW9ja3MuZnMuZXhwZWN0cygnZXhpc3RzJykub25jZSgpLnJldHVybnMoQi5yZXNvbHZlKGZhbHNlKSk7XG4gICAgICBtb2Nrcy50cC5leHBlY3RzKCdzcGF3bicpLm9uY2UoKS5yZXR1cm5zKHt9KTtcbiAgICAgIG1vY2tzLmluc3RydW1lbnRzVXRpbHNcbiAgICAgICAgLmV4cGVjdHMoJ2dldEl3ZFBhdGgnKVxuICAgICAgICAub25jZSgpXG4gICAgICAgIC5yZXR1cm5zKEIucmVzb2x2ZSgnL2EvYi9jL2l3ZCcpKTtcbiAgICAgIGF3YWl0IGluc3RydW1lbnRzLnNwYXduSW5zdHJ1bWVudHMoKTtcbiAgICAgIHZlcmlmeShtb2Nrcyk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBwcm9wZXJseSBoYW5kbGUgcHJvY2VzcyBhcmd1bWVudHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBsZXQgaW5zdHJ1bWVudHMgPSBnZXRJbnN0cnVtZW50cygpO1xuICAgICAgaW5zdHJ1bWVudHMucHJvY2Vzc0FyZ3VtZW50cyA9ICctZSBmaXJzdG9wdGlvbiBmaXJzdG9wdGlvbnNhcmcgLWUgc2Vjb25kb3B0aW9uIHNlY29uZCBvcHRpb24gYXJnJztcbiAgICAgIG1vY2tzLmZzLmV4cGVjdHMoJ2V4aXN0cycpLm9uY2UoKS5yZXR1cm5zKEIucmVzb2x2ZShmYWxzZSkpO1xuICAgICAgbW9ja3MudHAuZXhwZWN0cygnc3Bhd24nKS5vbmNlKClcbiAgICAgICAgLndpdGhBcmdzKFxuICAgICAgICAgIHNpbm9uLm1hdGNoKGluc3RydW1lbnRzLmluc3RydW1lbnRzUGF0aCksXG4gICAgICAgICAgLy8gc2lub24ubWF0Y2guc3RyaW5nLFxuICAgICAgICAgIFtcIi10XCIsIFwiL2EvYi9jL2QvdHJhY2V0ZW1wbGF0ZVwiLFxuICAgICAgICAgICBcIi1EXCIsIFwiL3RtcC9hcHBpdW0taW5zdHJ1bWVudHMvaW5zdHJ1bWVudHNjbGkwLnRyYWNlXCIsIHVuZGVmaW5lZCxcbiAgICAgICAgICAgXCItZVwiLCBcImZpcnN0b3B0aW9uXCIsIFwiZmlyc3RvcHRpb25zYXJnXCIsXG4gICAgICAgICAgIFwiLWVcIiwgXCJzZWNvbmRvcHRpb25cIiwgXCJzZWNvbmQgb3B0aW9uIGFyZ1wiLFxuICAgICAgICAgICBcIi1lXCIsIFwiVUlBU0NSSVBUXCIsIHVuZGVmaW5lZCxcbiAgICAgICAgICAgXCItZVwiLCBcIlVJQVJFU1VMVFNQQVRIXCIsIFwiL3RtcC9hcHBpdW0taW5zdHJ1bWVudHNcIl0sXG4gICAgICAgICAgc2lub24ubWF0Y2gub2JqZWN0XG4gICAgICAgIClcbiAgICAgICAgLnJldHVybnMoe30pO1xuICAgICAgbW9ja3MuaW5zdHJ1bWVudHNVdGlsc1xuICAgICAgICAuZXhwZWN0cygnZ2V0SXdkUGF0aCcpXG4gICAgICAgIC5vbmNlKClcbiAgICAgICAgLnJldHVybnMoQi5yZXNvbHZlKCcvYS9iL2MvaXdkJykpO1xuICAgICAgYXdhaXQgaW5zdHJ1bWVudHMuc3Bhd25JbnN0cnVtZW50cygpO1xuXG4gICAgICB2ZXJpZnkobW9ja3MpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgcHJvcGVybHkgaGFuZGxlIG5vbi1lbnZpcm9ubWVudC12YXJpYWJsZSBwcm9jZXNzIGFyZ3VtZW50cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGxldCBpbnN0cnVtZW50cyA9IGdldEluc3RydW1lbnRzKCk7XG4gICAgICBpbnN0cnVtZW50cy5wcm9jZXNzQXJndW1lbnRzID0gJ3NvbWUgcmFuZG9tIHByb2Nlc3MgYXJndW1lbnRzJztcbiAgICAgIG1vY2tzLmZzLmV4cGVjdHMoJ2V4aXN0cycpLm9uY2UoKS5yZXR1cm5zKEIucmVzb2x2ZShmYWxzZSkpO1xuICAgICAgbW9ja3MudHAuZXhwZWN0cygnc3Bhd24nKS5vbmNlKClcbiAgICAgICAgLndpdGhBcmdzKFxuICAgICAgICAgIHNpbm9uLm1hdGNoKGluc3RydW1lbnRzLmluc3RydW1lbnRzUGF0aCksXG4gICAgICAgICAgLy8gc2lub24ubWF0Y2guc3RyaW5nLFxuICAgICAgICAgIFtcIi10XCIsIFwiL2EvYi9jL2QvdHJhY2V0ZW1wbGF0ZVwiLFxuICAgICAgICAgICBcIi1EXCIsIFwiL3RtcC9hcHBpdW0taW5zdHJ1bWVudHMvaW5zdHJ1bWVudHNjbGkwLnRyYWNlXCIsIHVuZGVmaW5lZCxcbiAgICAgICAgICAgXCJzb21lIHJhbmRvbSBwcm9jZXNzIGFyZ3VtZW50c1wiLFxuICAgICAgICAgICBcIi1lXCIsIFwiVUlBU0NSSVBUXCIsIHVuZGVmaW5lZCxcbiAgICAgICAgICAgXCItZVwiLCBcIlVJQVJFU1VMVFNQQVRIXCIsIFwiL3RtcC9hcHBpdW0taW5zdHJ1bWVudHNcIl0sXG4gICAgICAgICAgc2lub24ubWF0Y2gub2JqZWN0XG4gICAgICAgIClcbiAgICAgICAgLnJldHVybnMoe30pO1xuICAgICAgbW9ja3MuaW5zdHJ1bWVudHNVdGlsc1xuICAgICAgICAuZXhwZWN0cygnZ2V0SXdkUGF0aCcpXG4gICAgICAgIC5vbmNlKClcbiAgICAgICAgLnJldHVybnMoQi5yZXNvbHZlKCcvYS9iL2MvaXdkJykpO1xuICAgICAgYXdhaXQgaW5zdHJ1bWVudHMuc3Bhd25JbnN0cnVtZW50cygpO1xuXG4gICAgICB2ZXJpZnkobW9ja3MpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgcHJvcGVybHkgaGFuZGxlIHByb2Nlc3MgYXJndW1lbnRzIGFzIGhhc2gnLCBhc3luYyAoKSA9PiB7XG4gICAgICBsZXQgaW5zdHJ1bWVudHMgPSBnZXRJbnN0cnVtZW50cygpO1xuICAgICAgaW5zdHJ1bWVudHMucHJvY2Vzc0FyZ3VtZW50cyA9IHtmaXJzdG9wdGlvbjogJ2ZpcnN0b3B0aW9uc2FyZycsIHNlY29uZG9wdGlvbjogJ3NlY29uZCBvcHRpb24gYXJnJ307XG4gICAgICBtb2Nrcy5mcy5leHBlY3RzKCdleGlzdHMnKS5vbmNlKCkucmV0dXJucyhCLnJlc29sdmUoZmFsc2UpKTtcbiAgICAgIG1vY2tzLnRwLmV4cGVjdHMoJ3NwYXduJykub25jZSgpXG4gICAgICAgIC53aXRoQXJncyhcbiAgICAgICAgICBzaW5vbi5tYXRjaChpbnN0cnVtZW50cy5pbnN0cnVtZW50c1BhdGgpLFxuICAgICAgICAgIC8vIHNpbm9uLm1hdGNoLnN0cmluZyxcbiAgICAgICAgICBbXCItdFwiLCBcIi9hL2IvYy9kL3RyYWNldGVtcGxhdGVcIixcbiAgICAgICAgICAgXCItRFwiLCBcIi90bXAvYXBwaXVtLWluc3RydW1lbnRzL2luc3RydW1lbnRzY2xpMC50cmFjZVwiLCB1bmRlZmluZWQsXG4gICAgICAgICAgIFwiLWVcIiwgXCJmaXJzdG9wdGlvblwiLCBcImZpcnN0b3B0aW9uc2FyZ1wiLFxuICAgICAgICAgICBcIi1lXCIsIFwic2Vjb25kb3B0aW9uXCIsIFwic2Vjb25kIG9wdGlvbiBhcmdcIixcbiAgICAgICAgICAgXCItZVwiLCBcIlVJQVNDUklQVFwiLCB1bmRlZmluZWQsXG4gICAgICAgICAgIFwiLWVcIiwgXCJVSUFSRVNVTFRTUEFUSFwiLCBcIi90bXAvYXBwaXVtLWluc3RydW1lbnRzXCJdLFxuICAgICAgICAgIHNpbm9uLm1hdGNoLm9iamVjdFxuICAgICAgICApXG4gICAgICAgIC5yZXR1cm5zKHt9KTtcbiAgICAgIG1vY2tzLmluc3RydW1lbnRzVXRpbHNcbiAgICAgICAgLmV4cGVjdHMoJ2dldEl3ZFBhdGgnKVxuICAgICAgICAub25jZSgpXG4gICAgICAgIC5yZXR1cm5zKEIucmVzb2x2ZSgnL2EvYi9jL2l3ZCcpKTtcbiAgICAgIGF3YWl0IGluc3RydW1lbnRzLnNwYXduSW5zdHJ1bWVudHMoKTtcblxuICAgICAgdmVyaWZ5KG1vY2tzKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIGFkZCBsYW5ndWFnZSBhbmQgbG9jYWxlIGFyZ3VtZW50cyB3aGVuIGFwcHJvcHJpYXRlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbGV0IGluc3RydW1lbnRzID0gZ2V0SW5zdHJ1bWVudHMoe2xvY2FsZTogXCJkZV9ERVwiLCBsYW5ndWFnZTogXCJkZVwifSk7XG4gICAgICBpbnN0cnVtZW50cy5wcm9jZXNzQXJndW1lbnRzID0gJ3NvbWUgcmFuZG9tIHByb2Nlc3MgYXJndW1lbnRzJztcbiAgICAgIG1vY2tzLmZzLmV4cGVjdHMoJ2V4aXN0cycpLm9uY2UoKS5yZXR1cm5zKEIucmVzb2x2ZShmYWxzZSkpO1xuICAgICAgbW9ja3MudHAuZXhwZWN0cygnc3Bhd24nKS5vbmNlKClcbiAgICAgICAgLndpdGhBcmdzKFxuICAgICAgICAgIHNpbm9uLm1hdGNoKGluc3RydW1lbnRzLmluc3RydW1lbnRzUGF0aCksXG4gICAgICAgICAgLy8gc2lub24ubWF0Y2guc3RyaW5nLFxuICAgICAgICAgIFtcIi10XCIsIFwiL2EvYi9jL2QvdHJhY2V0ZW1wbGF0ZVwiLFxuICAgICAgICAgICBcIi1EXCIsIFwiL3RtcC9hcHBpdW0taW5zdHJ1bWVudHMvaW5zdHJ1bWVudHNjbGkwLnRyYWNlXCIsIHVuZGVmaW5lZCxcbiAgICAgICAgICAgXCJzb21lIHJhbmRvbSBwcm9jZXNzIGFyZ3VtZW50c1wiLFxuICAgICAgICAgICBcIi1lXCIsIFwiVUlBU0NSSVBUXCIsIHVuZGVmaW5lZCxcbiAgICAgICAgICAgXCItZVwiLCBcIlVJQVJFU1VMVFNQQVRIXCIsIFwiL3RtcC9hcHBpdW0taW5zdHJ1bWVudHNcIixcbiAgICAgICAgICAgXCItQXBwbGVMYW5ndWFnZXMgKGRlKVwiLFxuICAgICAgICAgICBcIi1OU0xhbmd1YWdlcyAoZGUpXCIsXG4gICAgICAgICAgIFwiLUFwcGxlTG9jYWxlIGRlX0RFXCJdLFxuICAgICAgICAgIHNpbm9uLm1hdGNoLm9iamVjdFxuICAgICAgICApXG4gICAgICAgIC5yZXR1cm5zKHt9KTtcbiAgICAgIG1vY2tzLmluc3RydW1lbnRzVXRpbHNcbiAgICAgICAgLmV4cGVjdHMoJ2dldEl3ZFBhdGgnKVxuICAgICAgICAub25jZSgpXG4gICAgICAgIC5yZXR1cm5zKEIucmVzb2x2ZSgnL2EvYi9jL2l3ZCcpKTtcbiAgICAgIGF3YWl0IGluc3RydW1lbnRzLnNwYXduSW5zdHJ1bWVudHMoKTtcblxuICAgICAgdmVyaWZ5KG1vY2tzKTtcbiAgICB9KTtcbiAgfSkpO1xufSk7XG4iXSwic291cmNlUm9vdCI6Ii4uLy4uLy4uLy4uIn0=

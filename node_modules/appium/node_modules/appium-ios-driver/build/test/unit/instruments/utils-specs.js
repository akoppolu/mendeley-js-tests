require('source-map-support').install();

'use strict';

var _regeneratorRuntime = require('babel-runtime/regenerator')['default'];

var _Object$keys = require('babel-runtime/core-js/object/keys')['default'];

var _interopRequireWildcard = require('babel-runtime/helpers/interop-require-wildcard')['default'];

var _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];

var _this = this;

var _ = require('../../..');

var _teen_process = require('teen_process');

var tp = _interopRequireWildcard(_teen_process);

var _appiumXcode = require('appium-xcode');

var _appiumXcode2 = _interopRequireDefault(_appiumXcode);

var _chai = require('chai');

var _chai2 = _interopRequireDefault(_chai);

var _chaiAsPromised = require('chai-as-promised');

var _chaiAsPromised2 = _interopRequireDefault(_chaiAsPromised);

var _appiumTestSupport = require('appium-test-support');

var _appiumSupport = require('appium-support');

var _bluebird = require('bluebird');

var _bluebird2 = _interopRequireDefault(_bluebird);

_chai2['default'].should();
_chai2['default'].use(_chaiAsPromised2['default']);

describe('utils', function () {
  describe('getInstrumentsPath', (0, _appiumTestSupport.withMocks)({ tp: tp }, function (mocks) {
    it('should retrieve path', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.tp.expects('exec').once().returns(_bluebird2['default'].resolve({ stdout: '/a/b/c/d\n', stderr: '' }));
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(_.instrumentsUtils.getInstrumentsPath());

          case 3:
            context$3$0.sent.should.equal('/a/b/c/d');

            (0, _appiumTestSupport.verify)(mocks);

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should throw an error if cannnot find Instruments', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.tp.expects('exec').once().throws(new Error('Instruments not found'));
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(_.instrumentsUtils.getInstrumentsPath().should.be.rejectedWith(/Could not find the instruments binary/));

          case 3:
            (0, _appiumTestSupport.verify)(mocks);

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  }));
  describe('getAvailableDevices', (0, _appiumTestSupport.withMocks)({ tp: tp }, function (mocks) {
    var xcodeVersions = {
      '8.1(8B62)': {
        instrumentsOutput: 'Known Devices:\ngalaxy [D633B2E7-6A48-5B2C-B9E4-A1525D3F1155]\nAngel (10.1.1) [xxxx]\nApple TV 1080p (10.0) [70D6BCBA-FCAD-4BBA-ADE9-B71757F4261F] (Simulator)\nApple Watch - 42mm (3.1) [C0E1D6CC-F1C8-4223-AC71-BB8A5182A1A8] (Simulator)\niPad 2 (9.3) [74266576-7E47-4BCB-B0D9-B11133B06A77] (Simulator)\niPad Air (10.1) [8B3934DB-350A-44A0-A8E2-1BC83E346309] (Simulator)\niPad Air 2 (10.1) [D9C1D938-D06D-4CDA-AB59-E16DC30ABD03] (Simulator)\niPad Pro (12.9 inch) (10.1) [9E0F7B13-1BCE-4E7C-9A89-8B19F9B99223] (Simulator)\niPad Pro (9.3) [B02F8899-AF72-40EA-B925-149B22BB72B2] (Simulator)\niPad Pro (9.7 inch) (10.1) [D4E6E5BC-F17F-4088-8FD4-58F07ECC6349] (Simulator)\niPad Retina (10.1) [2B6F522D-B7EA-4F74-811A-DB70B4E7CC7C] (Simulator)\niPad Retina (9.3) [EEAB60FD-3F39-43FE-B8DF-C1097CB22066] (Simulator)\niPhone 4s (9.3) [D61E60EE-25A8-49FA-ADEF-C05F7B737D1E] (Simulator)\niPhone 5 (10.1) [271D45F7-34F5-4F76-8E40-951842CF8F51] (Simulator)\niPhone 5 (9.3) [BF101A98-9FCF-4A4A-8484-F7FF1D575170] (Simulator)\niPhone 5s (10.1) [36F901CC-C539-442E-AEA6-CE87346CA8D7] (Simulator)\niPhone 5s (9.3) [D5C1064D-9543-4484-994E-4D1191587D3E] (Simulator)\niPhone 6 (10.1) [A9672FEC-2E64-4717-8DA1-3538751CCA8A] (Simulator)\niPhone 6 (9.3) [A65D1276-D09E-416A-9B55-C1FF91BE66B5] (Simulator)\niPhone 6 Plus (10.1) [58F617A9-C5F3-4AD0-A35C-F413F757645D] (Simulator)\niPhone 6 Plus (9.3) [805C5E84-CFF6-4E8B-A396-5A5EFBE93551] (Simulator)\niPhone 6s (10.1) [B760E290-B16D-44B9-ACBA-B3088E3FDE7A] (Simulator)\niPhone 6s (9.3) [FC002921-2164-4CEC-B131-CAC308EDD66A] (Simulator)\niPhone 6s Plus (10.1) [8D28052A-4694-4F3A-A988-37D2CC1EDBFC] (Simulator)\niPhone 6s Plus (9.3) [528BA7BD-887B-48EF-92AB-C1E1867C6970] (Simulator)\niPhone 7 (10.1) [F127C749-B3C8-467C-A6A2-1C556F66B1E9] (Simulator)\niPhone 7 (10.1) + Apple Watch Series 2 - 38mm (3.1) [FDBC436C-88D5-4B5D-ABD6-857D5B26C895] (Simulator)\niPhone 7 Plus (10.1) [70AE2D72-BF88-4033-B21E-838185E0EC3E] (Simulator)\niPhone 7 Plus (10.1) + Apple Watch Series 2 - 42mm (3.1) [368E0E6A-DBB0-4272-B242-B8031739E9A8] (Simulator)\niPhone SE (10.1) [1711A8A4-8733-4B37-BBCB-777F6A5B544B] (Simulator)',
        devices: ['Angel (10.1.1) [xxxx]', 'Apple TV 1080p (10.0) [70D6BCBA-FCAD-4BBA-ADE9-B71757F4261F] (Simulator)', 'Apple Watch - 42mm (3.1) [C0E1D6CC-F1C8-4223-AC71-BB8A5182A1A8] (Simulator)', 'iPad 2 (9.3) [74266576-7E47-4BCB-B0D9-B11133B06A77] (Simulator)', 'iPad Air (10.1) [8B3934DB-350A-44A0-A8E2-1BC83E346309] (Simulator)', 'iPad Air 2 (10.1) [D9C1D938-D06D-4CDA-AB59-E16DC30ABD03] (Simulator)', 'iPad Pro (12.9 inch) (10.1) [9E0F7B13-1BCE-4E7C-9A89-8B19F9B99223] (Simulator)', 'iPad Pro (9.3) [B02F8899-AF72-40EA-B925-149B22BB72B2] (Simulator)', 'iPad Pro (9.7 inch) (10.1) [D4E6E5BC-F17F-4088-8FD4-58F07ECC6349] (Simulator)', 'iPad Retina (10.1) [2B6F522D-B7EA-4F74-811A-DB70B4E7CC7C] (Simulator)', 'iPad Retina (9.3) [EEAB60FD-3F39-43FE-B8DF-C1097CB22066] (Simulator)', 'iPhone 4s (9.3) [D61E60EE-25A8-49FA-ADEF-C05F7B737D1E] (Simulator)', 'iPhone 5 (10.1) [271D45F7-34F5-4F76-8E40-951842CF8F51] (Simulator)', 'iPhone 5 (9.3) [BF101A98-9FCF-4A4A-8484-F7FF1D575170] (Simulator)', 'iPhone 5s (10.1) [36F901CC-C539-442E-AEA6-CE87346CA8D7] (Simulator)', 'iPhone 5s (9.3) [D5C1064D-9543-4484-994E-4D1191587D3E] (Simulator)', 'iPhone 6 (10.1) [A9672FEC-2E64-4717-8DA1-3538751CCA8A] (Simulator)', 'iPhone 6 (9.3) [A65D1276-D09E-416A-9B55-C1FF91BE66B5] (Simulator)', 'iPhone 6 Plus (10.1) [58F617A9-C5F3-4AD0-A35C-F413F757645D] (Simulator)', 'iPhone 6 Plus (9.3) [805C5E84-CFF6-4E8B-A396-5A5EFBE93551] (Simulator)', 'iPhone 6s (10.1) [B760E290-B16D-44B9-ACBA-B3088E3FDE7A] (Simulator)', 'iPhone 6s (9.3) [FC002921-2164-4CEC-B131-CAC308EDD66A] (Simulator)', 'iPhone 6s Plus (10.1) [8D28052A-4694-4F3A-A988-37D2CC1EDBFC] (Simulator)', 'iPhone 6s Plus (9.3) [528BA7BD-887B-48EF-92AB-C1E1867C6970] (Simulator)', 'iPhone 7 (10.1) [F127C749-B3C8-467C-A6A2-1C556F66B1E9] (Simulator)', 'iPhone 7 (10.1) + Apple Watch Series 2 - 38mm (3.1) [FDBC436C-88D5-4B5D-ABD6-857D5B26C895] (Simulator)', 'iPhone 7 Plus (10.1) [70AE2D72-BF88-4033-B21E-838185E0EC3E] (Simulator)', 'iPhone 7 Plus (10.1) + Apple Watch Series 2 - 42mm (3.1) [368E0E6A-DBB0-4272-B242-B8031739E9A8] (Simulator)', 'iPhone SE (10.1) [1711A8A4-8733-4B37-BBCB-777F6A5B544B] (Simulator)']
      },
      '7.3': {
        instrumentsOutput: 'Known Devices:\nINsaikrisv [C8476FF9-9BC4-5E52-AE3D-536A2E85D43B]\nAppiumParallel1 (9.2) [0120C306-95C1-4196-BC13-4196105EBEF9]\nApple TV 1080p (9.1) [C5957108-6BA4-4A98-9A83-4BED47EFF1BC]\niPad 2 (8.4) [B45264A0-551C-41A5-A636-8211C05D8003] (Simulator)\niPad 2 (9.2) [4444EB1E-BA48-4DFA-B16C-777171FCF3BC] (Simulator)\niPad Air (8.4) [F26279E7-8BAF-4D7B-ABFE-08D1AC364DCF] (Simulator)',
        devices: ['AppiumParallel1 (9.2) [0120C306-95C1-4196-BC13-4196105EBEF9]', 'Apple TV 1080p (9.1) [C5957108-6BA4-4A98-9A83-4BED47EFF1BC]', 'iPad 2 (8.4) [B45264A0-551C-41A5-A636-8211C05D8003] (Simulator)', 'iPad 2 (9.2) [4444EB1E-BA48-4DFA-B16C-777171FCF3BC] (Simulator)', 'iPad Air (8.4) [F26279E7-8BAF-4D7B-ABFE-08D1AC364DCF] (Simulator)']
      },
      '7.0-7.2': {
        instrumentsOutput: 'Known Devices:\nINsaikrisv [C8476FF9-9BC4-5E52-AE3D-536A2E85D43B]\nAppiumParallel1 (9.2) [0120C306-95C1-4196-BC13-4196105EBEF9]\nApple TV 1080p (9.1) [C5957108-6BA4-4A98-9A83-4BED47EFF1BC]\niPad 2 (8.4) [B45264A0-551C-41A5-A636-8211C05D8003]\niPad 2 (9.2) [4444EB1E-BA48-4DFA-B16C-777171FCF3BC]\niPad Air (8.4) [F26279E7-8BAF-4D7B-ABFE-08D1AC364DCF]',
        devices: ['AppiumParallel1 (9.2) [0120C306-95C1-4196-BC13-4196105EBEF9]', 'Apple TV 1080p (9.1) [C5957108-6BA4-4A98-9A83-4BED47EFF1BC]', 'iPad 2 (8.4) [B45264A0-551C-41A5-A636-8211C05D8003]', 'iPad 2 (9.2) [4444EB1E-BA48-4DFA-B16C-777171FCF3BC]', 'iPad Air (8.4) [F26279E7-8BAF-4D7B-ABFE-08D1AC364DCF]']
      },
      '6.0-6.4': {
        instrumentsOutput: 'Known Devices:\nINsaikrisv [C8476FF9-9BC4-5E52-AE3D-536A2E85D43B]\nAppiumParallel1 (8.4 Simulator) [0120C306-95C1-4196-BC13-4196105EBEF9]\nApple TV 1080p (8.4 Simulator) [C5957108-6BA4-4A98-9A83-4BED47EFF1BC]\niPad 2 (8.4 Simulator) [B45264A0-551C-41A5-A636-8211C05D8003]\niPad Air (8.2 Simulator) [F26279E7-8BAF-4D7B-ABFE-08D1AC364DCF]',
        devices: ['AppiumParallel1 (8.4 Simulator) [0120C306-95C1-4196-BC13-4196105EBEF9]', 'Apple TV 1080p (8.4 Simulator) [C5957108-6BA4-4A98-9A83-4BED47EFF1BC]', 'iPad 2 (8.4 Simulator) [B45264A0-551C-41A5-A636-8211C05D8003]', 'iPad Air (8.2 Simulator) [F26279E7-8BAF-4D7B-ABFE-08D1AC364DCF]']
      }
    };

    _Object$keys(xcodeVersions).forEach(function (version) {
      return it('should work for Xcode ' + version, function callee$3$0() {
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              mocks.tp.expects('exec').once().returns(_bluebird2['default'].resolve({ stdout: '/a/b/c/d\n', stderr: '' }));
              mocks.tp.expects('exec').once().returns(_bluebird2['default'].resolve({ stdout: xcodeVersions[version].instrumentsOutput, stderr: '' }));
              context$4$0.next = 4;
              return _regeneratorRuntime.awrap(_.instrumentsUtils.getAvailableDevices());

            case 4:
              context$4$0.t0 = xcodeVersions[version].devices;
              context$4$0.sent.should.deep.equal(context$4$0.t0);

              (0, _appiumTestSupport.verify)(mocks);

            case 7:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this);
      });
    });

    it('should throw an error when Instruments fails', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.tp.expects('exec').once().returns(_bluebird2['default'].resolve({ stdout: '/a/b/c/d\n', stderr: '' }));
            mocks.tp.expects('exec').once().throws(new Error('Instruments failed'));
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(_.instrumentsUtils.getAvailableDevices().should.be.rejectedWith(/Failed getting devices, err: Error: Instruments failed./));

          case 4:
            (0, _appiumTestSupport.verify)(mocks);

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  }));
  describe('killAllInstruments', (0, _appiumTestSupport.withMocks)({ tp: tp }, function (mocks) {
    it('should work', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.tp.expects('exec').once().returns(_bluebird2['default'].resolve({ stdout: '', stderr: '' }));
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(_.instrumentsUtils.killAllInstruments());

          case 3:
            (0, _appiumTestSupport.verify)(mocks);

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  }));
  describe('cleanAllTraces', (0, _appiumTestSupport.withMocks)({ fs: _appiumSupport.fs }, function (mocks) {
    (0, _appiumTestSupport.stubEnv)();
    it('should work', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            process.env.CLEAN_TRACES = 1;
            mocks.fs.expects('rimraf').once().returns(_bluebird2['default'].resolve({ stdout: '', stderr: '' }));
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(_.instrumentsUtils.cleanAllTraces());

          case 4:
            (0, _appiumTestSupport.verify)(mocks);

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  }));
  describe('parseLaunchTimeout', function () {
    (0, _appiumTestSupport.stubEnv)();
    it('should work', function () {
      _.instrumentsUtils.parseLaunchTimeout(90000).should.deep.equal({
        global: 90000 });
      _.instrumentsUtils.parseLaunchTimeout('90000').should.deep.equal({
        global: 90000 });
      _.instrumentsUtils.parseLaunchTimeout({ global: 90000, afterLaunch: 30000 }).should.deep.equal({
        global: 90000, afterLaunch: 30000 });
      _.instrumentsUtils.parseLaunchTimeout('{"global": 90000, "afterLaunch": 30000}').should.deep.equal({
        global: 90000, afterLaunch: 30000 });
    });
    it('should work with invalid JSON', function () {
      _.instrumentsUtils.parseLaunchTimeout('x').should.equal('x');
    });
  });
  describe('getIwdPath', (0, _appiumTestSupport.withMocks)({ fs: _appiumSupport.fs }, function (mocks) {
    it('should work when path is found', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.fs.expects('exists').once().returns(_bluebird2['default'].resolve(true));
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(_.instrumentsUtils.getIwdPath('10'));

          case 3:
            context$3$0.sent.should.match(/.*instruments-iwd\/iwd10/);

            (0, _appiumTestSupport.verify)(mocks);

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should work when path is not found', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.fs.expects('exists').once().returns(_bluebird2['default'].resolve(false));
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(_.instrumentsUtils.getIwdPath('10'));

          case 3:
            context$3$0.sent.should.match(/.*instruments-iwd\/iwd/);

            (0, _appiumTestSupport.verify)(mocks);

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  }));

  describe('quickLaunch', (0, _appiumTestSupport.withMocks)({ fs: _appiumSupport.fs, tp: tp, xcode: _appiumXcode2['default'], instrumentsUtils: _.instrumentsUtils }, function (mocks) {
    it('should remove trace directory', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.xcode.expects('getAutomationTraceTemplatePath').once().returns(_bluebird2['default'].resolve('/a/b/c/d/tracetemplate'));
            mocks.fs.expects('rimraf').once().returns(_bluebird2['default'].resolve());
            mocks.tp.expects('exec').once().withArgs('xcrun').returns(_bluebird2['default'].resolve({ stdout: '', stderr: '' }));
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(_.instrumentsUtils.quickLaunch());

          case 5:
            (0, _appiumTestSupport.verify)(mocks);

          case 6:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  }));

  describe('quickInstruments', (0, _appiumTestSupport.withMocks)({ xcode: _appiumXcode2['default'] }, function (mocks) {
    it('should create an Instruments object', function callee$2$0() {
      var inst;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(_.instrumentsUtils.quickInstruments({
              xcodeTraceTemplatePath: '/some/path'
            }));

          case 2:
            inst = context$3$0.sent;

            inst.should.be.an['instanceof'](_.Instruments);

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });

    it('should get xcode trace template if none supplied', function callee$2$0() {
      var inst;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.xcode.expects('getAutomationTraceTemplatePath').once().returns(_bluebird2['default'].resolve('/some/path'));
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(_.instrumentsUtils.quickInstruments());

          case 3:
            inst = context$3$0.sent;

            inst.template.should.equal('/some/path');

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  }));
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QvdW5pdC9pbnN0cnVtZW50cy91dGlscy1zcGVjcy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztnQkFFOEMsVUFBVTs7NEJBQ3BDLGNBQWM7O0lBQXRCLEVBQUU7OzJCQUNJLGNBQWM7Ozs7b0JBQ2YsTUFBTTs7Ozs4QkFDSSxrQkFBa0I7Ozs7aUNBQ0YscUJBQXFCOzs2QkFDN0MsZ0JBQWdCOzt3QkFDckIsVUFBVTs7OztBQUd4QixrQkFBSyxNQUFNLEVBQUUsQ0FBQztBQUNkLGtCQUFLLEdBQUcsNkJBQWdCLENBQUM7O0FBRXpCLFFBQVEsQ0FBQyxPQUFPLEVBQUUsWUFBTTtBQUN0QixVQUFRLENBQUMsb0JBQW9CLEVBQUUsa0NBQVUsRUFBQyxFQUFFLEVBQUYsRUFBRSxFQUFDLEVBQUUsVUFBQyxLQUFLLEVBQUs7QUFDeEQsTUFBRSxDQUFDLHNCQUFzQixFQUFFOzs7O0FBQ3pCLGlCQUFLLENBQUMsRUFBRSxDQUNMLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FDZixJQUFJLEVBQUUsQ0FDTixPQUFPLENBQUMsc0JBQUUsT0FBTyxDQUFDLEVBQUMsTUFBTSxFQUFFLFlBQVksRUFBRSxNQUFNLEVBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDOzs2Q0FDbkQsbUJBQWlCLGtCQUFrQixFQUFFOzs7NkJBQUUsTUFBTSxDQUFDLEtBQUssQ0FBQyxVQUFVOztBQUNyRSwyQ0FBTyxLQUFLLENBQUMsQ0FBQzs7Ozs7OztLQUNmLENBQUMsQ0FBQztBQUNILE1BQUUsQ0FBQyxtREFBbUQsRUFBRTs7OztBQUN0RCxpQkFBSyxDQUFDLEVBQUUsQ0FDTCxPQUFPLENBQUMsTUFBTSxDQUFDLENBQ2YsSUFBSSxFQUFFLENBQ04sTUFBTSxDQUFDLElBQUksS0FBSyxDQUFDLHVCQUF1QixDQUFDLENBQUMsQ0FBQzs7NkNBQ3hDLG1CQUFpQixrQkFBa0IsRUFBRSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsWUFBWSxDQUFDLHVDQUF1QyxD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dGlscy1zcGVjcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIHRyYW5zcGlsZTptb2NoYVxuXG5pbXBvcnQgeyBpbnN0cnVtZW50c1V0aWxzLCBJbnN0cnVtZW50cyB9IGZyb20gJy4uLy4uLy4uJztcbmltcG9ydCAqIGFzIHRwIGZyb20gJ3RlZW5fcHJvY2Vzcyc7XG5pbXBvcnQgeGNvZGUgZnJvbSAnYXBwaXVtLXhjb2RlJztcbmltcG9ydCBjaGFpIGZyb20gJ2NoYWknO1xuaW1wb3J0IGNoYWlBc1Byb21pc2VkIGZyb20gJ2NoYWktYXMtcHJvbWlzZWQnO1xuaW1wb3J0IHsgd2l0aE1vY2tzLCB2ZXJpZnksIHN0dWJFbnYgfSBmcm9tICdhcHBpdW0tdGVzdC1zdXBwb3J0JztcbmltcG9ydCB7IGZzIH0gZnJvbSAnYXBwaXVtLXN1cHBvcnQnO1xuaW1wb3J0IEIgZnJvbSAnYmx1ZWJpcmQnO1xuXG5cbmNoYWkuc2hvdWxkKCk7XG5jaGFpLnVzZShjaGFpQXNQcm9taXNlZCk7XG5cbmRlc2NyaWJlKCd1dGlscycsICgpID0+IHtcbiAgZGVzY3JpYmUoJ2dldEluc3RydW1lbnRzUGF0aCcsIHdpdGhNb2Nrcyh7dHB9LCAobW9ja3MpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHJpZXZlIHBhdGgnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2Nrcy50cFxuICAgICAgICAuZXhwZWN0cygnZXhlYycpXG4gICAgICAgIC5vbmNlKClcbiAgICAgICAgLnJldHVybnMoQi5yZXNvbHZlKHtzdGRvdXQ6ICcvYS9iL2MvZFxcbicsIHN0ZGVycjonJyB9KSk7XG4gICAgICAoYXdhaXQgaW5zdHJ1bWVudHNVdGlscy5nZXRJbnN0cnVtZW50c1BhdGgoKSkuc2hvdWxkLmVxdWFsKCcvYS9iL2MvZCcpO1xuICAgICAgdmVyaWZ5KG1vY2tzKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIHRocm93IGFuIGVycm9yIGlmIGNhbm5ub3QgZmluZCBJbnN0cnVtZW50cycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tzLnRwXG4gICAgICAgIC5leHBlY3RzKCdleGVjJylcbiAgICAgICAgLm9uY2UoKVxuICAgICAgICAudGhyb3dzKG5ldyBFcnJvcignSW5zdHJ1bWVudHMgbm90IGZvdW5kJykpO1xuICAgICAgYXdhaXQgaW5zdHJ1bWVudHNVdGlscy5nZXRJbnN0cnVtZW50c1BhdGgoKS5zaG91bGQuYmUucmVqZWN0ZWRXaXRoKC9Db3VsZCBub3QgZmluZCB0aGUgaW5zdHJ1bWVudHMgYmluYXJ5Lyk7XG4gICAgICB2ZXJpZnkobW9ja3MpO1xuICAgIH0pO1xuICB9KSk7XG4gIGRlc2NyaWJlKCdnZXRBdmFpbGFibGVEZXZpY2VzJywgd2l0aE1vY2tzKHt0cH0sIChtb2NrcykgPT4ge1xuICAgIGNvbnN0IHhjb2RlVmVyc2lvbnMgPSB7XG4gICAgICAnOC4xKDhCNjIpJzoge1xuICAgICAgICBpbnN0cnVtZW50c091dHB1dDpcbmBLbm93biBEZXZpY2VzOlxuZ2FsYXh5IFtENjMzQjJFNy02QTQ4LTVCMkMtQjlFNC1BMTUyNUQzRjExNTVdXG5BbmdlbCAoMTAuMS4xKSBbeHh4eF1cbkFwcGxlIFRWIDEwODBwICgxMC4wKSBbNzBENkJDQkEtRkNBRC00QkJBLUFERTktQjcxNzU3RjQyNjFGXSAoU2ltdWxhdG9yKVxuQXBwbGUgV2F0Y2ggLSA0Mm1tICgzLjEpIFtDMEUxRDZDQy1GMUM4LTQyMjMtQUM3MS1CQjhBNTE4MkExQThdIChTaW11bGF0b3IpXG5pUGFkIDIgKDkuMykgWzc0MjY2NTc2LTdFNDctNEJDQi1CMEQ5LUIxMTEzM0IwNkE3N10gKFNpbXVsYXRvcilcbmlQYWQgQWlyICgxMC4xKSBbOEIzOTM0REItMzUwQS00NEEwLUE4RTItMUJDODNFMzQ2MzA5XSAoU2ltdWxhdG9yKVxuaVBhZCBBaXIgMiAoMTAuMSkgW0Q5QzFEOTM4LUQwNkQtNENEQS1BQjU5LUUxNkRDMzBBQkQwM10gKFNpbXVsYXRvcilcbmlQYWQgUHJvICgxMi45IGluY2gpICgxMC4xKSBbOUUwRjdCMTMtMUJDRS00RTdDLTlBODktOEIxOUY5Qjk5MjIzXSAoU2ltdWxhdG9yKVxuaVBhZCBQcm8gKDkuMykgW0IwMkY4ODk5LUFGNzItNDBFQS1COTI1LTE0OUIyMkJCNzJCMl0gKFNpbXVsYXRvcilcbmlQYWQgUHJvICg5LjcgaW5jaCkgKDEwLjEpIFtENEU2RTVCQy1GMTdGLTQwODgtOEZENC01OEYwN0VDQzYzNDldIChTaW11bGF0b3IpXG5pUGFkIFJldGluYSAoMTAuMSkgWzJCNkY1MjJELUI3RUEtNEY3NC04MTFBLURCNzBCNEU3Q0M3Q10gKFNpbXVsYXRvcilcbmlQYWQgUmV0aW5hICg5LjMpIFtFRUFCNjBGRC0zRjM5LTQzRkUtQjhERi1DMTA5N0NCMjIwNjZdIChTaW11bGF0b3IpXG5pUGhvbmUgNHMgKDkuMykgW0Q2MUU2MEVFLTI1QTgtNDlGQS1BREVGLUMwNUY3QjczN0QxRV0gKFNpbXVsYXRvcilcbmlQaG9uZSA1ICgxMC4xKSBbMjcxRDQ1RjctMzRGNS00Rjc2LThFNDAtOTUxODQyQ0Y4RjUxXSAoU2ltdWxhdG9yKVxuaVBob25lIDUgKDkuMykgW0JGMTAxQTk4LTlGQ0YtNEE0QS04NDg0LUY3RkYxRDU3NTE3MF0gKFNpbXVsYXRvcilcbmlQaG9uZSA1cyAoMTAuMSkgWzM2RjkwMUNDLUM1MzktNDQyRS1BRUE2LUNFODczNDZDQThEN10gKFNpbXVsYXRvcilcbmlQaG9uZSA1cyAoOS4zKSBbRDVDMTA2NEQtOTU0My00NDg0LTk5NEUtNEQxMTkxNTg3RDNFXSAoU2ltdWxhdG9yKVxuaVBob25lIDYgKDEwLjEpIFtBOTY3MkZFQy0yRTY0LTQ3MTctOERBMS0zNTM4NzUxQ0NBOEFdIChTaW11bGF0b3IpXG5pUGhvbmUgNiAoOS4zKSBbQTY1RDEyNzYtRDA5RS00MTZBLTlCNTUtQzFGRjkxQkU2NkI1XSAoU2ltdWxhdG9yKVxuaVBob25lIDYgUGx1cyAoMTAuMSkgWzU4RjYxN0E5LUM1RjMtNEFEMC1BMzVDLUY0MTNGNzU3NjQ1RF0gKFNpbXVsYXRvcilcbmlQaG9uZSA2IFBsdXMgKDkuMykgWzgwNUM1RTg0LUNGRjYtNEU4Qi1BMzk2LTVBNUVGQkU5MzU1MV0gKFNpbXVsYXRvcilcbmlQaG9uZSA2cyAoMTAuMSkgW0I3NjBFMjkwLUIxNkQtNDRCOS1BQ0JBLUIzMDg4RTNGREU3QV0gKFNpbXVsYXRvcilcbmlQaG9uZSA2cyAoOS4zKSBbRkMwMDI5MjEtMjE2NC00Q0VDLUIxMzEtQ0FDMzA4RURENjZBXSAoU2ltdWxhdG9yKVxuaVBob25lIDZzIFBsdXMgKDEwLjEpIFs4RDI4MDUyQS00Njk0LTRGM0EtQTk4OC0zN0QyQ0MxRURCRkNdIChTaW11bGF0b3IpXG5pUGhvbmUgNnMgUGx1cyAoOS4zKSBbNTI4QkE3QkQtODg3Qi00OEVGLTkyQUItQzFFMTg2N0M2OTcwXSAoU2ltdWxhdG9yKVxuaVBob25lIDcgKDEwLjEpIFtGMTI3Qzc0OS1CM0M4LTQ2N0MtQTZBMi0xQzU1NkY2NkIxRTldIChTaW11bGF0b3IpXG5pUGhvbmUgNyAoMTAuMSkgKyBBcHBsZSBXYXRjaCBTZXJpZXMgMiAtIDM4bW0gKDMuMSkgW0ZEQkM0MzZDLTg4RDUtNEI1RC1BQkQ2LTg1N0Q1QjI2Qzg5NV0gKFNpbXVsYXRvcilcbmlQaG9uZSA3IFBsdXMgKDEwLjEpIFs3MEFFMkQ3Mi1CRjg4LTQwMzMtQjIxRS04MzgxODVFMEVDM0VdIChTaW11bGF0b3IpXG5pUGhvbmUgNyBQbHVzICgxMC4xKSArIEFwcGxlIFdhdGNoIFNlcmllcyAyIC0gNDJtbSAoMy4xKSBbMzY4RTBFNkEtREJCMC00MjcyLUIyNDItQjgwMzE3MzlFOUE4XSAoU2ltdWxhdG9yKVxuaVBob25lIFNFICgxMC4xKSBbMTcxMUE4QTQtODczMy00QjM3LUJCQ0ItNzc3RjZBNUI1NDRCXSAoU2ltdWxhdG9yKWAsXG4gICAgICAgIGRldmljZXM6IFtcbiAgICAgICAgICAnQW5nZWwgKDEwLjEuMSkgW3h4eHhdJyxcbiAgICAgICAgICAnQXBwbGUgVFYgMTA4MHAgKDEwLjApIFs3MEQ2QkNCQS1GQ0FELTRCQkEtQURFOS1CNzE3NTdGNDI2MUZdIChTaW11bGF0b3IpJyxcbiAgICAgICAgICAnQXBwbGUgV2F0Y2ggLSA0Mm1tICgzLjEpIFtDMEUxRDZDQy1GMUM4LTQyMjMtQUM3MS1CQjhBNTE4MkExQThdIChTaW11bGF0b3IpJyxcbiAgICAgICAgICAnaVBhZCAyICg5LjMpIFs3NDI2NjU3Ni03RTQ3LTRCQ0ItQjBEOS1CMTExMzNCMDZBNzddIChTaW11bGF0b3IpJyxcbiAgICAgICAgICAnaVBhZCBBaXIgKDEwLjEpIFs4QjM5MzREQi0zNTBBLTQ0QTAtQThFMi0xQkM4M0UzNDYzMDldIChTaW11bGF0b3IpJyxcbiAgICAgICAgICAnaVBhZCBBaXIgMiAoMTAuMSkgW0Q5QzFEOTM4LUQwNkQtNENEQS1BQjU5LUUxNkRDMzBBQkQwM10gKFNpbXVsYXRvciknLFxuICAgICAgICAgICdpUGFkIFBybyAoMTIuOSBpbmNoKSAoMTAuMSkgWzlFMEY3QjEzLTFCQ0UtNEU3Qy05QTg5LThCMTlGOUI5OTIyM10gKFNpbXVsYXRvciknLFxuICAgICAgICAgICdpUGFkIFBybyAoOS4zKSBbQjAyRjg4OTktQUY3Mi00MEVBLUI5MjUtMTQ5QjIyQkI3MkIyXSAoU2ltdWxhdG9yKScsXG4gICAgICAgICAgJ2lQYWQgUHJvICg5LjcgaW5jaCkgKDEwLjEpIFtENEU2RTVCQy1GMTdGLTQwODgtOEZENC01OEYwN0VDQzYzNDldIChTaW11bGF0b3IpJyxcbiAgICAgICAgICAnaVBhZCBSZXRpbmEgKDEwLjEpIFsyQjZGNTIyRC1CN0VBLTRGNzQtODExQS1EQjcwQjRFN0NDN0NdIChTaW11bGF0b3IpJyxcbiAgICAgICAgICAnaVBhZCBSZXRpbmEgKDkuMykgW0VFQUI2MEZELTNGMzktNDNGRS1COERGLUMxMDk3Q0IyMjA2Nl0gKFNpbXVsYXRvciknLFxuICAgICAgICAgICdpUGhvbmUgNHMgKDkuMykgW0Q2MUU2MEVFLTI1QTgtNDlGQS1BREVGLUMwNUY3QjczN0QxRV0gKFNpbXVsYXRvciknLFxuICAgICAgICAgICdpUGhvbmUgNSAoMTAuMSkgWzI3MUQ0NUY3LTM0RjUtNEY3Ni04RTQwLTk1MTg0MkNGOEY1MV0gKFNpbXVsYXRvciknLFxuICAgICAgICAgICdpUGhvbmUgNSAoOS4zKSBbQkYxMDFBOTgtOUZDRi00QTRBLTg0ODQtRjdGRjFENTc1MTcwXSAoU2ltdWxhdG9yKScsXG4gICAgICAgICAgJ2lQaG9uZSA1cyAoMTAuMSkgWzM2RjkwMUNDLUM1MzktNDQyRS1BRUE2LUNFODczNDZDQThEN10gKFNpbXVsYXRvciknLFxuICAgICAgICAgICdpUGhvbmUgNXMgKDkuMykgW0Q1QzEwNjRELTk1NDMtNDQ4NC05OTRFLTREMTE5MTU4N0QzRV0gKFNpbXVsYXRvciknLFxuICAgICAgICAgICdpUGhvbmUgNiAoMTAuMSkgW0E5NjcyRkVDLTJFNjQtNDcxNy04REExLTM1Mzg3NTFDQ0E4QV0gKFNpbXVsYXRvciknLFxuICAgICAgICAgICdpUGhvbmUgNiAoOS4zKSBbQTY1RDEyNzYtRDA5RS00MTZBLTlCNTUtQzFGRjkxQkU2NkI1XSAoU2ltdWxhdG9yKScsXG4gICAgICAgICAgJ2lQaG9uZSA2IFBsdXMgKDEwLjEpIFs1OEY2MTdBOS1DNUYzLTRBRDAtQTM1Qy1GNDEzRjc1NzY0NURdIChTaW11bGF0b3IpJyxcbiAgICAgICAgICAnaVBob25lIDYgUGx1cyAoOS4zKSBbODA1QzVFODQtQ0ZGNi00RThCLUEzOTYtNUE1RUZCRTkzNTUxXSAoU2ltdWxhdG9yKScsXG4gICAgICAgICAgJ2lQaG9uZSA2cyAoMTAuMSkgW0I3NjBFMjkwLUIxNkQtNDRCOS1BQ0JBLUIzMDg4RTNGREU3QV0gKFNpbXVsYXRvciknLFxuICAgICAgICAgICdpUGhvbmUgNnMgKDkuMykgW0ZDMDAyOTIxLTIxNjQtNENFQy1CMTMxLUNBQzMwOEVERDY2QV0gKFNpbXVsYXRvciknLFxuICAgICAgICAgICdpUGhvbmUgNnMgUGx1cyAoMTAuMSkgWzhEMjgwNTJBLTQ2OTQtNEYzQS1BOTg4LTM3RDJDQzFFREJGQ10gKFNpbXVsYXRvciknLFxuICAgICAgICAgICdpUGhvbmUgNnMgUGx1cyAoOS4zKSBbNTI4QkE3QkQtODg3Qi00OEVGLTkyQUItQzFFMTg2N0M2OTcwXSAoU2ltdWxhdG9yKScsXG4gICAgICAgICAgJ2lQaG9uZSA3ICgxMC4xKSBbRjEyN0M3NDktQjNDOC00NjdDLUE2QTItMUM1NTZGNjZCMUU5XSAoU2ltdWxhdG9yKScsXG4gICAgICAgICAgJ2lQaG9uZSA3ICgxMC4xKSArIEFwcGxlIFdhdGNoIFNlcmllcyAyIC0gMzhtbSAoMy4xKSBbRkRCQzQzNkMtODhENS00QjVELUFCRDYtODU3RDVCMjZDODk1XSAoU2ltdWxhdG9yKScsXG4gICAgICAgICAgJ2lQaG9uZSA3IFBsdXMgKDEwLjEpIFs3MEFFMkQ3Mi1CRjg4LTQwMzMtQjIxRS04MzgxODVFMEVDM0VdIChTaW11bGF0b3IpJyxcbiAgICAgICAgICAnaVBob25lIDcgUGx1cyAoMTAuMSkgKyBBcHBsZSBXYXRjaCBTZXJpZXMgMiAtIDQybW0gKDMuMSkgWzM2OEUwRTZBLURCQjAtNDI3Mi1CMjQyLUI4MDMxNzM5RTlBOF0gKFNpbXVsYXRvciknLFxuICAgICAgICAgICdpUGhvbmUgU0UgKDEwLjEpIFsxNzExQThBNC04NzMzLTRCMzctQkJDQi03NzdGNkE1QjU0NEJdIChTaW11bGF0b3IpJ1xuICAgICAgICBdXG4gICAgICB9LFxuICAgICAgJzcuMyc6IHtcbiAgICAgICAgaW5zdHJ1bWVudHNPdXRwdXQ6XG5gS25vd24gRGV2aWNlczpcbklOc2Fpa3Jpc3YgW0M4NDc2RkY5LTlCQzQtNUU1Mi1BRTNELTUzNkEyRTg1RDQzQl1cbkFwcGl1bVBhcmFsbGVsMSAoOS4yKSBbMDEyMEMzMDYtOTVDMS00MTk2LUJDMTMtNDE5NjEwNUVCRUY5XVxuQXBwbGUgVFYgMTA4MHAgKDkuMSkgW0M1OTU3MTA4LTZCQTQtNEE5OC05QTgzLTRCRUQ0N0VGRjFCQ11cbmlQYWQgMiAoOC40KSBbQjQ1MjY0QTAtNTUxQy00MUE1LUE2MzYtODIxMUMwNUQ4MDAzXSAoU2ltdWxhdG9yKVxuaVBhZCAyICg5LjIpIFs0NDQ0RUIxRS1CQTQ4LTRERkEtQjE2Qy03NzcxNzFGQ0YzQkNdIChTaW11bGF0b3IpXG5pUGFkIEFpciAoOC40KSBbRjI2Mjc5RTctOEJBRi00RDdCLUFCRkUtMDhEMUFDMzY0RENGXSAoU2ltdWxhdG9yKWAsXG4gICAgICAgIGRldmljZXM6IFtcbiAgICAgICAgICAnQXBwaXVtUGFyYWxsZWwxICg5LjIpIFswMTIwQzMwNi05NUMxLTQxOTYtQkMxMy00MTk2MTA1RUJFRjldJyxcbiAgICAgICAgICAnQXBwbGUgVFYgMTA4MHAgKDkuMSkgW0M1OTU3MTA4LTZCQTQtNEE5OC05QTgzLTRCRUQ0N0VGRjFCQ10nLFxuICAgICAgICAgICdpUGFkIDIgKDguNCkgW0I0NTI2NEEwLTU1MUMtNDFBNS1BNjM2LTgyMTFDMDVEODAwM10gKFNpbXVsYXRvciknLFxuICAgICAgICAgICdpUGFkIDIgKDkuMikgWzQ0NDRFQjFFLUJBNDgtNERGQS1CMTZDLTc3NzE3MUZDRjNCQ10gKFNpbXVsYXRvciknLFxuICAgICAgICAgICdpUGFkIEFpciAoOC40KSBbRjI2Mjc5RTctOEJBRi00RDdCLUFCRkUtMDhEMUFDMzY0RENGXSAoU2ltdWxhdG9yKSdcbiAgICAgICAgXVxuICAgICAgfSxcbiAgICAgICc3LjAtNy4yJzoge1xuICAgICAgICBpbnN0cnVtZW50c091dHB1dDpcbmBLbm93biBEZXZpY2VzOlxuSU5zYWlrcmlzdiBbQzg0NzZGRjktOUJDNC01RTUyLUFFM0QtNTM2QTJFODVENDNCXVxuQXBwaXVtUGFyYWxsZWwxICg5LjIpIFswMTIwQzMwNi05NUMxLTQxOTYtQkMxMy00MTk2MTA1RUJFRjldXG5BcHBsZSBUViAxMDgwcCAoOS4xKSBbQzU5NTcxMDgtNkJBNC00QTk4LTlBODMtNEJFRDQ3RUZGMUJDXVxuaVBhZCAyICg4LjQpIFtCNDUyNjRBMC01NTFDLTQxQTUtQTYzNi04MjExQzA1RDgwMDNdXG5pUGFkIDIgKDkuMikgWzQ0NDRFQjFFLUJBNDgtNERGQS1CMTZDLTc3NzE3MUZDRjNCQ11cbmlQYWQgQWlyICg4LjQpIFtGMjYyNzlFNy04QkFGLTREN0ItQUJGRS0wOEQxQUMzNjREQ0ZdYCxcbiAgICAgICAgZGV2aWNlczogW1xuICAgICAgICAgICdBcHBpdW1QYXJhbGxlbDEgKDkuMikgWzAxMjBDMzA2LTk1QzEtNDE5Ni1CQzEzLTQxOTYxMDVFQkVGOV0nLFxuICAgICAgICAgICdBcHBsZSBUViAxMDgwcCAoOS4xKSBbQzU5NTcxMDgtNkJBNC00QTk4LTlBODMtNEJFRDQ3RUZGMUJDXScsXG4gICAgICAgICAgJ2lQYWQgMiAoOC40KSBbQjQ1MjY0QTAtNTUxQy00MUE1LUE2MzYtODIxMUMwNUQ4MDAzXScsXG4gICAgICAgICAgJ2lQYWQgMiAoOS4yKSBbNDQ0NEVCMUUtQkE0OC00REZBLUIxNkMtNzc3MTcxRkNGM0JDXScsXG4gICAgICAgICAgJ2lQYWQgQWlyICg4LjQpIFtGMjYyNzlFNy04QkFGLTREN0ItQUJGRS0wOEQxQUMzNjREQ0ZdJ1xuICAgICAgICBdXG4gICAgICB9LFxuICAgICAgJzYuMC02LjQnOiB7XG4gICAgICAgIGluc3RydW1lbnRzT3V0cHV0OlxuYEtub3duIERldmljZXM6XG5JTnNhaWtyaXN2IFtDODQ3NkZGOS05QkM0LTVFNTItQUUzRC01MzZBMkU4NUQ0M0JdXG5BcHBpdW1QYXJhbGxlbDEgKDguNCBTaW11bGF0b3IpIFswMTIwQzMwNi05NUMxLTQxOTYtQkMxMy00MTk2MTA1RUJFRjldXG5BcHBsZSBUViAxMDgwcCAoOC40IFNpbXVsYXRvcikgW0M1OTU3MTA4LTZCQTQtNEE5OC05QTgzLTRCRUQ0N0VGRjFCQ11cbmlQYWQgMiAoOC40IFNpbXVsYXRvcikgW0I0NTI2NEEwLTU1MUMtNDFBNS1BNjM2LTgyMTFDMDVEODAwM11cbmlQYWQgQWlyICg4LjIgU2ltdWxhdG9yKSBbRjI2Mjc5RTctOEJBRi00RDdCLUFCRkUtMDhEMUFDMzY0RENGXWAsXG4gICAgICAgIGRldmljZXM6IFtcbiAgICAgICAgICAnQXBwaXVtUGFyYWxsZWwxICg4LjQgU2ltdWxhdG9yKSBbMDEyMEMzMDYtOTVDMS00MTk2LUJDMTMtNDE5NjEwNUVCRUY5XScsXG4gICAgICAgICAgJ0FwcGxlIFRWIDEwODBwICg4LjQgU2ltdWxhdG9yKSBbQzU5NTcxMDgtNkJBNC00QTk4LTlBODMtNEJFRDQ3RUZGMUJDXScsXG4gICAgICAgICAgJ2lQYWQgMiAoOC40IFNpbXVsYXRvcikgW0I0NTI2NEEwLTU1MUMtNDFBNS1BNjM2LTgyMTFDMDVEODAwM10nLFxuICAgICAgICAgICdpUGFkIEFpciAoOC4yIFNpbXVsYXRvcikgW0YyNjI3OUU3LThCQUYtNEQ3Qi1BQkZFLTA4RDFBQzM2NERDRl0nXG4gICAgICAgIF1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgT2JqZWN0LmtleXMoeGNvZGVWZXJzaW9ucykuZm9yRWFjaCgodmVyc2lvbikgPT5cbiAgICAgIGl0KGBzaG91bGQgd29yayBmb3IgWGNvZGUgJHt2ZXJzaW9ufWAsIGFzeW5jICgpID0+IHtcbiAgICAgICAgbW9ja3MudHBcbiAgICAgICAgICAuZXhwZWN0cygnZXhlYycpXG4gICAgICAgICAgLm9uY2UoKVxuICAgICAgICAgIC5yZXR1cm5zKEIucmVzb2x2ZSh7c3Rkb3V0OiAnL2EvYi9jL2RcXG4nLCBzdGRlcnI6JycgfSkpO1xuICAgICAgICBtb2Nrcy50cFxuICAgICAgICAgIC5leHBlY3RzKCdleGVjJylcbiAgICAgICAgICAub25jZSgpXG4gICAgICAgICAgLnJldHVybnMoQi5yZXNvbHZlKHtzdGRvdXQ6IHhjb2RlVmVyc2lvbnNbdmVyc2lvbl0uaW5zdHJ1bWVudHNPdXRwdXQsIHN0ZGVycjonJyB9KSk7XG4gICAgICAgIChhd2FpdCBpbnN0cnVtZW50c1V0aWxzLmdldEF2YWlsYWJsZURldmljZXMoKSkuc2hvdWxkLmRlZXAuZXF1YWwoeGNvZGVWZXJzaW9uc1t2ZXJzaW9uXS5kZXZpY2VzKTtcbiAgICAgICAgdmVyaWZ5KG1vY2tzKTtcbiAgICAgIH0pXG4gICAgKTtcblxuICAgIGl0KCdzaG91bGQgdGhyb3cgYW4gZXJyb3Igd2hlbiBJbnN0cnVtZW50cyBmYWlscycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tzLnRwXG4gICAgICAgIC5leHBlY3RzKCdleGVjJylcbiAgICAgICAgLm9uY2UoKVxuICAgICAgICAucmV0dXJucyhCLnJlc29sdmUoe3N0ZG91dDogJy9hL2IvYy9kXFxuJywgc3RkZXJyOicnIH0pKTtcbiAgICAgIG1vY2tzLnRwXG4gICAgICAgIC5leHBlY3RzKCdleGVjJylcbiAgICAgICAgLm9uY2UoKVxuICAgICAgICAudGhyb3dzKG5ldyBFcnJvcignSW5zdHJ1bWVudHMgZmFpbGVkJykpO1xuICAgICAgYXdhaXQgaW5zdHJ1bWVudHNVdGlscy5nZXRBdmFpbGFibGVEZXZpY2VzKCkuc2hvdWxkLmJlLnJlamVjdGVkV2l0aCgvRmFpbGVkIGdldHRpbmcgZGV2aWNlcywgZXJyOiBFcnJvcjogSW5zdHJ1bWVudHMgZmFpbGVkLi8pO1xuICAgICAgdmVyaWZ5KG1vY2tzKTtcbiAgICB9KTtcbiAgfSkpO1xuICBkZXNjcmliZSgna2lsbEFsbEluc3RydW1lbnRzJywgd2l0aE1vY2tzKHt0cH0sIChtb2NrcykgPT4ge1xuICAgIGl0KCdzaG91bGQgd29yaycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tzLnRwXG4gICAgICAgIC5leHBlY3RzKCdleGVjJylcbiAgICAgICAgLm9uY2UoKVxuICAgICAgICAucmV0dXJucyhCLnJlc29sdmUoe3N0ZG91dDogJycsIHN0ZGVycjonJyB9KSk7XG4gICAgICBhd2FpdCBpbnN0cnVtZW50c1V0aWxzLmtpbGxBbGxJbnN0cnVtZW50cygpO1xuICAgICAgdmVyaWZ5KG1vY2tzKTtcbiAgICB9KTtcbiAgfSkpO1xuICBkZXNjcmliZSgnY2xlYW5BbGxUcmFjZXMnLCB3aXRoTW9ja3Moe2ZzfSwgKG1vY2tzKSA9PiB7XG4gICAgc3R1YkVudigpO1xuICAgIGl0KCdzaG91bGQgd29yaycsIGFzeW5jICgpID0+IHtcbiAgICAgIHByb2Nlc3MuZW52LkNMRUFOX1RSQUNFUyA9IDE7XG4gICAgICBtb2Nrcy5mc1xuICAgICAgICAuZXhwZWN0cygncmltcmFmJylcbiAgICAgICAgLm9uY2UoKVxuICAgICAgICAucmV0dXJucyhCLnJlc29sdmUoe3N0ZG91dDogJycsIHN0ZGVycjonJyB9KSk7XG4gICAgICBhd2FpdCBpbnN0cnVtZW50c1V0aWxzLmNsZWFuQWxsVHJhY2VzKCk7XG4gICAgICB2ZXJpZnkobW9ja3MpO1xuICAgIH0pO1xuICB9KSk7XG4gIGRlc2NyaWJlKCdwYXJzZUxhdW5jaFRpbWVvdXQnLCAoKSA9PiB7XG4gICAgc3R1YkVudigpO1xuICAgIGl0KCdzaG91bGQgd29yaycsICgpID0+IHtcbiAgICAgIGluc3RydW1lbnRzVXRpbHMucGFyc2VMYXVuY2hUaW1lb3V0KDkwMDAwKS5zaG91bGQuZGVlcC5lcXVhbCh7XG4gICAgICAgIGdsb2JhbDogOTAwMDAgfSk7XG4gICAgICBpbnN0cnVtZW50c1V0aWxzLnBhcnNlTGF1bmNoVGltZW91dCgnOTAwMDAnKS5zaG91bGQuZGVlcC5lcXVhbCh7XG4gICAgICAgIGdsb2JhbDogOTAwMDAgfSk7XG4gICAgICBpbnN0cnVtZW50c1V0aWxzLnBhcnNlTGF1bmNoVGltZW91dCh7Z2xvYmFsOiA5MDAwMCwgYWZ0ZXJMYXVuY2g6IDMwMDAwfSkuc2hvdWxkLmRlZXAuZXF1YWwoe1xuICAgICAgICBnbG9iYWw6IDkwMDAwLCBhZnRlckxhdW5jaDogMzAwMDAgfSk7XG4gICAgICBpbnN0cnVtZW50c1V0aWxzLnBhcnNlTGF1bmNoVGltZW91dCgne1wiZ2xvYmFsXCI6IDkwMDAwLCBcImFmdGVyTGF1bmNoXCI6IDMwMDAwfScpLnNob3VsZC5kZWVwLmVxdWFsKHtcbiAgICAgICAgZ2xvYmFsOiA5MDAwMCwgYWZ0ZXJMYXVuY2g6IDMwMDAwIH0pO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgd29yayB3aXRoIGludmFsaWQgSlNPTicsICgpID0+IHtcbiAgICAgIGluc3RydW1lbnRzVXRpbHMucGFyc2VMYXVuY2hUaW1lb3V0KCd4Jykuc2hvdWxkLmVxdWFsKCd4Jyk7XG4gICAgfSk7XG4gIH0pO1xuICBkZXNjcmliZSgnZ2V0SXdkUGF0aCcsIHdpdGhNb2Nrcyh7ZnN9LCAobW9ja3MpID0+IHtcbiAgICBpdCgnc2hvdWxkIHdvcmsgd2hlbiBwYXRoIGlzIGZvdW5kJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja3MuZnNcbiAgICAgICAgLmV4cGVjdHMoJ2V4aXN0cycpXG4gICAgICAgIC5vbmNlKClcbiAgICAgICAgLnJldHVybnMoQi5yZXNvbHZlKHRydWUpKTtcbiAgICAgIChhd2FpdCBpbnN0cnVtZW50c1V0aWxzLmdldEl3ZFBhdGgoJzEwJykpLnNob3VsZC5tYXRjaChcbiAgICAgICAgLy4qaW5zdHJ1bWVudHMtaXdkXFwvaXdkMTAvKTtcbiAgICAgIHZlcmlmeShtb2Nrcyk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCB3b3JrIHdoZW4gcGF0aCBpcyBub3QgZm91bmQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2Nrcy5mc1xuICAgICAgICAuZXhwZWN0cygnZXhpc3RzJylcbiAgICAgICAgLm9uY2UoKVxuICAgICAgICAucmV0dXJucyhCLnJlc29sdmUoZmFsc2UpKTtcbiAgICAgIChhd2FpdCBpbnN0cnVtZW50c1V0aWxzLmdldEl3ZFBhdGgoJzEwJykpLnNob3VsZC5tYXRjaChcbiAgICAgICAgLy4qaW5zdHJ1bWVudHMtaXdkXFwvaXdkLyk7XG4gICAgICB2ZXJpZnkobW9ja3MpO1xuICAgIH0pO1xuICB9KSk7XG5cbiAgZGVzY3JpYmUoJ3F1aWNrTGF1bmNoJywgd2l0aE1vY2tzKHtmcywgdHAsIHhjb2RlLCBpbnN0cnVtZW50c1V0aWxzfSwgKG1vY2tzKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZW1vdmUgdHJhY2UgZGlyZWN0b3J5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja3MueGNvZGVcbiAgICAgICAgLmV4cGVjdHMoJ2dldEF1dG9tYXRpb25UcmFjZVRlbXBsYXRlUGF0aCcpXG4gICAgICAgIC5vbmNlKClcbiAgICAgICAgLnJldHVybnMoQi5yZXNvbHZlKCcvYS9iL2MvZC90cmFjZXRlbXBsYXRlJykpO1xuICAgICAgbW9ja3MuZnNcbiAgICAgICAgLmV4cGVjdHMoJ3JpbXJhZicpXG4gICAgICAgIC5vbmNlKClcbiAgICAgICAgLnJldHVybnMoQi5yZXNvbHZlKCkpO1xuICAgICAgbW9ja3MudHBcbiAgICAgICAgLmV4cGVjdHMoJ2V4ZWMnKVxuICAgICAgICAub25jZSgpXG4gICAgICAgIC53aXRoQXJncygneGNydW4nKVxuICAgICAgICAucmV0dXJucyhCLnJlc29sdmUoe3N0ZG91dDogJycsIHN0ZGVycjonJyB9KSk7XG4gICAgICBhd2FpdCBpbnN0cnVtZW50c1V0aWxzLnF1aWNrTGF1bmNoKCk7XG4gICAgICB2ZXJpZnkobW9ja3MpO1xuICAgIH0pO1xuICB9KSk7XG5cbiAgZGVzY3JpYmUoJ3F1aWNrSW5zdHJ1bWVudHMnLCB3aXRoTW9ja3Moe3hjb2RlfSwgKG1vY2tzKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgYW4gSW5zdHJ1bWVudHMgb2JqZWN0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgbGV0IGluc3QgPSBhd2FpdCBpbnN0cnVtZW50c1V0aWxzLnF1aWNrSW5zdHJ1bWVudHMoe1xuICAgICAgICB4Y29kZVRyYWNlVGVtcGxhdGVQYXRoOiAnL3NvbWUvcGF0aCdcbiAgICAgIH0pO1xuICAgICAgaW5zdC5zaG91bGQuYmUuYW4uaW5zdGFuY2VvZihJbnN0cnVtZW50cyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGdldCB4Y29kZSB0cmFjZSB0ZW1wbGF0ZSBpZiBub25lIHN1cHBsaWVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja3MueGNvZGVcbiAgICAgICAgLmV4cGVjdHMoJ2dldEF1dG9tYXRpb25UcmFjZVRlbXBsYXRlUGF0aCcpXG4gICAgICAgIC5vbmNlKClcbiAgICAgICAgLnJldHVybnMoQi5yZXNvbHZlKCcvc29tZS9wYXRoJykpO1xuICAgICAgbGV0IGluc3QgPSBhd2FpdCBpbnN0cnVtZW50c1V0aWxzLnF1aWNrSW5zdHJ1bWVudHMoKTtcbiAgICAgIGluc3QudGVtcGxhdGUuc2hvdWxkLmVxdWFsKCcvc29tZS9wYXRoJyk7XG4gICAgfSk7XG4gIH0pKTtcbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIuLi8uLi8uLi8uLiJ9

'use strict';

var _regeneratorRuntime = require('babel-runtime/regenerator')['default'];

Object.defineProperty(exports, '__esModule', {
  value: true
});

var _helpers = require('./helpers');

function contextTests() {
  var _this = this;

  describe('contexts, webviews, frames', function () {
    var driver = undefined;
    (0, _helpers.initSession)(_helpers.DEFAULT_CAPS).then(function (d) {
      driver = d;
    });
    it('should get current context', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(driver.currentContext().should.eventually.become('NATIVE_APP'));

          case 2:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should get contexts', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(driver.contexts().should.eventually.become(['NATIVE_APP', 'WEBVIEW_1']));

          case 2:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should not set context that is not there', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(driver.context('WEBVIEW_FOO').should.eventually.be.rejectedWith(/35/));

          case 2:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should set context', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(driver.context('WEBVIEW_1').currentContext().should.eventually.become('WEBVIEW_1'));

          case 2:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should find webview elements in a webview', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(driver.elementByXPath('//*').getTagName().should.eventually.become('html'));

          case 2:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should not switch to a frame that is not there', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(driver.frame('foo').should.eventually.be.rejectedWith(/8/));

          case 2:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should switch to an iframe', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(driver.frame('iframe1').title().should.eventually.become('Test iFrame'));

          case 2:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should switch back to default frame', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(driver.frame(null).title().should.eventually.become('Test Webview'));

          case 2:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should go back to native context', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(driver.context('NATIVE_APP').elementByXPath('//*').getTagName().should.eventually.become('app'));

          case 2:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should not set a frame in a native context', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(driver.frame('iframe1').should.eventually.be.rejectedWith(/36/));

          case 2:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  });
}

exports['default'] = contextTests;
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;charset=utf8;base64,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ZXN0cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGluaXRTZXNzaW9uLCBERUZBVUxUX0NBUFMgfSBmcm9tICcuL2hlbHBlcnMnO1xuXG5mdW5jdGlvbiBjb250ZXh0VGVzdHMgKCkge1xuICBkZXNjcmliZSgnY29udGV4dHMsIHdlYnZpZXdzLCBmcmFtZXMnLCAoKSA9PiB7XG4gICAgbGV0IGRyaXZlcjtcbiAgICBpbml0U2Vzc2lvbihERUZBVUxUX0NBUFMpLnRoZW4oKGQpID0+IHsgZHJpdmVyID0gZDsgfSk7XG4gICAgaXQoJ3Nob3VsZCBnZXQgY3VycmVudCBjb250ZXh0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgZHJpdmVyLmN1cnJlbnRDb250ZXh0KClcbiAgICAgICAgICAgICAgLnNob3VsZC5ldmVudHVhbGx5LmJlY29tZSgnTkFUSVZFX0FQUCcpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgZ2V0IGNvbnRleHRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgZHJpdmVyLmNvbnRleHRzKClcbiAgICAgICAgICAgICAgLnNob3VsZC5ldmVudHVhbGx5LmJlY29tZShbJ05BVElWRV9BUFAnLCAnV0VCVklFV18xJ10pO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgbm90IHNldCBjb250ZXh0IHRoYXQgaXMgbm90IHRoZXJlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgZHJpdmVyLmNvbnRleHQoJ1dFQlZJRVdfRk9PJylcbiAgICAgICAgICAgICAgLnNob3VsZC5ldmVudHVhbGx5LmJlLnJlamVjdGVkV2l0aCgvMzUvKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIHNldCBjb250ZXh0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgZHJpdmVyLmNvbnRleHQoJ1dFQlZJRVdfMScpLmN1cnJlbnRDb250ZXh0KClcbiAgICAgICAgICAgICAgLnNob3VsZC5ldmVudHVhbGx5LmJlY29tZSgnV0VCVklFV18xJyk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBmaW5kIHdlYnZpZXcgZWxlbWVudHMgaW4gYSB3ZWJ2aWV3JywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgZHJpdmVyLmVsZW1lbnRCeVhQYXRoKCcvLyonKS5nZXRUYWdOYW1lKClcbiAgICAgICAgICAgICAgLnNob3VsZC5ldmVudHVhbGx5LmJlY29tZSgnaHRtbCcpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgbm90IHN3aXRjaCB0byBhIGZyYW1lIHRoYXQgaXMgbm90IHRoZXJlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgZHJpdmVyLmZyYW1lKCdmb28nKS5zaG91bGQuZXZlbnR1YWxseS5iZS5yZWplY3RlZFdpdGgoLzgvKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIHN3aXRjaCB0byBhbiBpZnJhbWUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBkcml2ZXIuZnJhbWUoJ2lmcmFtZTEnKS50aXRsZSgpXG4gICAgICAgICAgICAgIC5zaG91bGQuZXZlbnR1YWxseS5iZWNvbWUoJ1Rlc3QgaUZyYW1lJyk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBzd2l0Y2ggYmFjayB0byBkZWZhdWx0IGZyYW1lJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgZHJpdmVyLmZyYW1lKG51bGwpLnRpdGxlKClcbiAgICAgICAgICAgICAgLnNob3VsZC5ldmVudHVhbGx5LmJlY29tZSgnVGVzdCBXZWJ2aWV3Jyk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBnbyBiYWNrIHRvIG5hdGl2ZSBjb250ZXh0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgZHJpdmVyLmNvbnRleHQoJ05BVElWRV9BUFAnKS5lbGVtZW50QnlYUGF0aCgnLy8qJykuZ2V0VGFnTmFtZSgpXG4gICAgICAgICAgICAgIC5zaG91bGQuZXZlbnR1YWxseS5iZWNvbWUoJ2FwcCcpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgbm90IHNldCBhIGZyYW1lIGluIGEgbmF0aXZlIGNvbnRleHQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBkcml2ZXIuZnJhbWUoJ2lmcmFtZTEnKS5zaG91bGQuZXZlbnR1YWxseS5iZS5yZWplY3RlZFdpdGgoLzM2Lyk7XG4gICAgfSk7XG4gIH0pO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjb250ZXh0VGVzdHM7XG4iXSwic291cmNlUm9vdCI6Ii4uLy4uIn0=

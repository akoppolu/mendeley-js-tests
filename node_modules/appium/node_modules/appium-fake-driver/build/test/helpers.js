'use strict';

var _regeneratorRuntime = require('babel-runtime/regenerator')['default'];

var _Promise = require('babel-runtime/core-js/promise')['default'];

var _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];

Object.defineProperty(exports, '__esModule', {
  value: true
});

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

var _wd = require('wd');

var _wd2 = _interopRequireDefault(_wd);

var TEST_HOST = 'localhost';
var TEST_PORT = 4774;
var TEST_APP = _path2['default'].resolve(__dirname, "..", "..", "test", "fixtures", "app.xml");

var DEFAULT_CAPS = { platformName: 'Fake', deviceName: 'Fake', app: TEST_APP };

function initSession(caps) {
  var _this = this;

  var resolve = function resolve() {};
  var driver = undefined;
  before(function callee$1$0() {
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          driver = _wd2['default'].promiseChainRemote({ host: TEST_HOST, port: TEST_PORT });
          context$2$0.next = 3;
          return _regeneratorRuntime.awrap(driver.init(caps));

        case 3:
          resolve(driver);

        case 4:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });
  after(function callee$1$0() {
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(driver.quit());

        case 2:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });
  return new _Promise(function (_resolve) {
    resolve = _resolve;
  });
}

exports.initSession = initSession;
exports.TEST_APP = TEST_APP;
exports.TEST_HOST = TEST_HOST;
exports.TEST_PORT = TEST_PORT;
exports.DEFAULT_CAPS = DEFAULT_CAPS;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QvaGVscGVycy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7b0JBQWlCLE1BQU07Ozs7a0JBQ1IsSUFBSTs7OztBQUVuQixJQUFNLFNBQVMsR0FBRyxXQUFXLENBQUM7QUFDOUIsSUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDO0FBQ3ZCLElBQU0sUUFBUSxHQUFHLGtCQUFLLE9BQU8sQ0FBQyxTQUFTLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFLFNBQVMsQ0FBQyxDQUFDOztBQUVwRixJQUFNLFlBQVksR0FBRyxFQUFDLFlBQVksRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUUsUUFBUSxFQUFDLENBQUM7O0FBRS9FLFNBQVMsV0FBVyxDQUFFLElBQUksRUFBRTs7O0FBQzFCLE1BQUksT0FBTyxHQUFHLG1CQUFNLEVBQUUsQ0FBQztBQUN2QixNQUFJLE1BQU0sWUFBQSxDQUFDO0FBQ1gsUUFBTSxDQUFDOzs7O0FBQ0wsZ0JBQU0sR0FBRyxnQkFBRyxrQkFBa0IsQ0FBQyxFQUFDLElBQUksRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFFLFNBQVMsRUFBQyxDQUFDLENBQUM7OzJDQUM3RCxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQzs7O0FBQ3ZCLGlCQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7Ozs7Ozs7R0FDakIsQ0FBQyxDQUFDO0FBQ0gsT0FBSyxDQUFDOzs7OzsyQ0FDRSxNQUFNLENBQUMsSUFBSSxFQUFFOzs7Ozs7O0dBQ3BCLENBQUMsQ0FBQztBQUNILFNBQU8sYUFBWSxVQUFDLFFBQVEsRUFBSztBQUMvQixXQUFPLEdBQUcsUUFBUSxDQUFDO0dBQ3BCLENBQUMsQ0FBQztDQUNKOztRQUVRLFdBQVcsR0FBWCxXQUFXO1FBQUUsUUFBUSxHQUFSLFFBQVE7UUFBRSxTQUFTLEdBQVQsU0FBUztRQUFFLFNBQVMsR0FBVCxTQUFTO1FBQUUsWUFBWSxHQUFaLFlBQVkiLCJmaWxlIjoidGVzdC9oZWxwZXJzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgd2QgZnJvbSAnd2QnO1xuXG5jb25zdCBURVNUX0hPU1QgPSAnbG9jYWxob3N0JztcbmNvbnN0IFRFU1RfUE9SVCA9IDQ3NzQ7XG5jb25zdCBURVNUX0FQUCA9IHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsIFwiLi5cIiwgXCIuLlwiLCBcInRlc3RcIiwgXCJmaXh0dXJlc1wiLCBcImFwcC54bWxcIik7XG5cbmNvbnN0IERFRkFVTFRfQ0FQUyA9IHtwbGF0Zm9ybU5hbWU6ICdGYWtlJywgZGV2aWNlTmFtZTogJ0Zha2UnLCBhcHA6IFRFU1RfQVBQfTtcblxuZnVuY3Rpb24gaW5pdFNlc3Npb24gKGNhcHMpIHtcbiAgbGV0IHJlc29sdmUgPSAoKSA9PiB7fTtcbiAgbGV0IGRyaXZlcjtcbiAgYmVmb3JlKGFzeW5jICgpID0+IHtcbiAgICBkcml2ZXIgPSB3ZC5wcm9taXNlQ2hhaW5SZW1vdGUoe2hvc3Q6IFRFU1RfSE9TVCwgcG9ydDogVEVTVF9QT1JUfSk7XG4gICAgYXdhaXQgZHJpdmVyLmluaXQoY2Fwcyk7XG4gICAgcmVzb2x2ZShkcml2ZXIpO1xuICB9KTtcbiAgYWZ0ZXIoYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IGRyaXZlci5xdWl0KCk7XG4gIH0pO1xuICByZXR1cm4gbmV3IFByb21pc2UoKF9yZXNvbHZlKSA9PiB7XG4gICAgcmVzb2x2ZSA9IF9yZXNvbHZlO1xuICB9KTtcbn1cblxuZXhwb3J0IHsgaW5pdFNlc3Npb24sIFRFU1RfQVBQLCBURVNUX0hPU1QsIFRFU1RfUE9SVCwgREVGQVVMVF9DQVBTIH07XG4iXSwic291cmNlUm9vdCI6Ii4uLy4uIn0=

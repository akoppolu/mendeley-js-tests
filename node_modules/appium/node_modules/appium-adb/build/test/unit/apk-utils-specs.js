'use strict';

var _slicedToArray = require('babel-runtime/helpers/sliced-to-array')['default'];

var _regeneratorRuntime = require('babel-runtime/regenerator')['default'];

var _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];

var _interopRequireWildcard = require('babel-runtime/helpers/interop-require-wildcard')['default'];

var _this = this;

var _chai = require('chai');

var _chai2 = _interopRequireDefault(_chai);

var _chaiAsPromised = require('chai-as-promised');

var _chaiAsPromised2 = _interopRequireDefault(_chaiAsPromised);

var _teen_process = require('teen_process');

var teen_process = _interopRequireWildcard(_teen_process);

var _appiumSupport = require('appium-support');

var _ = require('../..');

var _2 = _interopRequireDefault(_);

var _appiumTestSupport = require('appium-test-support');

_chai2['default'].use(_chaiAsPromised2['default']);
var should = _chai2['default'].should(),
    pkg = 'com.example.android.contactmanager',
    uri = 'content://contacts/people/1',
    act = '.ContactManager',
    startAppOptions = { stopApp: true, action: 'action', category: 'cat',
  flags: 'flags', pkg: 'pkg', activity: 'act',
  optionalIntentArguments: '-x options -y option argument -z option arg with spaces' },
    cmd = ['am', 'start', '-W', '-n', 'pkg/act', '-S', '-a', 'action', '-c', 'cat', '-f', 'flags', '-x', 'options', '-y', 'option', 'argument', '-z', 'option', 'arg with spaces'],
    language = 'en',
    country = 'US',
    locale = 'en-US';

describe('Apk-utils', function () {
  var adb = new _2['default']();
  describe('isAppInstalled', (0, _appiumTestSupport.withMocks)({ adb: adb }, function (mocks) {
    it('should parse correctly and return true', function callee$2$0() {
      var pkg;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            pkg = 'dummy.package';

            mocks.adb.expects('shell').once().withExactArgs(['pm', 'list', 'packages', pkg]).returns('package:' + pkg);
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(adb.isAppInstalled(pkg));

          case 4:
            context$3$0.sent.should.be['true'];

            mocks.adb.verify();

          case 6:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should parse correctly and return false', function callee$2$0() {
      var pkg;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            pkg = 'dummy.package';

            mocks.adb.expects('shell').once().withExactArgs(['pm', 'list', 'packages', pkg]).returns("");
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(adb.isAppInstalled(pkg));

          case 4:
            context$3$0.sent.should.be['false'];

            mocks.adb.verify();

          case 6:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  }));
  describe('getFocusedPackageAndActivity', (0, _appiumTestSupport.withMocks)({ adb: adb }, function (mocks) {
    it('should parse correctly and return package and activity', function callee$2$0() {
      var _ref, appPackage, appActivity;

      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('shell').once().withExactArgs(['dumpsys', 'window', 'windows']).returns('mFocusedApp=AppWindowToken{38600b56 token=Token{9ea1171 ' + ('ActivityRecord{2 u ' + pkg + '/' + act + ' t181}}}'));

            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(adb.getFocusedPackageAndActivity());

          case 3:
            _ref = context$3$0.sent;
            appPackage = _ref.appPackage;
            appActivity = _ref.appActivity;

            appPackage.should.equal(pkg);
            appActivity.should.equal(act);
            mocks.adb.verify();

          case 9:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should parse correctly and return package and activity when a comma is present', function callee$2$0() {
      var _ref2, appPackage, appActivity;

      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('shell').once().withExactArgs(['dumpsys', 'window', 'windows']).returns('mFocusedApp=AppWindowToken{20fe217e token=Token{21878739 ' + ('ActivityRecord{16425300 u0 ' + pkg + '/' + act + ', isShadow:false t10}}}'));

            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(adb.getFocusedPackageAndActivity());

          case 3:
            _ref2 = context$3$0.sent;
            appPackage = _ref2.appPackage;
            appActivity = _ref2.appActivity;

            appPackage.should.equal(pkg);
            appActivity.should.equal(act);
            mocks.adb.verify();

          case 9:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should parse correctly and return null', function callee$2$0() {
      var _ref3, appPackage, appActivity;

      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('shell').once().withExactArgs(['dumpsys', 'window', 'windows']).returns('mFocusedApp=null');
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(adb.getFocusedPackageAndActivity());

          case 3:
            _ref3 = context$3$0.sent;
            appPackage = _ref3.appPackage;
            appActivity = _ref3.appActivity;

            should.not.exist(appPackage);
            should.not.exist(appActivity);
            mocks.adb.verify();

          case 9:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  }));
  describe('waitForActivityOrNot', (0, _appiumTestSupport.withMocks)({ adb: adb }, function (mocks) {
    it('should call shell once and should return', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('shell').once().withExactArgs(['dumpsys', 'window', 'windows']).returns('mFocusedApp=AppWindowToken{38600b56 token=Token{9ea1171 ' + ('ActivityRecord{2 u ' + pkg + '/' + act + ' t181}}}'));

            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(adb.waitForActivityOrNot(pkg, act, false));

          case 3:
            mocks.adb.verify();

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should call shell multiple times and return', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('shell').onCall(0).returns('mFocusedApp=AppWindowToken{38600b56 token=Token{9ea1171 ' + 'ActivityRecord{2c7c4318 u0 foo/bar t181}}}');
            mocks.adb.expects('shell').returns('mFocusedApp=AppWindowToken{38600b56 token=Token{9ea1171 ' + 'ActivityRecord{2c7c4318 u0 com.example.android.contactmanager/.ContactManager t181}}}');

            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(adb.waitForActivityOrNot(pkg, act, false));

          case 4:
            mocks.adb.verify();

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should call shell once return for not', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('shell').once().withExactArgs(['dumpsys', 'window', 'windows']).returns('mFocusedApp=AppWindowToken{38600b56 token=Token{9ea1171 ' + 'ActivityRecord{c 0 foo/bar t181}}}');

            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(adb.waitForActivityOrNot(pkg, act, true));

          case 3:
            mocks.adb.verify();

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should call shell multiple times and return for not', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('shell').onCall(0).returns('mFocusedApp=AppWindowToken{38600b56 token=Token{9ea1171 ' + ('ActivityRecord{2 u ' + pkg + '/' + act + ' t181}}}'));
            mocks.adb.expects('shell').returns('mFocusedApp=AppWindowToken{38600b56 token=Token{9ea1171 ' + 'ActivityRecord{2c7c4318 u0 foo/bar t181}}}');
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(adb.waitForActivityOrNot(pkg, act, true));

          case 4:
            mocks.adb.verify();

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should be able to get first of a comma-separated list of activities', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('shell').once().withExactArgs(['dumpsys', 'window', 'windows']).returns('mFocusedApp=AppWindowToken{38600b56 token=Token{9ea1171 ' + ('ActivityRecord{2 u ' + pkg + '/.ContactManager t181}}}'));

            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(adb.waitForActivityOrNot(pkg, '.ContactManager, .OtherManager', false));

          case 3:
            mocks.adb.verify();

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should be able to get second of a comma-separated list of activities', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('shell').once().withExactArgs(['dumpsys', 'window', 'windows']).returns('mFocusedApp=AppWindowToken{38600b56 token=Token{9ea1171 ' + ('ActivityRecord{2 u ' + pkg + '/.OtherManager t181}}}'));

            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(adb.waitForActivityOrNot(pkg, '.ContactManager, .OtherManager', false));

          case 3:
            mocks.adb.verify();

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should fail if no activity in a comma-separated list is available', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('shell').atLeast(1).withExactArgs(['dumpsys', 'window', 'windows']).returns('mFocusedApp=AppWindowToken{38600b56 token=Token{9ea1171 ' + ('ActivityRecord{2 u ' + pkg + '/' + act + ' t181}}}'));

            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(adb.waitForActivityOrNot(pkg, '.SuperManager, .OtherManager', false, 1000).should.eventually.be.rejected);

          case 3:
            mocks.adb.verify();

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should be able to match activities if waitActivity is a wildcard', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('shell').once().withExactArgs(['dumpsys', 'window', 'windows']).returns('mFocusedApp=AppWindowToken{38600b56 token=Token{9ea1171 ' + ('ActivityRecord{2 u ' + pkg + '/.ContactManager t181}}}'));

            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(adb.waitForActivityOrNot(pkg, '*', false));

          case 3:
            mocks.adb.verify();

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should be able to match activities if waitActivity is shortened and contains a whildcard', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('shell').once().withExactArgs(['dumpsys', 'window', 'windows']).returns('mFocusedApp=AppWindowToken{38600b56 token=Token{9ea1171 ' + ('ActivityRecord{2 u ' + pkg + '/.ContactManager t181}}}'));

            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(adb.waitForActivityOrNot(pkg, '.*Manager', false));

          case 3:
            mocks.adb.verify();

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should be able to match activities if waitActivity contains a wildcard alternative to activity', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('shell').once().withExactArgs(['dumpsys', 'window', 'windows']).returns('mFocusedApp=AppWindowToken{38600b56 token=Token{9ea1171 ' + ('ActivityRecord{2 u ' + pkg + '/.ContactManager t181}}}'));

            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(adb.waitForActivityOrNot(pkg, pkg + '.*', false));

          case 3:
            mocks.adb.verify();

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should be able to match activities if waitActivity contains a wildcard on head', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('shell').once().withExactArgs(['dumpsys', 'window', 'windows']).returns('mFocusedApp=AppWindowToken{38600b56 token=Token{9ea1171 ' + ('ActivityRecord{2 u ' + pkg + '/.ContactManager t181}}}'));

            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(adb.waitForActivityOrNot(pkg, '*.contactmanager.ContactManager', false));

          case 3:
            mocks.adb.verify();

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should be able to match activities if waitActivity contains a wildcard across a pkg name and an activity name', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('shell').once().withExactArgs(['dumpsys', 'window', 'windows']).returns('mFocusedApp=AppWindowToken{38600b56 token=Token{9ea1171 ' + ('ActivityRecord{2 u ' + pkg + '/.ContactManager t181}}}'));

            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(adb.waitForActivityOrNot(pkg, 'com.*Manager', false));

          case 3:
            mocks.adb.verify();

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should be able to match activities if waitActivity contains wildcards in both a pkg name and an activity name', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('shell').once().withExactArgs(['dumpsys', 'window', 'windows']).returns('mFocusedApp=AppWindowToken{38600b56 token=Token{9ea1171 ' + ('ActivityRecord{2 u ' + pkg + '/.ContactManager t181}}}'));

            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(adb.waitForActivityOrNot(pkg, 'com.*.contactmanager.*Manager', false));

          case 3:
            mocks.adb.verify();

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should fail if activity not to match from regexp activities', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('shell').atLeast(1).withExactArgs(['dumpsys', 'window', 'windows']).returns('mFocusedApp=AppWindowToken{38600b56 token=Token{9ea1171 ' + 'ActivityRecord{2 u com.example.android.supermanager/.SuperManager t181}}}');

            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(adb.waitForActivityOrNot('com.example.android.supermanager', pkg + '.*', false, 1000).should.eventually.be.rejected);

          case 3:
            mocks.adb.verify();

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should be able to get an activity that is an inner class', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('shell').once().withExactArgs(['dumpsys', 'window', 'windows']).returns('mFocusedApp=AppWindowToken{38600b56 token=Token{9ea1171 ' + ('ActivityRecord{2 u ' + pkg + '/.Settings$AppDrawOverlaySettingsActivity t181}}}'));

            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(adb.waitForActivityOrNot(pkg, '.Settings$AppDrawOverlaySettingsActivity', false));

          case 3:
            mocks.adb.verify();

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should be able to get first activity from first package in a comma-separated list of packages + activities', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('shell').once().withExactArgs(['dumpsys', 'window', 'windows']).returns('mFocusedApp=AppWindowToken{38600b56 token=Token{9ea1171 ' + 'ActivityRecord{2 u com.android.settings/.ContactManager t181}}}');

            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(adb.waitForActivityOrNot('com.android.settings,com.example.android.supermanager', '.ContactManager,.OtherManager', false));

          case 3:
            mocks.adb.verify();

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should be able to get first activity from second package in a comma-separated list of packages + activities', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('shell').once().withExactArgs(['dumpsys', 'window', 'windows']).returns('mFocusedApp=AppWindowToken{38600b56 token=Token{9ea1171 ' + 'ActivityRecord{2 u com.example.android.supermanager/.ContactManager t181}}}');

            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(adb.waitForActivityOrNot('com.android.settings,com.example.android.supermanager', '.ContactManager,.OtherManager', false));

          case 3:
            mocks.adb.verify();

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should be able to get second activity from first package in a comma-separated list of packages + activities', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('shell').once().withExactArgs(['dumpsys', 'window', 'windows']).returns('mFocusedApp=AppWindowToken{38600b56 token=Token{9ea1171 ' + 'ActivityRecord{2 u com.android.settings/.OtherManager t181}}}');

            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(adb.waitForActivityOrNot('com.android.settings,com.example.android.supermanager', '.ContactManager,.OtherManager', false));

          case 3:
            mocks.adb.verify();

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should be able to get second activity from second package in a comma-separated list of packages', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('shell').once().withExactArgs(['dumpsys', 'window', 'windows']).returns('mFocusedApp=AppWindowToken{38600b56 token=Token{9ea1171 ' + 'ActivityRecord{2 u com.example.android.supermanager/.OtherManager t181}}}');

            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(adb.waitForActivityOrNot('com.android.settings,com.example.android.supermanager', '.ContactManager,.OtherManager', false));

          case 3:
            mocks.adb.verify();

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should fail to get activity when focused activity matches none of the provided list of packages', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('shell').atLeast(1).withExactArgs(['dumpsys', 'window', 'windows']).returns('mFocusedApp=AppWindowToken{38600b56 token=Token{9ea1171 ' + 'ActivityRecord{2 u com.otherpackage/.ContactManager t181}}}');

            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(adb.waitForActivityOrNot('com.android.settings,com.example.android.supermanager', '.ContactManager, .OtherManager', false, 1000).should.eventually.be.rejected);

          case 3:
            mocks.adb.verify();

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  }));
  describe('waitForActivity', (0, _appiumTestSupport.withMocks)({ adb: adb }, function (mocks) {
    it('should call waitForActivityOrNot with correct arguments', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('waitForActivityOrNot').once().withExactArgs(pkg, act, false, 20000).returns('');
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(adb.waitForActivity(pkg, act));

          case 3:
            mocks.adb.verify();

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  }));
  describe('waitForNotActivity', (0, _appiumTestSupport.withMocks)({ adb: adb }, function (mocks) {
    it('should call waitForActivityOrNot with correct arguments', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('waitForActivityOrNot').once().withExactArgs(pkg, act, true, 20000).returns('');
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(adb.waitForNotActivity(pkg, act));

          case 3:
            mocks.adb.verify();

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  }));
  describe('uninstallApk', (0, _appiumTestSupport.withMocks)({ adb: adb }, function (mocks) {
    it('should call forceStop and adbExec with correct arguments', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('forceStop').once().withExactArgs(pkg).returns('');
            mocks.adb.expects('adbExec').once().withExactArgs(['uninstall', pkg], { timeout: 20000 }).returns('Success');
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(adb.uninstallApk(pkg));

          case 4:
            context$3$0.sent.should.be['true'];

            mocks.adb.verify();

          case 6:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  }));
  describe('installFromDevicePath', (0, _appiumTestSupport.withMocks)({ adb: adb }, function (mocks) {
    it('should call forceStop and adbExec with correct arguments', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('shell').once().withExactArgs(['pm', 'install', '-r', 'foo'], {}).returns('');
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(adb.installFromDevicePath('foo'));

          case 3:
            mocks.adb.verify();

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  }));
  describe('install', (0, _appiumTestSupport.withMocks)({ adb: adb }, function (mocks) {
    it('should call forceStop and adbExec with correct arguments', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('adbExec').once().withExactArgs(['install', '-r', 'foo'], { timeout: 60000 }).returns('');
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(adb.install('foo'));

          case 3:
            mocks.adb.verify();

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should call forceStop and adbExec with correct arguments when not replacing', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('adbExec').once().withExactArgs(['install', 'foo'], { timeout: 60000 }).returns('');
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(adb.install('foo', false));

          case 3:
            mocks.adb.verify();

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  }));
  describe('startUri', (0, _appiumTestSupport.withMocks)({ adb: adb }, function (mocks) {
    it('should fail if uri or pkg are not provided', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(adb.startUri().should.eventually.be.rejectedWith(/arguments are required/));

          case 2:
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(adb.startUri('foo').should.eventually.be.rejectedWith(/arguments are required/));

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should build a call to a VIEW intent with the uri', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('shell').once().withExactArgs(['am', 'start', '-W', '-a', 'android.intent.action.VIEW', '-d', uri, pkg]);
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(adb.startUri(uri, pkg));

          case 3:
            mocks.adb.verify();

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  }));
  describe('startApp', (0, _appiumTestSupport.withMocks)({ adb: adb }, function (mocks) {
    it('should call getApiLevel and shell with correct arguments', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('getApiLevel').once().withExactArgs().returns('17');
            mocks.adb.expects('shell').once().withExactArgs(cmd).returns('');
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(adb.startApp(startAppOptions));

          case 4:
            mocks.adb.verify();

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should call getApiLevel and shell with correct arguments', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('getApiLevel').twice().returns('17');
            mocks.adb.expects('shell').onCall(0).returns('Error: Activity class foo does not exist');
            mocks.adb.expects('shell').returns('');
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(adb.startApp(startAppOptions));

          case 5:
            mocks.adb.verify();

          case 6:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should call getApiLevel and shell with correct arguments when activity is inner class', function callee$2$0() {
      var startAppOptionsWithInnerClass, cmdWithInnerClass;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            startAppOptionsWithInnerClass = { pkg: 'pkg', activity: 'act$InnerAct' }, cmdWithInnerClass = ['am', 'start', '-W', '-n', 'pkg/act\\$InnerAct', '-S'];

            mocks.adb.expects('getApiLevel').once().withExactArgs().returns('17');
            mocks.adb.expects('shell').once().withExactArgs(cmdWithInnerClass).returns('');
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(adb.startApp(startAppOptionsWithInnerClass));

          case 5:
            mocks.adb.verify();

          case 6:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  }));
  describe('getDeviceLanguage', (0, _appiumTestSupport.withMocks)({ adb: adb }, function (mocks) {
    it('should call shell one time with correct args and return language when API < 23', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects("getApiLevel").returns(18);
            mocks.adb.expects("shell").once().withExactArgs(['getprop', 'persist.sys.language']).returns(language);
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(adb.getDeviceLanguage());

          case 4:
            context$3$0.t0 = language;
            context$3$0.sent.should.equal(context$3$0.t0);

            mocks.adb.verify();

          case 7:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should call shell two times with correct args and return language when API < 23', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects("getApiLevel").returns(18);
            mocks.adb.expects("shell").once().withExactArgs(['getprop', 'persist.sys.language']).returns('');
            mocks.adb.expects("shell").once().withExactArgs(['getprop', 'ro.product.locale.language']).returns(language);
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(adb.getDeviceLanguage());

          case 5:
            context$3$0.t0 = language;
            context$3$0.sent.should.equal(context$3$0.t0);

            mocks.adb.verify();

          case 8:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should call shell one time with correct args and return language when API = 23', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects("getApiLevel").returns(23);
            mocks.adb.expects("shell").once().withExactArgs(['getprop', 'persist.sys.locale']).returns(locale);
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(adb.getDeviceLanguage());

          case 4:
            context$3$0.t0 = language;
            context$3$0.sent.should.equal(context$3$0.t0);

            mocks.adb.verify();

          case 7:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should call shell two times with correct args and return language when API = 23', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects("getApiLevel").returns(23);
            mocks.adb.expects("shell").once().withExactArgs(['getprop', 'persist.sys.locale']).returns('');
            mocks.adb.expects("shell").once().withExactArgs(['getprop', 'ro.product.locale']).returns(locale);
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(adb.getDeviceLanguage());

          case 5:
            context$3$0.t0 = language;
            context$3$0.sent.should.equal(context$3$0.t0);

            mocks.adb.verify();

          case 8:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  }));
  describe('setDeviceLanguage', (0, _appiumTestSupport.withMocks)({ adb: adb }, function (mocks) {
    it('should call shell one time with correct args when API < 23', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects("shell").once().withExactArgs(['setprop', 'persist.sys.language', language]).returns("");
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(adb.setDeviceLanguage(language));

          case 3:
            mocks.adb.verify();

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  }));
  describe('getDeviceCountry', (0, _appiumTestSupport.withMocks)({ adb: adb }, function (mocks) {
    it('should call shell one time with correct args and return country', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects("shell").once().withExactArgs(['getprop', 'persist.sys.country']).returns(country);
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(adb.getDeviceCountry());

          case 3:
            context$3$0.t0 = country;
            context$3$0.sent.should.equal(context$3$0.t0);

            mocks.adb.verify();

          case 6:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should call shell two times with correct args and return country', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects("shell").once().withExactArgs(['getprop', 'persist.sys.country']).returns('');
            mocks.adb.expects("shell").once().withExactArgs(['getprop', 'ro.product.locale.region']).returns(country);
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(adb.getDeviceCountry());

          case 4:
            context$3$0.t0 = country;
            context$3$0.sent.should.equal(context$3$0.t0);

            mocks.adb.verify();

          case 7:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  }));
  describe('setDeviceCountry', (0, _appiumTestSupport.withMocks)({ adb: adb }, function (mocks) {
    it('should call shell one time with correct args', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects("shell").once().withExactArgs(['setprop', 'persist.sys.country', country]).returns("");
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(adb.setDeviceCountry(country));

          case 3:
            mocks.adb.verify();

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  }));
  describe('getDeviceLocale', (0, _appiumTestSupport.withMocks)({ adb: adb }, function (mocks) {
    it('should call shell one time with correct args and return locale', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects("shell").once().withExactArgs(['getprop', 'persist.sys.locale']).returns(locale);
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(adb.getDeviceLocale());

          case 3:
            context$3$0.t0 = locale;
            context$3$0.sent.should.equal(context$3$0.t0);

            mocks.adb.verify();

          case 6:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should call shell two times with correct args and return locale', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects("shell").once().withExactArgs(['getprop', 'persist.sys.locale']).returns('');
            mocks.adb.expects("shell").once().withExactArgs(['getprop', 'ro.product.locale']).returns(locale);
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(adb.getDeviceLocale());

          case 4:
            context$3$0.t0 = locale;
            context$3$0.sent.should.equal(context$3$0.t0);

            mocks.adb.verify();

          case 7:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  }));
  describe('setDeviceLocale', (0, _appiumTestSupport.withMocks)({ adb: adb }, function (mocks) {
    it('should call shell one time with correct args', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects("shell").once().withExactArgs(['setprop', 'persist.sys.locale', locale]).returns("");
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(adb.setDeviceLocale(locale));

          case 3:
            mocks.adb.verify();

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  }));
  describe('getApkInfo', (0, _appiumTestSupport.withMocks)({ adb: adb, teen_process: teen_process, fs: _appiumSupport.fs }, function (mocks) {
    it('should properly parse apk info', function callee$2$0() {
      var result, _arr, _i, _arr$_i, _name, value;

      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.fs.expects('exists').once().returns(true);
            mocks.adb.expects('initAapt').once().returns(true);
            mocks.teen_process.expects('exec').once().returns({ stdout: 'package: name=\'io.appium.settings\' versionCode=\'2\' versionName=\'1.1\' platformBuildVersionName=\'6.0-2166767\'\n      sdkVersion:\'17\'\n      targetSdkVersion:\'23\'\n      uses-permission: name=\'android.permission.INTERNET\'\n      uses-permission: name=\'android.permission.CHANGE_NETWORK_STATE\'\n      uses-permission: name=\'android.permission.ACCESS_NETWORK_STATE\'\n      uses-permission: name=\'android.permission.READ_PHONE_STATE\'\n      uses-permission: name=\'android.permission.WRITE_SETTINGS\'\n      uses-permission: name=\'android.permission.CHANGE_WIFI_STATE\'\n      uses-permission: name=\'android.permission.ACCESS_WIFI_STATE\'\n      uses-permission: name=\'android.permission.ACCESS_FINE_LOCATION\'\n      uses-permission: name=\'android.permission.ACCESS_COARSE_LOCATION\'\n      uses-permission: name=\'android.permission.ACCESS_MOCK_LOCATION\'\n      application-label:\'Appium Settings\'\n      application-icon-120:\'res/drawable-ldpi-v4/ic_launcher.png\'\n      application-icon-160:\'res/drawable-mdpi-v4/ic_launcher.png\'\n      application-icon-240:\'res/drawable-hdpi-v4/ic_launcher.png\'\n      application-icon-320:\'res/drawable-xhdpi-v4/ic_launcher.png\'\n      application: label=\'Appium Settings\' icon=\'res/drawable-mdpi-v4/ic_launcher.png\'\n      application-debuggable\n      launchable-activity: name=\'io.appium.settings.Settings\'  label=\'Appium Settings\' icon=\'\'\n      feature-group: label=\'\'\n        uses-feature: name=\'android.hardware.wifi\'\n        uses-feature: name=\'android.hardware.location\'\n        uses-implied-feature: name=\'android.hardware.location\' reason=\'requested android.permission.ACCESS_COARSE_LOCATION permission, requested android.permission.ACCESS_FINE_LOCATION permission, and requested android.permission.ACCESS_MOCK_LOCATION permission\'\n        uses-feature: name=\'android.hardware.location.gps\'\n        uses-implied-feature: name=\'android.hardware.location.gps\' reason=\'requested android.permission.ACCESS_FINE_LOCATION permission\'\n        uses-feature: name=\'android.hardware.location.network\'\n        uses-implied-feature: name=\'android.hardware.location.network\' reason=\'requested android.permission.ACCESS_COARSE_LOCATION permission\'\n        uses-feature: name=\'android.hardware.touchscreen\'\n        uses-implied-feature: name=\'android.hardware.touchscreen\' reason=\'default feature for all apps\'\n      main\n      other-receivers\n      other-services\n      supports-screens: \'small\' \'normal\' \'large\' \'xlarge\'\n      supports-any-density: \'true\'\n      locales: \'--_--\'\n      densities: \'120\' \'160\' \'240\' \'320\'' });
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(adb.getApkInfo('/some/folder/path.apk'));

          case 5:
            result = context$3$0.sent;
            _arr = [['name', 'io.appium.settings'], ['versionCode', 2], ['versionName', '1.1']];

            for (_i = 0; _i < _arr.length; _i++) {
              _arr$_i = _slicedToArray(_arr[_i], 2);
              _name = _arr$_i[0];
              value = _arr$_i[1];

              result.should.have.property(_name, value);
            }

          case 8:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  }));
  describe('getPackageInfo', (0, _appiumTestSupport.withMocks)({ adb: adb }, function (mocks) {
    it('should properly parse installed package info', function callee$2$0() {
      var result, _arr2, _i2, _arr2$_i2, _name2, value;

      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('shell').once().returns('Packages:\n      Package [com.example.testapp.first] (2036fd1):\n        userId=10225\n        pkg=Package{42e7a36 com.example.testapp.first}\n        codePath=/data/app/com.example.testapp.first-1\n        resourcePath=/data/app/com.example.testapp.first-1\n        legacyNativeLibraryDir=/data/app/com.example.testapp.first-1/lib\n        primaryCpuAbi=null\n        secondaryCpuAbi=null\n        versionCode=1 minSdk=21 targetSdk=24\n        versionName=1.0\n        splits=[base]\n        apkSigningVersion=1\n        applicationInfo=ApplicationInfo{29cb2a4 com.example.testapp.first}\n        flags=[ HAS_CODE ALLOW_CLEAR_USER_DATA ALLOW_BACKUP ]\n        privateFlags=[ RESIZEABLE_ACTIVITIES ]\n        dataDir=/data/user/0/com.example.testapp.first\n        supportsScreens=[small, medium, large, xlarge, resizeable, anyDensity]\n        timeStamp=2016-11-03 01:12:08\n        firstInstallTime=2016-11-03 01:12:09\n        lastUpdateTime=2016-11-03 01:12:09\n        signatures=PackageSignatures{9fe380d [53ea108d]}\n        installPermissionsFixed=true installStatus=1\n        pkgFlags=[ HAS_CODE ALLOW_CLEAR_USER_DATA ALLOW_BACKUP ]\n        User 0: ceDataInode=474317 installed=true hidden=false suspended=false stopped=true notLaunched=true enabled=0\n          runtime permissions:');
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(adb.getPackageInfo('com.example.testapp.first'));

          case 3:
            result = context$3$0.sent;
            _arr2 = [['name', 'com.example.testapp.first'], ['versionCode', 1], ['versionName', '1.0']];

            for (_i2 = 0; _i2 < _arr2.length; _i2++) {
              _arr2$_i2 = _slicedToArray(_arr2[_i2], 2);
              _name2 = _arr2$_i2[0];
              value = _arr2$_i2[1];

              result.should.have.property(_name2, value);
            }

          case 6:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
  }));
  describe('installOrUpgrade', (0, _appiumTestSupport.withMocks)({ adb: adb }, function (mocks) {
    var pkgId = 'io.appium.settings';
    var apkPath = '/path/to/my.apk';

    it('should execute install if the package is not present', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('getApkInfo').withExactArgs(apkPath).once().returns({
              name: pkgId
            });
            mocks.adb.expects('isAppInstalled').withExactArgs(pkgId).once().returns(false);
            mocks.adb.expects('install').withArgs(apkPath, false).once().returns(true);
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(adb.installOrUpgrade(apkPath));

          case 5:
            mocks.adb.verify();

          case 6:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should return if the same package version is already installed', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('getApkInfo').withExactArgs(apkPath).once().returns({
              versionCode: 1
            });
            mocks.adb.expects('getPackageInfo').once().returns({
              versionCode: 1
            });
            mocks.adb.expects('isAppInstalled').withExactArgs(pkgId).once().returns(true);
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(adb.installOrUpgrade(apkPath, pkgId));

          case 5:
            mocks.adb.verify();

          case 6:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should return if newer package version is already installed', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('getApkInfo').withExactArgs(apkPath).once().returns({
              name: pkgId,
              versionCode: 1
            });
            mocks.adb.expects('getPackageInfo').once().returns({
              versionCode: 2
            });
            mocks.adb.expects('isAppInstalled').withExactArgs(pkgId).once().returns(true);
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(adb.installOrUpgrade(apkPath));

          case 5:
            mocks.adb.verify();

          case 6:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should not throw an error if apk version code cannot be read', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('getApkInfo').withExactArgs(apkPath).once().returns({
              name: pkgId
            });
            mocks.adb.expects('getPackageInfo').once().returns({
              versionCode: 2
            });
            mocks.adb.expects('isAppInstalled').withExactArgs(pkgId).once().returns(true);
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(adb.installOrUpgrade(apkPath));

          case 5:
            mocks.adb.verify();

          case 6:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should not throw an error if pkg version code cannot be read', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('getApkInfo').withExactArgs(apkPath).once().returns({
              name: pkgId,
              versionCode: 1
            });
            mocks.adb.expects('getPackageInfo').once().returns({});
            mocks.adb.expects('isAppInstalled').withExactArgs(pkgId).once().returns(true);
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(adb.installOrUpgrade(apkPath));

          case 5:
            mocks.adb.verify();

          case 6:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should not throw an error if pkg id cannot be read', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('getApkInfo').withExactArgs(apkPath).once().returns({});
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(adb.installOrUpgrade(apkPath));

          case 3:
            mocks.adb.verify();

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should perform upgrade if older package version is installed', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('getApkInfo').withExactArgs(apkPath).once().returns({
              name: pkgId,
              versionCode: 2
            });
            mocks.adb.expects('getPackageInfo').once().returns({
              versionCode: 1
            });
            mocks.adb.expects('isAppInstalled').withExactArgs(pkgId).once().returns(true);
            mocks.adb.expects('install').withArgs(apkPath, true).once().returns(true);
            context$3$0.next = 6;
            return _regeneratorRuntime.awrap(adb.installOrUpgrade(apkPath));

          case 6:
            mocks.adb.verify();

          case 7:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should throw an exception if upgrade and reinstall fail', function callee$2$0() {
      var isExceptionThrown;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('getApkInfo').withExactArgs(apkPath).once().returns({
              name: pkgId,
              versionCode: 2
            });
            mocks.adb.expects('getPackageInfo').once().returns({
              versionCode: 1
            });
            mocks.adb.expects('isAppInstalled').withExactArgs(pkgId).once().returns(true);
            mocks.adb.expects('uninstallApk').withExactArgs(pkgId).once().returns(true);
            mocks.adb.expects('install').withArgs(apkPath).twice().throws();
            isExceptionThrown = false;
            context$3$0.prev = 6;
            context$3$0.next = 9;
            return _regeneratorRuntime.awrap(adb.installOrUpgrade(apkPath));

          case 9:
            context$3$0.next = 14;
            break;

          case 11:
            context$3$0.prev = 11;
            context$3$0.t0 = context$3$0['catch'](6);

            isExceptionThrown = true;

          case 14:
            isExceptionThrown.should.be['true'];
            mocks.adb.verify();

          case 16:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this, [[6, 11]]);
    });
    it('should throw an exception if upgrade and uninstall fail', function callee$2$0() {
      var isExceptionThrown;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('getApkInfo').withExactArgs(apkPath).once().returns({
              name: pkgId,
              versionCode: 2
            });
            mocks.adb.expects('getPackageInfo').once().returns({
              versionCode: 1
            });
            mocks.adb.expects('isAppInstalled').withExactArgs(pkgId).once().returns(true);
            mocks.adb.expects('uninstallApk').withExactArgs(pkgId).once().returns(false);
            mocks.adb.expects('install').withArgs(apkPath, true).once().throws();
            isExceptionThrown = false;
            context$3$0.prev = 6;
            context$3$0.next = 9;
            return _regeneratorRuntime.awrap(adb.installOrUpgrade(apkPath));

          case 9:
            context$3$0.next = 14;
            break;

          case 11:
            context$3$0.prev = 11;
            context$3$0.t0 = context$3$0['catch'](6);

            isExceptionThrown = true;

          case 14:
            isExceptionThrown.should.be['true'];
            mocks.adb.verify();

          case 16:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this, [[6, 11]]);
    });
  }));
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QvdW5pdC9hcGstdXRpbHMtc3BlY3MuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O29CQUFpQixNQUFNOzs7OzhCQUNJLGtCQUFrQjs7Ozs0QkFDZixjQUFjOztJQUFoQyxZQUFZOzs2QkFDTCxnQkFBZ0I7O2dCQUNuQixPQUFPOzs7O2lDQUNHLHFCQUFxQjs7QUFHL0Msa0JBQUssR0FBRyw2QkFBZ0IsQ0FBQztBQUN6QixJQUFNLE1BQU0sR0FBRyxrQkFBSyxNQUFNLEVBQUU7SUFDdEIsR0FBRyxHQUFHLG9DQUFvQztJQUMxQyxHQUFHLEdBQUcsNkJBQTZCO0lBQ25DLEdBQUcsR0FBRyxpQkFBaUI7SUFDdkIsZUFBZSxHQUFHLEVBQUMsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxLQUFLO0FBQ2hELE9BQUssRUFBRSxPQUFPLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsS0FBSztBQUMzQyx5QkFBdUIsRUFBRSx5REFBeUQsRUFBQztJQUN0RyxHQUFHLEdBQUcsQ0FBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQ3ZFLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLFNBQVMsRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLFVBQVUsRUFDMUQsSUFBSSxFQUFFLFFBQVEsRUFBRSxpQkFBaUIsQ0FBQztJQUN6QyxRQUFRLEdBQUcsSUFBSTtJQUNmLE9BQU8sR0FBRyxJQUFJO0lBQ2QsTUFBTSxHQUFHLE9BQU8sQ0FBQzs7QUFFdkIsUUFBUSxDQUFDLFdBQVcsRUFBRSxZQUFNO0FBQzFCLE1BQUksR0FBRyxHQUFHLG1CQUFTLENBQUM7QUFDcEIsVUFBUSxDQUFDLGdCQUFnQixFQUFFLGtDQUFVLEVBQUMsR0FBRyxFQUFILEdBQUcs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LEVBQUUsQ0FBQzthQUNmLENBQUMsQ0FBQztBQUNILGlCQUFLLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDOUUsaUJBQUssQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDN0UsaUJBQUssQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUM7QUFDakUsNkJBQWlCLEdBQUcsS0FBSzs7OzZDQUVyQixHQUFHLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxDQUFDOzs7Ozs7Ozs7O0FBRW5DLDZCQUFpQixHQUFHLElBQUksQ0FBQzs7O0FBRTNCLDZCQUFpQixDQUFDLE1BQU0sQ0FBQyxFQUFFLFFBQUssQ0FBQztBQUNqQyxpQkFBSyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQzs7Ozs7OztLQUNwQixDQUFDLENBQUM7R0FDSixDQUFDLENBQUMsQ0FBQztDQUNMLENBQUMsQ0FBQyIsImZpbGUiOiJ0ZXN0L3VuaXQvYXBrLXV0aWxzLXNwZWNzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNoYWkgZnJvbSAnY2hhaSc7XG5pbXBvcnQgY2hhaUFzUHJvbWlzZWQgZnJvbSAnY2hhaS1hcy1wcm9taXNlZCc7XG5pbXBvcnQgKiBhcyB0ZWVuX3Byb2Nlc3MgZnJvbSAndGVlbl9wcm9jZXNzJztcbmltcG9ydCB7IGZzIH0gZnJvbSAnYXBwaXVtLXN1cHBvcnQnO1xuaW1wb3J0IEFEQiBmcm9tICcuLi8uLic7XG5pbXBvcnQgeyB3aXRoTW9ja3MgfSBmcm9tICdhcHBpdW0tdGVzdC1zdXBwb3J0JztcblxuXG5jaGFpLnVzZShjaGFpQXNQcm9taXNlZCk7XG5jb25zdCBzaG91bGQgPSBjaGFpLnNob3VsZCgpLFxuICAgICAgcGtnID0gJ2NvbS5leGFtcGxlLmFuZHJvaWQuY29udGFjdG1hbmFnZXInLFxuICAgICAgdXJpID0gJ2NvbnRlbnQ6Ly9jb250YWN0cy9wZW9wbGUvMScsXG4gICAgICBhY3QgPSAnLkNvbnRhY3RNYW5hZ2VyJyxcbiAgICAgIHN0YXJ0QXBwT3B0aW9ucyA9IHtzdG9wQXBwOiB0cnVlLCBhY3Rpb246ICdhY3Rpb24nLCBjYXRlZ29yeTogJ2NhdCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgZmxhZ3M6ICdmbGFncycsIHBrZzogJ3BrZycsIGFjdGl2aXR5OiAnYWN0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25hbEludGVudEFyZ3VtZW50czogJy14IG9wdGlvbnMgLXkgb3B0aW9uIGFyZ3VtZW50IC16IG9wdGlvbiBhcmcgd2l0aCBzcGFjZXMnfSxcbiAgICAgIGNtZCA9IFsnYW0nLCAnc3RhcnQnLCAnLVcnLCAnLW4nLCAncGtnL2FjdCcsICctUycsICctYScsICdhY3Rpb24nLCAnLWMnLCAnY2F0JyxcbiAgICAgICAgICAgICAnLWYnLCAnZmxhZ3MnLCAnLXgnLCAnb3B0aW9ucycsICcteScsICdvcHRpb24nLCAnYXJndW1lbnQnLFxuICAgICAgICAgICAgICcteicsICdvcHRpb24nLCAnYXJnIHdpdGggc3BhY2VzJ10sXG4gICAgICBsYW5ndWFnZSA9ICdlbicsXG4gICAgICBjb3VudHJ5ID0gJ1VTJyxcbiAgICAgIGxvY2FsZSA9ICdlbi1VUyc7XG5cbmRlc2NyaWJlKCdBcGstdXRpbHMnLCAoKSA9PiB7XG4gIGxldCBhZGIgPSBuZXcgQURCKCk7XG4gIGRlc2NyaWJlKCdpc0FwcEluc3RhbGxlZCcsIHdpdGhNb2Nrcyh7YWRifSwgKG1vY2tzKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBwYXJzZSBjb3JyZWN0bHkgYW5kIHJldHVybiB0cnVlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcGtnID0gJ2R1bW15LnBhY2thZ2UnO1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ3NoZWxsJylcbiAgICAgICAgLm9uY2UoKS53aXRoRXhhY3RBcmdzKFsncG0nLCAnbGlzdCcsICdwYWNrYWdlcycsIHBrZ10pXG4gICAgICAgIC5yZXR1cm5zKGBwYWNrYWdlOiR7cGtnfWApO1xuICAgICAgKGF3YWl0IGFkYi5pc0FwcEluc3RhbGxlZChwa2cpKS5zaG91bGQuYmUudHJ1ZTtcbiAgICAgIG1vY2tzLmFkYi52ZXJpZnkoKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIHBhcnNlIGNvcnJlY3RseSBhbmQgcmV0dXJuIGZhbHNlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcGtnID0gJ2R1bW15LnBhY2thZ2UnO1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ3NoZWxsJylcbiAgICAgICAgLm9uY2UoKS53aXRoRXhhY3RBcmdzKFsncG0nLCAnbGlzdCcsICdwYWNrYWdlcycsIHBrZ10pXG4gICAgICAgIC5yZXR1cm5zKFwiXCIpO1xuICAgICAgKGF3YWl0IGFkYi5pc0FwcEluc3RhbGxlZChwa2cpKS5zaG91bGQuYmUuZmFsc2U7XG4gICAgICBtb2Nrcy5hZGIudmVyaWZ5KCk7XG4gICAgfSk7XG4gIH0pKTtcbiAgZGVzY3JpYmUoJ2dldEZvY3VzZWRQYWNrYWdlQW5kQWN0aXZpdHknLCB3aXRoTW9ja3Moe2FkYn0sIChtb2NrcykgPT4ge1xuICAgIGl0KCdzaG91bGQgcGFyc2UgY29ycmVjdGx5IGFuZCByZXR1cm4gcGFja2FnZSBhbmQgYWN0aXZpdHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cygnc2hlbGwnKVxuICAgICAgICAub25jZSgpLndpdGhFeGFjdEFyZ3MoWydkdW1wc3lzJywgJ3dpbmRvdycsICd3aW5kb3dzJ10pXG4gICAgICAgIC5yZXR1cm5zKGBtRm9jdXNlZEFwcD1BcHBXaW5kb3dUb2tlbnszODYwMGI1NiB0b2tlbj1Ub2tlbns5ZWExMTcxIGAgK1xuICAgICAgICAgICAgICAgICBgQWN0aXZpdHlSZWNvcmR7MiB1ICR7cGtnfS8ke2FjdH0gdDE4MX19fWApO1xuXG4gICAgICBsZXQge2FwcFBhY2thZ2UsIGFwcEFjdGl2aXR5fSA9IGF3YWl0IGFkYi5nZXRGb2N1c2VkUGFja2FnZUFuZEFjdGl2aXR5KCk7XG4gICAgICBhcHBQYWNrYWdlLnNob3VsZC5lcXVhbChwa2cpO1xuICAgICAgYXBwQWN0aXZpdHkuc2hvdWxkLmVxdWFsKGFjdCk7XG4gICAgICBtb2Nrcy5hZGIudmVyaWZ5KCk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBwYXJzZSBjb3JyZWN0bHkgYW5kIHJldHVybiBwYWNrYWdlIGFuZCBhY3Rpdml0eSB3aGVuIGEgY29tbWEgaXMgcHJlc2VudCcsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdzaGVsbCcpXG4gICAgICAgIC5vbmNlKCkud2l0aEV4YWN0QXJncyhbJ2R1bXBzeXMnLCAnd2luZG93JywgJ3dpbmRvd3MnXSlcbiAgICAgICAgLnJldHVybnMoYG1Gb2N1c2VkQXBwPUFwcFdpbmRvd1Rva2VuezIwZmUyMTdlIHRva2VuPVRva2VuezIxODc4NzM5IGAgK1xuICAgICAgICAgICAgICAgICBgQWN0aXZpdHlSZWNvcmR7MTY0MjUzMDAgdTAgJHtwa2d9LyR7YWN0fSwgaXNTaGFkb3c6ZmFsc2UgdDEwfX19YCk7XG5cbiAgICAgIGxldCB7YXBwUGFja2FnZSwgYXBwQWN0aXZpdHl9ID0gYXdhaXQgYWRiLmdldEZvY3VzZWRQYWNrYWdlQW5kQWN0aXZpdHkoKTtcbiAgICAgIGFwcFBhY2thZ2Uuc2hvdWxkLmVxdWFsKHBrZyk7XG4gICAgICBhcHBBY3Rpdml0eS5zaG91bGQuZXF1YWwoYWN0KTtcbiAgICAgIG1vY2tzLmFkYi52ZXJpZnkoKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIHBhcnNlIGNvcnJlY3RseSBhbmQgcmV0dXJuIG51bGwnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cygnc2hlbGwnKVxuICAgICAgICAub25jZSgpLndpdGhFeGFjdEFyZ3MoWydkdW1wc3lzJywgJ3dpbmRvdycsICd3aW5kb3dzJ10pXG4gICAgICAgIC5yZXR1cm5zKCdtRm9jdXNlZEFwcD1udWxsJyk7XG4gICAgICBsZXQge2FwcFBhY2thZ2UsIGFwcEFjdGl2aXR5fSA9IGF3YWl0IGFkYi5nZXRGb2N1c2VkUGFja2FnZUFuZEFjdGl2aXR5KCk7XG4gICAgICBzaG91bGQubm90LmV4aXN0KGFwcFBhY2thZ2UpO1xuICAgICAgc2hvdWxkLm5vdC5leGlzdChhcHBBY3Rpdml0eSk7XG4gICAgICBtb2Nrcy5hZGIudmVyaWZ5KCk7XG4gICAgfSk7XG4gIH0pKTtcbiAgZGVzY3JpYmUoJ3dhaXRGb3JBY3Rpdml0eU9yTm90Jywgd2l0aE1vY2tzKHthZGJ9LCAobW9ja3MpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNhbGwgc2hlbGwgb25jZSBhbmQgc2hvdWxkIHJldHVybicsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdzaGVsbCcpXG4gICAgICAgIC5vbmNlKCkud2l0aEV4YWN0QXJncyhbJ2R1bXBzeXMnLCAnd2luZG93JywgJ3dpbmRvd3MnXSlcbiAgICAgICAgLnJldHVybnMoYG1Gb2N1c2VkQXBwPUFwcFdpbmRvd1Rva2VuezM4NjAwYjU2IHRva2VuPVRva2VuezllYTExNzEgYCArXG4gICAgICAgICAgICAgICAgIGBBY3Rpdml0eVJlY29yZHsyIHUgJHtwa2d9LyR7YWN0fSB0MTgxfX19YCk7XG5cbiAgICAgIGF3YWl0IGFkYi53YWl0Rm9yQWN0aXZpdHlPck5vdChwa2csIGFjdCwgZmFsc2UpO1xuICAgICAgbW9ja3MuYWRiLnZlcmlmeSgpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgY2FsbCBzaGVsbCBtdWx0aXBsZSB0aW1lcyBhbmQgcmV0dXJuJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ3NoZWxsJykub25DYWxsKDApXG4gICAgICAgIC5yZXR1cm5zKCdtRm9jdXNlZEFwcD1BcHBXaW5kb3dUb2tlbnszODYwMGI1NiB0b2tlbj1Ub2tlbns5ZWExMTcxICcgK1xuICAgICAgICAgICAgICAgICAnQWN0aXZpdHlSZWNvcmR7MmM3YzQzMTggdTAgZm9vL2JhciB0MTgxfX19Jyk7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cygnc2hlbGwnKVxuICAgICAgICAucmV0dXJucygnbUZvY3VzZWRBcHA9QXBwV2luZG93VG9rZW57Mzg2MDBiNTYgdG9rZW49VG9rZW57OWVhMTE3MSAnICtcbiAgICAgICAgICAgICAgICAgJ0FjdGl2aXR5UmVjb3JkezJjN2M0MzE4IHUwIGNvbS5leGFtcGxlLmFuZHJvaWQuY29udGFjdG1hbmFnZXIvLkNvbnRhY3RNYW5hZ2VyIHQxODF9fX0nKTtcblxuICAgICAgYXdhaXQgYWRiLndhaXRGb3JBY3Rpdml0eU9yTm90KHBrZywgYWN0LCBmYWxzZSk7XG4gICAgICBtb2Nrcy5hZGIudmVyaWZ5KCk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBjYWxsIHNoZWxsIG9uY2UgcmV0dXJuIGZvciBub3QnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cygnc2hlbGwnKVxuICAgICAgICAub25jZSgpLndpdGhFeGFjdEFyZ3MoWydkdW1wc3lzJywgJ3dpbmRvdycsICd3aW5kb3dzJ10pXG4gICAgICAgIC5yZXR1cm5zKCdtRm9jdXNlZEFwcD1BcHBXaW5kb3dUb2tlbnszODYwMGI1NiB0b2tlbj1Ub2tlbns5ZWExMTcxICcgK1xuICAgICAgICAgICAgICAgICAnQWN0aXZpdHlSZWNvcmR7YyAwIGZvby9iYXIgdDE4MX19fScpO1xuXG4gICAgICBhd2FpdCBhZGIud2FpdEZvckFjdGl2aXR5T3JOb3QocGtnLCBhY3QsIHRydWUpO1xuICAgICAgbW9ja3MuYWRiLnZlcmlmeSgpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgY2FsbCBzaGVsbCBtdWx0aXBsZSB0aW1lcyBhbmQgcmV0dXJuIGZvciBub3QnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cygnc2hlbGwnKS5vbkNhbGwoMClcbiAgICAgICAgLnJldHVybnMoYG1Gb2N1c2VkQXBwPUFwcFdpbmRvd1Rva2VuezM4NjAwYjU2IHRva2VuPVRva2VuezllYTExNzEgYCArXG4gICAgICAgICAgICAgICAgIGBBY3Rpdml0eVJlY29yZHsyIHUgJHtwa2d9LyR7YWN0fSB0MTgxfX19YCk7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cygnc2hlbGwnKVxuICAgICAgICAucmV0dXJucygnbUZvY3VzZWRBcHA9QXBwV2luZG93VG9rZW57Mzg2MDBiNTYgdG9rZW49VG9rZW57OWVhMTE3MSAnICtcbiAgICAgICAgICAgICAgICAgJ0FjdGl2aXR5UmVjb3JkezJjN2M0MzE4IHUwIGZvby9iYXIgdDE4MX19fScpO1xuICAgICAgYXdhaXQgYWRiLndhaXRGb3JBY3Rpdml0eU9yTm90KHBrZywgYWN0LCB0cnVlKTtcbiAgICAgIG1vY2tzLmFkYi52ZXJpZnkoKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIGJlIGFibGUgdG8gZ2V0IGZpcnN0IG9mIGEgY29tbWEtc2VwYXJhdGVkIGxpc3Qgb2YgYWN0aXZpdGllcycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdzaGVsbCcpXG4gICAgICAgIC5vbmNlKCkud2l0aEV4YWN0QXJncyhbJ2R1bXBzeXMnLCAnd2luZG93JywgJ3dpbmRvd3MnXSlcbiAgICAgICAgLnJldHVybnMoYG1Gb2N1c2VkQXBwPUFwcFdpbmRvd1Rva2VuezM4NjAwYjU2IHRva2VuPVRva2VuezllYTExNzEgYCArXG4gICAgICAgICAgICAgICAgIGBBY3Rpdml0eVJlY29yZHsyIHUgJHtwa2d9Ly5Db250YWN0TWFuYWdlciB0MTgxfX19YCk7XG5cbiAgICAgIGF3YWl0IGFkYi53YWl0Rm9yQWN0aXZpdHlPck5vdChwa2csICcuQ29udGFjdE1hbmFnZXIsIC5PdGhlck1hbmFnZXInLCBmYWxzZSk7XG4gICAgICBtb2Nrcy5hZGIudmVyaWZ5KCk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBiZSBhYmxlIHRvIGdldCBzZWNvbmQgb2YgYSBjb21tYS1zZXBhcmF0ZWQgbGlzdCBvZiBhY3Rpdml0aWVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ3NoZWxsJylcbiAgICAgICAgLm9uY2UoKS53aXRoRXhhY3RBcmdzKFsnZHVtcHN5cycsICd3aW5kb3cnLCAnd2luZG93cyddKVxuICAgICAgICAucmV0dXJucyhgbUZvY3VzZWRBcHA9QXBwV2luZG93VG9rZW57Mzg2MDBiNTYgdG9rZW49VG9rZW57OWVhMTE3MSBgICtcbiAgICAgICAgICAgICAgICAgYEFjdGl2aXR5UmVjb3JkezIgdSAke3BrZ30vLk90aGVyTWFuYWdlciB0MTgxfX19YCk7XG5cbiAgICAgIGF3YWl0IGFkYi53YWl0Rm9yQWN0aXZpdHlPck5vdChwa2csICcuQ29udGFjdE1hbmFnZXIsIC5PdGhlck1hbmFnZXInLCBmYWxzZSk7XG4gICAgICBtb2Nrcy5hZGIudmVyaWZ5KCk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBmYWlsIGlmIG5vIGFjdGl2aXR5IGluIGEgY29tbWEtc2VwYXJhdGVkIGxpc3QgaXMgYXZhaWxhYmxlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ3NoZWxsJylcbiAgICAgICAgLmF0TGVhc3QoMSlcbiAgICAgICAgLndpdGhFeGFjdEFyZ3MoWydkdW1wc3lzJywgJ3dpbmRvdycsICd3aW5kb3dzJ10pXG4gICAgICAgIC5yZXR1cm5zKGBtRm9jdXNlZEFwcD1BcHBXaW5kb3dUb2tlbnszODYwMGI1NiB0b2tlbj1Ub2tlbns5ZWExMTcxIGAgK1xuICAgICAgICAgICAgICAgICBgQWN0aXZpdHlSZWNvcmR7MiB1ICR7cGtnfS8ke2FjdH0gdDE4MX19fWApO1xuXG4gICAgICBhd2FpdCBhZGIud2FpdEZvckFjdGl2aXR5T3JOb3QocGtnLCAnLlN1cGVyTWFuYWdlciwgLk90aGVyTWFuYWdlcicsIGZhbHNlLCAxMDAwKVxuICAgICAgICAuc2hvdWxkLmV2ZW50dWFsbHkuYmUucmVqZWN0ZWQ7XG4gICAgICBtb2Nrcy5hZGIudmVyaWZ5KCk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBiZSBhYmxlIHRvIG1hdGNoIGFjdGl2aXRpZXMgaWYgd2FpdEFjdGl2aXR5IGlzIGEgd2lsZGNhcmQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cygnc2hlbGwnKVxuICAgICAgICAub25jZSgpLndpdGhFeGFjdEFyZ3MoWydkdW1wc3lzJywgJ3dpbmRvdycsICd3aW5kb3dzJ10pXG4gICAgICAgIC5yZXR1cm5zKGBtRm9jdXNlZEFwcD1BcHBXaW5kb3dUb2tlbnszODYwMGI1NiB0b2tlbj1Ub2tlbns5ZWExMTcxIGAgK1xuICAgICAgICAgICAgICAgICBgQWN0aXZpdHlSZWNvcmR7MiB1ICR7cGtnfS8uQ29udGFjdE1hbmFnZXIgdDE4MX19fWApO1xuXG4gICAgICBhd2FpdCBhZGIud2FpdEZvckFjdGl2aXR5T3JOb3QocGtnLCBgKmAsIGZhbHNlKTtcbiAgICAgIG1vY2tzLmFkYi52ZXJpZnkoKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIGJlIGFibGUgdG8gbWF0Y2ggYWN0aXZpdGllcyBpZiB3YWl0QWN0aXZpdHkgaXMgc2hvcnRlbmVkIGFuZCBjb250YWlucyBhIHdoaWxkY2FyZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdzaGVsbCcpXG4gICAgICAgIC5vbmNlKCkud2l0aEV4YWN0QXJncyhbJ2R1bXBzeXMnLCAnd2luZG93JywgJ3dpbmRvd3MnXSlcbiAgICAgICAgLnJldHVybnMoYG1Gb2N1c2VkQXBwPUFwcFdpbmRvd1Rva2VuezM4NjAwYjU2IHRva2VuPVRva2VuezllYTExNzEgYCArXG4gICAgICAgICAgICAgICAgIGBBY3Rpdml0eVJlY29yZHsyIHUgJHtwa2d9Ly5Db250YWN0TWFuYWdlciB0MTgxfX19YCk7XG5cbiAgICAgIGF3YWl0IGFkYi53YWl0Rm9yQWN0aXZpdHlPck5vdChwa2csIGAuKk1hbmFnZXJgLCBmYWxzZSk7XG4gICAgICBtb2Nrcy5hZGIudmVyaWZ5KCk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBiZSBhYmxlIHRvIG1hdGNoIGFjdGl2aXRpZXMgaWYgd2FpdEFjdGl2aXR5IGNvbnRhaW5zIGEgd2lsZGNhcmQgYWx0ZXJuYXRpdmUgdG8gYWN0aXZpdHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cygnc2hlbGwnKVxuICAgICAgICAub25jZSgpLndpdGhFeGFjdEFyZ3MoWydkdW1wc3lzJywgJ3dpbmRvdycsICd3aW5kb3dzJ10pXG4gICAgICAgIC5yZXR1cm5zKGBtRm9jdXNlZEFwcD1BcHBXaW5kb3dUb2tlbnszODYwMGI1NiB0b2tlbj1Ub2tlbns5ZWExMTcxIGAgK1xuICAgICAgICAgICAgICAgICBgQWN0aXZpdHlSZWNvcmR7MiB1ICR7cGtnfS8uQ29udGFjdE1hbmFnZXIgdDE4MX19fWApO1xuXG4gICAgICBhd2FpdCBhZGIud2FpdEZvckFjdGl2aXR5T3JOb3QocGtnLCBgJHtwa2d9LipgLCBmYWxzZSk7XG4gICAgICBtb2Nrcy5hZGIudmVyaWZ5KCk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBiZSBhYmxlIHRvIG1hdGNoIGFjdGl2aXRpZXMgaWYgd2FpdEFjdGl2aXR5IGNvbnRhaW5zIGEgd2lsZGNhcmQgb24gaGVhZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdzaGVsbCcpXG4gICAgICAgIC5vbmNlKCkud2l0aEV4YWN0QXJncyhbJ2R1bXBzeXMnLCAnd2luZG93JywgJ3dpbmRvd3MnXSlcbiAgICAgICAgLnJldHVybnMoYG1Gb2N1c2VkQXBwPUFwcFdpbmRvd1Rva2VuezM4NjAwYjU2IHRva2VuPVRva2VuezllYTExNzEgYCArXG4gICAgICAgICAgICAgICAgIGBBY3Rpdml0eVJlY29yZHsyIHUgJHtwa2d9Ly5Db250YWN0TWFuYWdlciB0MTgxfX19YCk7XG5cbiAgICAgIGF3YWl0IGFkYi53YWl0Rm9yQWN0aXZpdHlPck5vdChwa2csIGAqLmNvbnRhY3RtYW5hZ2VyLkNvbnRhY3RNYW5hZ2VyYCwgZmFsc2UpO1xuICAgICAgbW9ja3MuYWRiLnZlcmlmeSgpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgYmUgYWJsZSB0byBtYXRjaCBhY3Rpdml0aWVzIGlmIHdhaXRBY3Rpdml0eSBjb250YWlucyBhIHdpbGRjYXJkIGFjcm9zcyBhIHBrZyBuYW1lIGFuZCBhbiBhY3Rpdml0eSBuYW1lJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ3NoZWxsJylcbiAgICAgICAgLm9uY2UoKS53aXRoRXhhY3RBcmdzKFsnZHVtcHN5cycsICd3aW5kb3cnLCAnd2luZG93cyddKVxuICAgICAgICAucmV0dXJucyhgbUZvY3VzZWRBcHA9QXBwV2luZG93VG9rZW57Mzg2MDBiNTYgdG9rZW49VG9rZW57OWVhMTE3MSBgICtcbiAgICAgICAgICAgICAgICAgYEFjdGl2aXR5UmVjb3JkezIgdSAke3BrZ30vLkNvbnRhY3RNYW5hZ2VyIHQxODF9fX1gKTtcblxuICAgICAgYXdhaXQgYWRiLndhaXRGb3JBY3Rpdml0eU9yTm90KHBrZywgYGNvbS4qTWFuYWdlcmAsIGZhbHNlKTtcbiAgICAgIG1vY2tzLmFkYi52ZXJpZnkoKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIGJlIGFibGUgdG8gbWF0Y2ggYWN0aXZpdGllcyBpZiB3YWl0QWN0aXZpdHkgY29udGFpbnMgd2lsZGNhcmRzIGluIGJvdGggYSBwa2cgbmFtZSBhbmQgYW4gYWN0aXZpdHkgbmFtZScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdzaGVsbCcpXG4gICAgICAgIC5vbmNlKCkud2l0aEV4YWN0QXJncyhbJ2R1bXBzeXMnLCAnd2luZG93JywgJ3dpbmRvd3MnXSlcbiAgICAgICAgLnJldHVybnMoYG1Gb2N1c2VkQXBwPUFwcFdpbmRvd1Rva2VuezM4NjAwYjU2IHRva2VuPVRva2VuezllYTExNzEgYCArXG4gICAgICAgICAgICAgICAgIGBBY3Rpdml0eVJlY29yZHsyIHUgJHtwa2d9Ly5Db250YWN0TWFuYWdlciB0MTgxfX19YCk7XG5cbiAgICAgIGF3YWl0IGFkYi53YWl0Rm9yQWN0aXZpdHlPck5vdChwa2csIGBjb20uKi5jb250YWN0bWFuYWdlci4qTWFuYWdlcmAsIGZhbHNlKTtcbiAgICAgIG1vY2tzLmFkYi52ZXJpZnkoKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIGZhaWwgaWYgYWN0aXZpdHkgbm90IHRvIG1hdGNoIGZyb20gcmVnZXhwIGFjdGl2aXRpZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cygnc2hlbGwnKVxuICAgICAgICAuYXRMZWFzdCgxKS53aXRoRXhhY3RBcmdzKFsnZHVtcHN5cycsICd3aW5kb3cnLCAnd2luZG93cyddKVxuICAgICAgICAucmV0dXJucyhgbUZvY3VzZWRBcHA9QXBwV2luZG93VG9rZW57Mzg2MDBiNTYgdG9rZW49VG9rZW57OWVhMTE3MSBgICtcbiAgICAgICAgICAgICAgICAgYEFjdGl2aXR5UmVjb3JkezIgdSBjb20uZXhhbXBsZS5hbmRyb2lkLnN1cGVybWFuYWdlci8uU3VwZXJNYW5hZ2VyIHQxODF9fX1gKTtcblxuICAgICAgYXdhaXQgYWRiLndhaXRGb3JBY3Rpdml0eU9yTm90KCdjb20uZXhhbXBsZS5hbmRyb2lkLnN1cGVybWFuYWdlcicsIGAke3BrZ30uKmAsIGZhbHNlLCAxMDAwKVxuICAgICAgICAuc2hvdWxkLmV2ZW50dWFsbHkuYmUucmVqZWN0ZWQ7XG4gICAgICBtb2Nrcy5hZGIudmVyaWZ5KCk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBiZSBhYmxlIHRvIGdldCBhbiBhY3Rpdml0eSB0aGF0IGlzIGFuIGlubmVyIGNsYXNzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ3NoZWxsJylcbiAgICAgICAgLm9uY2UoKS53aXRoRXhhY3RBcmdzKFsnZHVtcHN5cycsICd3aW5kb3cnLCAnd2luZG93cyddKVxuICAgICAgICAucmV0dXJucyhgbUZvY3VzZWRBcHA9QXBwV2luZG93VG9rZW57Mzg2MDBiNTYgdG9rZW49VG9rZW57OWVhMTE3MSBgICtcbiAgICAgICAgICBgQWN0aXZpdHlSZWNvcmR7MiB1ICR7cGtnfS8uU2V0dGluZ3MkQXBwRHJhd092ZXJsYXlTZXR0aW5nc0FjdGl2aXR5IHQxODF9fX1gKTtcblxuICAgICAgYXdhaXQgYWRiLndhaXRGb3JBY3Rpdml0eU9yTm90KHBrZywgJy5TZXR0aW5ncyRBcHBEcmF3T3ZlcmxheVNldHRpbmdzQWN0aXZpdHknLCBmYWxzZSk7XG4gICAgICBtb2Nrcy5hZGIudmVyaWZ5KCk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBiZSBhYmxlIHRvIGdldCBmaXJzdCBhY3Rpdml0eSBmcm9tIGZpcnN0IHBhY2thZ2UgaW4gYSBjb21tYS1zZXBhcmF0ZWQgbGlzdCBvZiBwYWNrYWdlcyArIGFjdGl2aXRpZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cygnc2hlbGwnKVxuICAgICAgICAub25jZSgpLndpdGhFeGFjdEFyZ3MoWydkdW1wc3lzJywgJ3dpbmRvdycsICd3aW5kb3dzJ10pXG4gICAgICAgIC5yZXR1cm5zKGBtRm9jdXNlZEFwcD1BcHBXaW5kb3dUb2tlbnszODYwMGI1NiB0b2tlbj1Ub2tlbns5ZWExMTcxIGAgK1xuICAgICAgICAgIGBBY3Rpdml0eVJlY29yZHsyIHUgY29tLmFuZHJvaWQuc2V0dGluZ3MvLkNvbnRhY3RNYW5hZ2VyIHQxODF9fX1gKTtcblxuICAgICAgYXdhaXQgYWRiLndhaXRGb3JBY3Rpdml0eU9yTm90KCdjb20uYW5kcm9pZC5zZXR0aW5ncyxjb20uZXhhbXBsZS5hbmRyb2lkLnN1cGVybWFuYWdlcicsICcuQ29udGFjdE1hbmFnZXIsLk90aGVyTWFuYWdlcicsIGZhbHNlKTtcbiAgICAgIG1vY2tzLmFkYi52ZXJpZnkoKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIGJlIGFibGUgdG8gZ2V0IGZpcnN0IGFjdGl2aXR5IGZyb20gc2Vjb25kIHBhY2thZ2UgaW4gYSBjb21tYS1zZXBhcmF0ZWQgbGlzdCBvZiBwYWNrYWdlcyArIGFjdGl2aXRpZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cygnc2hlbGwnKVxuICAgICAgICAub25jZSgpLndpdGhFeGFjdEFyZ3MoWydkdW1wc3lzJywgJ3dpbmRvdycsICd3aW5kb3dzJ10pXG4gICAgICAgIC5yZXR1cm5zKGBtRm9jdXNlZEFwcD1BcHBXaW5kb3dUb2tlbnszODYwMGI1NiB0b2tlbj1Ub2tlbns5ZWExMTcxIGAgK1xuICAgICAgICAgIGBBY3Rpdml0eVJlY29yZHsyIHUgY29tLmV4YW1wbGUuYW5kcm9pZC5zdXBlcm1hbmFnZXIvLkNvbnRhY3RNYW5hZ2VyIHQxODF9fX1gKTtcblxuICAgICAgYXdhaXQgYWRiLndhaXRGb3JBY3Rpdml0eU9yTm90KCdjb20uYW5kcm9pZC5zZXR0aW5ncyxjb20uZXhhbXBsZS5hbmRyb2lkLnN1cGVybWFuYWdlcicsICcuQ29udGFjdE1hbmFnZXIsLk90aGVyTWFuYWdlcicsIGZhbHNlKTtcbiAgICAgIG1vY2tzLmFkYi52ZXJpZnkoKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIGJlIGFibGUgdG8gZ2V0IHNlY29uZCBhY3Rpdml0eSBmcm9tIGZpcnN0IHBhY2thZ2UgaW4gYSBjb21tYS1zZXBhcmF0ZWQgbGlzdCBvZiBwYWNrYWdlcyArIGFjdGl2aXRpZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cygnc2hlbGwnKVxuICAgICAgICAub25jZSgpLndpdGhFeGFjdEFyZ3MoWydkdW1wc3lzJywgJ3dpbmRvdycsICd3aW5kb3dzJ10pXG4gICAgICAgIC5yZXR1cm5zKGBtRm9jdXNlZEFwcD1BcHBXaW5kb3dUb2tlbnszODYwMGI1NiB0b2tlbj1Ub2tlbns5ZWExMTcxIGAgK1xuICAgICAgICAgIGBBY3Rpdml0eVJlY29yZHsyIHUgY29tLmFuZHJvaWQuc2V0dGluZ3MvLk90aGVyTWFuYWdlciB0MTgxfX19YCk7XG5cbiAgICAgIGF3YWl0IGFkYi53YWl0Rm9yQWN0aXZpdHlPck5vdCgnY29tLmFuZHJvaWQuc2V0dGluZ3MsY29tLmV4YW1wbGUuYW5kcm9pZC5zdXBlcm1hbmFnZXInLCAnLkNvbnRhY3RNYW5hZ2VyLC5PdGhlck1hbmFnZXInLCBmYWxzZSk7XG4gICAgICBtb2Nrcy5hZGIudmVyaWZ5KCk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBiZSBhYmxlIHRvIGdldCBzZWNvbmQgYWN0aXZpdHkgZnJvbSBzZWNvbmQgcGFja2FnZSBpbiBhIGNvbW1hLXNlcGFyYXRlZCBsaXN0IG9mIHBhY2thZ2VzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ3NoZWxsJylcbiAgICAgICAgLm9uY2UoKS53aXRoRXhhY3RBcmdzKFsnZHVtcHN5cycsICd3aW5kb3cnLCAnd2luZG93cyddKVxuICAgICAgICAucmV0dXJucyhgbUZvY3VzZWRBcHA9QXBwV2luZG93VG9rZW57Mzg2MDBiNTYgdG9rZW49VG9rZW57OWVhMTE3MSBgICtcbiAgICAgICAgICBgQWN0aXZpdHlSZWNvcmR7MiB1IGNvbS5leGFtcGxlLmFuZHJvaWQuc3VwZXJtYW5hZ2VyLy5PdGhlck1hbmFnZXIgdDE4MX19fWApO1xuXG4gICAgICBhd2FpdCBhZGIud2FpdEZvckFjdGl2aXR5T3JOb3QoJ2NvbS5hbmRyb2lkLnNldHRpbmdzLGNvbS5leGFtcGxlLmFuZHJvaWQuc3VwZXJtYW5hZ2VyJywgJy5Db250YWN0TWFuYWdlciwuT3RoZXJNYW5hZ2VyJywgZmFsc2UpO1xuICAgICAgbW9ja3MuYWRiLnZlcmlmeSgpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgZmFpbCB0byBnZXQgYWN0aXZpdHkgd2hlbiBmb2N1c2VkIGFjdGl2aXR5IG1hdGNoZXMgbm9uZSBvZiB0aGUgcHJvdmlkZWQgbGlzdCBvZiBwYWNrYWdlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdzaGVsbCcpXG4gICAgICAgIC5hdExlYXN0KDEpLndpdGhFeGFjdEFyZ3MoWydkdW1wc3lzJywgJ3dpbmRvdycsICd3aW5kb3dzJ10pXG4gICAgICAgIC5yZXR1cm5zKGBtRm9jdXNlZEFwcD1BcHBXaW5kb3dUb2tlbnszODYwMGI1NiB0b2tlbj1Ub2tlbns5ZWExMTcxIGAgK1xuICAgICAgICAgIGBBY3Rpdml0eVJlY29yZHsyIHUgY29tLm90aGVycGFja2FnZS8uQ29udGFjdE1hbmFnZXIgdDE4MX19fWApO1xuXG4gICAgICBhd2FpdCBhZGIud2FpdEZvckFjdGl2aXR5T3JOb3QoJ2NvbS5hbmRyb2lkLnNldHRpbmdzLGNvbS5leGFtcGxlLmFuZHJvaWQuc3VwZXJtYW5hZ2VyJywgJy5Db250YWN0TWFuYWdlciwgLk90aGVyTWFuYWdlcicsIGZhbHNlLCAxMDAwKVxuICAgICAgICAuc2hvdWxkLmV2ZW50dWFsbHkuYmUucmVqZWN0ZWQ7XG4gICAgICBtb2Nrcy5hZGIudmVyaWZ5KCk7XG4gICAgfSk7XG4gIH0pKTtcbiAgZGVzY3JpYmUoJ3dhaXRGb3JBY3Rpdml0eScsIHdpdGhNb2Nrcyh7YWRifSwgKG1vY2tzKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBjYWxsIHdhaXRGb3JBY3Rpdml0eU9yTm90IHdpdGggY29ycmVjdCBhcmd1bWVudHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cygnd2FpdEZvckFjdGl2aXR5T3JOb3QnKVxuICAgICAgICAub25jZSgpLndpdGhFeGFjdEFyZ3MocGtnLCBhY3QsIGZhbHNlLCAyMDAwMClcbiAgICAgICAgLnJldHVybnMoJycpO1xuICAgICAgYXdhaXQgYWRiLndhaXRGb3JBY3Rpdml0eShwa2csIGFjdCk7XG4gICAgICBtb2Nrcy5hZGIudmVyaWZ5KCk7XG4gICAgfSk7XG4gIH0pKTtcbiAgZGVzY3JpYmUoJ3dhaXRGb3JOb3RBY3Rpdml0eScsIHdpdGhNb2Nrcyh7YWRifSwgKG1vY2tzKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBjYWxsIHdhaXRGb3JBY3Rpdml0eU9yTm90IHdpdGggY29ycmVjdCBhcmd1bWVudHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cygnd2FpdEZvckFjdGl2aXR5T3JOb3QnKVxuICAgICAgICAub25jZSgpLndpdGhFeGFjdEFyZ3MocGtnLCBhY3QsIHRydWUsIDIwMDAwKVxuICAgICAgICAucmV0dXJucygnJyk7XG4gICAgICBhd2FpdCBhZGIud2FpdEZvck5vdEFjdGl2aXR5KHBrZywgYWN0KTtcbiAgICAgIG1vY2tzLmFkYi52ZXJpZnkoKTtcbiAgICB9KTtcbiAgfSkpO1xuICBkZXNjcmliZSgndW5pbnN0YWxsQXBrJywgd2l0aE1vY2tzKHthZGJ9LCAobW9ja3MpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNhbGwgZm9yY2VTdG9wIGFuZCBhZGJFeGVjIHdpdGggY29ycmVjdCBhcmd1bWVudHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cygnZm9yY2VTdG9wJylcbiAgICAgICAgLm9uY2UoKS53aXRoRXhhY3RBcmdzKHBrZylcbiAgICAgICAgLnJldHVybnMoJycpO1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ2FkYkV4ZWMnKVxuICAgICAgICAub25jZSgpLndpdGhFeGFjdEFyZ3MoWyd1bmluc3RhbGwnLCBwa2ddLCB7dGltZW91dDogMjAwMDB9KVxuICAgICAgICAucmV0dXJucygnU3VjY2VzcycpO1xuICAgICAgKGF3YWl0IGFkYi51bmluc3RhbGxBcGsocGtnKSkuc2hvdWxkLmJlLnRydWU7XG4gICAgICBtb2Nrcy5hZGIudmVyaWZ5KCk7XG4gICAgfSk7XG4gIH0pKTtcbiAgZGVzY3JpYmUoJ2luc3RhbGxGcm9tRGV2aWNlUGF0aCcsIHdpdGhNb2Nrcyh7YWRifSwgKG1vY2tzKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBjYWxsIGZvcmNlU3RvcCBhbmQgYWRiRXhlYyB3aXRoIGNvcnJlY3QgYXJndW1lbnRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ3NoZWxsJylcbiAgICAgICAgLm9uY2UoKS53aXRoRXhhY3RBcmdzKFsncG0nLCAnaW5zdGFsbCcsICctcicsICdmb28nXSwge30pXG4gICAgICAgIC5yZXR1cm5zKCcnKTtcbiAgICAgIChhd2FpdCBhZGIuaW5zdGFsbEZyb21EZXZpY2VQYXRoKCdmb28nKSk7XG4gICAgICBtb2Nrcy5hZGIudmVyaWZ5KCk7XG4gICAgfSk7XG4gIH0pKTtcbiAgZGVzY3JpYmUoJ2luc3RhbGwnLCB3aXRoTW9ja3Moe2FkYn0sIChtb2NrcykgPT4ge1xuICAgIGl0KCdzaG91bGQgY2FsbCBmb3JjZVN0b3AgYW5kIGFkYkV4ZWMgd2l0aCBjb3JyZWN0IGFyZ3VtZW50cycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdhZGJFeGVjJylcbiAgICAgICAgLm9uY2UoKS53aXRoRXhhY3RBcmdzKFsnaW5zdGFsbCcsICctcicsICdmb28nXSwge3RpbWVvdXQ6IDYwMDAwfSlcbiAgICAgICAgLnJldHVybnMoJycpO1xuICAgICAgKGF3YWl0IGFkYi5pbnN0YWxsKCdmb28nKSk7XG4gICAgICBtb2Nrcy5hZGIudmVyaWZ5KCk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBjYWxsIGZvcmNlU3RvcCBhbmQgYWRiRXhlYyB3aXRoIGNvcnJlY3QgYXJndW1lbnRzIHdoZW4gbm90IHJlcGxhY2luZycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdhZGJFeGVjJylcbiAgICAgICAgLm9uY2UoKS53aXRoRXhhY3RBcmdzKFsnaW5zdGFsbCcsICdmb28nXSwge3RpbWVvdXQ6IDYwMDAwfSlcbiAgICAgICAgLnJldHVybnMoJycpO1xuICAgICAgKGF3YWl0IGFkYi5pbnN0YWxsKCdmb28nLCBmYWxzZSkpO1xuICAgICAgbW9ja3MuYWRiLnZlcmlmeSgpO1xuICAgIH0pO1xuICB9KSk7XG4gIGRlc2NyaWJlKCdzdGFydFVyaScsIHdpdGhNb2Nrcyh7YWRifSwgKG1vY2tzKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBmYWlsIGlmIHVyaSBvciBwa2cgYXJlIG5vdCBwcm92aWRlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGFkYi5zdGFydFVyaSgpLnNob3VsZC5ldmVudHVhbGx5LmJlLnJlamVjdGVkV2l0aCgvYXJndW1lbnRzIGFyZSByZXF1aXJlZC8pO1xuICAgICAgYXdhaXQgYWRiLnN0YXJ0VXJpKCdmb28nKS5zaG91bGQuZXZlbnR1YWxseS5iZS5yZWplY3RlZFdpdGgoL2FyZ3VtZW50cyBhcmUgcmVxdWlyZWQvKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIGJ1aWxkIGEgY2FsbCB0byBhIFZJRVcgaW50ZW50IHdpdGggdGhlIHVyaScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdzaGVsbCcpXG4gICAgICAgIC5vbmNlKCkud2l0aEV4YWN0QXJncyhbJ2FtJywgJ3N0YXJ0JywgJy1XJywgJy1hJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYW5kcm9pZC5pbnRlbnQuYWN0aW9uLlZJRVcnLCAnLWQnLCB1cmksIHBrZ10pO1xuICAgICAgYXdhaXQgYWRiLnN0YXJ0VXJpKHVyaSwgcGtnKTtcbiAgICAgIG1vY2tzLmFkYi52ZXJpZnkoKTtcbiAgICB9KTtcbiAgfSkpO1xuICBkZXNjcmliZSgnc3RhcnRBcHAnLCB3aXRoTW9ja3Moe2FkYn0sIChtb2NrcykgPT4ge1xuICAgIGl0KCdzaG91bGQgY2FsbCBnZXRBcGlMZXZlbCBhbmQgc2hlbGwgd2l0aCBjb3JyZWN0IGFyZ3VtZW50cycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdnZXRBcGlMZXZlbCcpXG4gICAgICAgIC5vbmNlKCkud2l0aEV4YWN0QXJncygpXG4gICAgICAgIC5yZXR1cm5zKCcxNycpO1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ3NoZWxsJylcbiAgICAgICAgLm9uY2UoKS53aXRoRXhhY3RBcmdzKGNtZClcbiAgICAgICAgLnJldHVybnMoJycpO1xuICAgICAgKGF3YWl0IGFkYi5zdGFydEFwcChzdGFydEFwcE9wdGlvbnMpKTtcbiAgICAgIG1vY2tzLmFkYi52ZXJpZnkoKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIGNhbGwgZ2V0QXBpTGV2ZWwgYW5kIHNoZWxsIHdpdGggY29ycmVjdCBhcmd1bWVudHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cygnZ2V0QXBpTGV2ZWwnKVxuICAgICAgICAudHdpY2UoKVxuICAgICAgICAucmV0dXJucygnMTcnKTtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdzaGVsbCcpXG4gICAgICAgIC5vbkNhbGwoMClcbiAgICAgICAgLnJldHVybnMoJ0Vycm9yOiBBY3Rpdml0eSBjbGFzcyBmb28gZG9lcyBub3QgZXhpc3QnKTtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdzaGVsbCcpXG4gICAgICAgIC5yZXR1cm5zKCcnKTtcbiAgICAgIChhd2FpdCBhZGIuc3RhcnRBcHAoc3RhcnRBcHBPcHRpb25zKSk7XG4gICAgICBtb2Nrcy5hZGIudmVyaWZ5KCk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBjYWxsIGdldEFwaUxldmVsIGFuZCBzaGVsbCB3aXRoIGNvcnJlY3QgYXJndW1lbnRzIHdoZW4gYWN0aXZpdHkgaXMgaW5uZXIgY2xhc3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzdGFydEFwcE9wdGlvbnNXaXRoSW5uZXJDbGFzcyA9IHsgcGtnOiAncGtnJywgYWN0aXZpdHk6ICdhY3QkSW5uZXJBY3QnfSxcbiAgICAgICAgICAgIGNtZFdpdGhJbm5lckNsYXNzID0gWydhbScsICdzdGFydCcsICctVycsICctbicsICdwa2cvYWN0XFxcXCRJbm5lckFjdCcsICctUyddO1xuXG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cygnZ2V0QXBpTGV2ZWwnKVxuICAgICAgICAub25jZSgpLndpdGhFeGFjdEFyZ3MoKVxuICAgICAgICAucmV0dXJucygnMTcnKTtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdzaGVsbCcpXG4gICAgICAgIC5vbmNlKCkud2l0aEV4YWN0QXJncyhjbWRXaXRoSW5uZXJDbGFzcylcbiAgICAgICAgLnJldHVybnMoJycpO1xuICAgICAgKGF3YWl0IGFkYi5zdGFydEFwcChzdGFydEFwcE9wdGlvbnNXaXRoSW5uZXJDbGFzcykpO1xuICAgICAgbW9ja3MuYWRiLnZlcmlmeSgpO1xuICAgIH0pO1xuICB9KSk7XG4gIGRlc2NyaWJlKCdnZXREZXZpY2VMYW5ndWFnZScsIHdpdGhNb2Nrcyh7YWRifSwgKG1vY2tzKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBjYWxsIHNoZWxsIG9uZSB0aW1lIHdpdGggY29ycmVjdCBhcmdzIGFuZCByZXR1cm4gbGFuZ3VhZ2Ugd2hlbiBBUEkgPCAyMycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKFwiZ2V0QXBpTGV2ZWxcIikucmV0dXJucygxOCk7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cyhcInNoZWxsXCIpXG4gICAgICAgIC5vbmNlKCkud2l0aEV4YWN0QXJncyhbJ2dldHByb3AnLCAncGVyc2lzdC5zeXMubGFuZ3VhZ2UnXSlcbiAgICAgICAgLnJldHVybnMobGFuZ3VhZ2UpO1xuICAgICAgKGF3YWl0IGFkYi5nZXREZXZpY2VMYW5ndWFnZSgpKS5zaG91bGQuZXF1YWwobGFuZ3VhZ2UpO1xuICAgICAgbW9ja3MuYWRiLnZlcmlmeSgpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgY2FsbCBzaGVsbCB0d28gdGltZXMgd2l0aCBjb3JyZWN0IGFyZ3MgYW5kIHJldHVybiBsYW5ndWFnZSB3aGVuIEFQSSA8IDIzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoXCJnZXRBcGlMZXZlbFwiKS5yZXR1cm5zKDE4KTtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKFwic2hlbGxcIilcbiAgICAgICAgLm9uY2UoKS53aXRoRXhhY3RBcmdzKFsnZ2V0cHJvcCcsICdwZXJzaXN0LnN5cy5sYW5ndWFnZSddKVxuICAgICAgICAucmV0dXJucygnJyk7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cyhcInNoZWxsXCIpXG4gICAgICAgIC5vbmNlKCkud2l0aEV4YWN0QXJncyhbJ2dldHByb3AnLCAncm8ucHJvZHVjdC5sb2NhbGUubGFuZ3VhZ2UnXSlcbiAgICAgICAgLnJldHVybnMobGFuZ3VhZ2UpO1xuICAgICAgKGF3YWl0IGFkYi5nZXREZXZpY2VMYW5ndWFnZSgpKS5zaG91bGQuZXF1YWwobGFuZ3VhZ2UpO1xuICAgICAgbW9ja3MuYWRiLnZlcmlmeSgpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgY2FsbCBzaGVsbCBvbmUgdGltZSB3aXRoIGNvcnJlY3QgYXJncyBhbmQgcmV0dXJuIGxhbmd1YWdlIHdoZW4gQVBJID0gMjMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cyhcImdldEFwaUxldmVsXCIpLnJldHVybnMoMjMpO1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoXCJzaGVsbFwiKVxuICAgICAgICAub25jZSgpLndpdGhFeGFjdEFyZ3MoWydnZXRwcm9wJywgJ3BlcnNpc3Quc3lzLmxvY2FsZSddKVxuICAgICAgICAucmV0dXJucyhsb2NhbGUpO1xuICAgICAgKGF3YWl0IGFkYi5nZXREZXZpY2VMYW5ndWFnZSgpKS5zaG91bGQuZXF1YWwobGFuZ3VhZ2UpO1xuICAgICAgbW9ja3MuYWRiLnZlcmlmeSgpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgY2FsbCBzaGVsbCB0d28gdGltZXMgd2l0aCBjb3JyZWN0IGFyZ3MgYW5kIHJldHVybiBsYW5ndWFnZSB3aGVuIEFQSSA9IDIzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoXCJnZXRBcGlMZXZlbFwiKS5yZXR1cm5zKDIzKTtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKFwic2hlbGxcIilcbiAgICAgICAgLm9uY2UoKS53aXRoRXhhY3RBcmdzKFsnZ2V0cHJvcCcsICdwZXJzaXN0LnN5cy5sb2NhbGUnXSlcbiAgICAgICAgLnJldHVybnMoJycpO1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoXCJzaGVsbFwiKVxuICAgICAgICAub25jZSgpLndpdGhFeGFjdEFyZ3MoWydnZXRwcm9wJywgJ3JvLnByb2R1Y3QubG9jYWxlJ10pXG4gICAgICAgIC5yZXR1cm5zKGxvY2FsZSk7XG4gICAgICAoYXdhaXQgYWRiLmdldERldmljZUxhbmd1YWdlKCkpLnNob3VsZC5lcXVhbChsYW5ndWFnZSk7XG4gICAgICBtb2Nrcy5hZGIudmVyaWZ5KCk7XG4gICAgfSk7XG4gIH0pKTtcbiAgZGVzY3JpYmUoJ3NldERldmljZUxhbmd1YWdlJywgd2l0aE1vY2tzKHthZGJ9LCAobW9ja3MpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNhbGwgc2hlbGwgb25lIHRpbWUgd2l0aCBjb3JyZWN0IGFyZ3Mgd2hlbiBBUEkgPCAyMycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKFwic2hlbGxcIilcbiAgICAgICAgLm9uY2UoKS53aXRoRXhhY3RBcmdzKFsnc2V0cHJvcCcsICdwZXJzaXN0LnN5cy5sYW5ndWFnZScsIGxhbmd1YWdlXSlcbiAgICAgICAgLnJldHVybnMoXCJcIik7XG4gICAgICBhd2FpdCBhZGIuc2V0RGV2aWNlTGFuZ3VhZ2UobGFuZ3VhZ2UpO1xuICAgICAgbW9ja3MuYWRiLnZlcmlmeSgpO1xuICAgIH0pO1xuICB9KSk7XG4gIGRlc2NyaWJlKCdnZXREZXZpY2VDb3VudHJ5Jywgd2l0aE1vY2tzKHthZGJ9LCAobW9ja3MpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNhbGwgc2hlbGwgb25lIHRpbWUgd2l0aCBjb3JyZWN0IGFyZ3MgYW5kIHJldHVybiBjb3VudHJ5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoXCJzaGVsbFwiKVxuICAgICAgICAub25jZSgpLndpdGhFeGFjdEFyZ3MoWydnZXRwcm9wJywgJ3BlcnNpc3Quc3lzLmNvdW50cnknXSlcbiAgICAgICAgLnJldHVybnMoY291bnRyeSk7XG4gICAgICAoYXdhaXQgYWRiLmdldERldmljZUNvdW50cnkoKSkuc2hvdWxkLmVxdWFsKGNvdW50cnkpO1xuICAgICAgbW9ja3MuYWRiLnZlcmlmeSgpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgY2FsbCBzaGVsbCB0d28gdGltZXMgd2l0aCBjb3JyZWN0IGFyZ3MgYW5kIHJldHVybiBjb3VudHJ5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoXCJzaGVsbFwiKVxuICAgICAgICAub25jZSgpLndpdGhFeGFjdEFyZ3MoWydnZXRwcm9wJywgJ3BlcnNpc3Quc3lzLmNvdW50cnknXSlcbiAgICAgICAgLnJldHVybnMoJycpO1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoXCJzaGVsbFwiKVxuICAgICAgICAub25jZSgpLndpdGhFeGFjdEFyZ3MoWydnZXRwcm9wJywgJ3JvLnByb2R1Y3QubG9jYWxlLnJlZ2lvbiddKVxuICAgICAgICAucmV0dXJucyhjb3VudHJ5KTtcbiAgICAgIChhd2FpdCBhZGIuZ2V0RGV2aWNlQ291bnRyeSgpKS5zaG91bGQuZXF1YWwoY291bnRyeSk7XG4gICAgICBtb2Nrcy5hZGIudmVyaWZ5KCk7XG4gICAgfSk7XG4gIH0pKTtcbiAgZGVzY3JpYmUoJ3NldERldmljZUNvdW50cnknLCB3aXRoTW9ja3Moe2FkYn0sIChtb2NrcykgPT4ge1xuICAgIGl0KCdzaG91bGQgY2FsbCBzaGVsbCBvbmUgdGltZSB3aXRoIGNvcnJlY3QgYXJncycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKFwic2hlbGxcIilcbiAgICAgICAgLm9uY2UoKS53aXRoRXhhY3RBcmdzKFsnc2V0cHJvcCcsICdwZXJzaXN0LnN5cy5jb3VudHJ5JywgY291bnRyeV0pXG4gICAgICAgIC5yZXR1cm5zKFwiXCIpO1xuICAgICAgYXdhaXQgYWRiLnNldERldmljZUNvdW50cnkoY291bnRyeSk7XG4gICAgICBtb2Nrcy5hZGIudmVyaWZ5KCk7XG4gICAgfSk7XG4gIH0pKTtcbiAgZGVzY3JpYmUoJ2dldERldmljZUxvY2FsZScsIHdpdGhNb2Nrcyh7YWRifSwgKG1vY2tzKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBjYWxsIHNoZWxsIG9uZSB0aW1lIHdpdGggY29ycmVjdCBhcmdzIGFuZCByZXR1cm4gbG9jYWxlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoXCJzaGVsbFwiKVxuICAgICAgICAub25jZSgpLndpdGhFeGFjdEFyZ3MoWydnZXRwcm9wJywgJ3BlcnNpc3Quc3lzLmxvY2FsZSddKVxuICAgICAgICAucmV0dXJucyhsb2NhbGUpO1xuICAgICAgKGF3YWl0IGFkYi5nZXREZXZpY2VMb2NhbGUoKSkuc2hvdWxkLmVxdWFsKGxvY2FsZSk7XG4gICAgICBtb2Nrcy5hZGIudmVyaWZ5KCk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBjYWxsIHNoZWxsIHR3byB0aW1lcyB3aXRoIGNvcnJlY3QgYXJncyBhbmQgcmV0dXJuIGxvY2FsZScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKFwic2hlbGxcIilcbiAgICAgICAgLm9uY2UoKS53aXRoRXhhY3RBcmdzKFsnZ2V0cHJvcCcsICdwZXJzaXN0LnN5cy5sb2NhbGUnXSlcbiAgICAgICAgLnJldHVybnMoJycpO1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoXCJzaGVsbFwiKVxuICAgICAgICAub25jZSgpLndpdGhFeGFjdEFyZ3MoWydnZXRwcm9wJywgJ3JvLnByb2R1Y3QubG9jYWxlJ10pXG4gICAgICAgIC5yZXR1cm5zKGxvY2FsZSk7XG4gICAgICAoYXdhaXQgYWRiLmdldERldmljZUxvY2FsZSgpKS5zaG91bGQuZXF1YWwobG9jYWxlKTtcbiAgICAgIG1vY2tzLmFkYi52ZXJpZnkoKTtcbiAgICB9KTtcbiAgfSkpO1xuICBkZXNjcmliZSgnc2V0RGV2aWNlTG9jYWxlJywgd2l0aE1vY2tzKHthZGJ9LCAobW9ja3MpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNhbGwgc2hlbGwgb25lIHRpbWUgd2l0aCBjb3JyZWN0IGFyZ3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cyhcInNoZWxsXCIpXG4gICAgICAgIC5vbmNlKCkud2l0aEV4YWN0QXJncyhbJ3NldHByb3AnLCAncGVyc2lzdC5zeXMubG9jYWxlJywgbG9jYWxlXSlcbiAgICAgICAgLnJldHVybnMoXCJcIik7XG4gICAgICBhd2FpdCBhZGIuc2V0RGV2aWNlTG9jYWxlKGxvY2FsZSk7XG4gICAgICBtb2Nrcy5hZGIudmVyaWZ5KCk7XG4gICAgfSk7XG4gIH0pKTtcbiAgZGVzY3JpYmUoJ2dldEFwa0luZm8nLCB3aXRoTW9ja3Moe2FkYiwgdGVlbl9wcm9jZXNzLCBmc30sIChtb2NrcykgPT4ge1xuICAgIGl0KCdzaG91bGQgcHJvcGVybHkgcGFyc2UgYXBrIGluZm8nLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2Nrcy5mcy5leHBlY3RzKCdleGlzdHMnKS5vbmNlKCkucmV0dXJucyh0cnVlKTtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdpbml0QWFwdCcpLm9uY2UoKS5yZXR1cm5zKHRydWUpO1xuICAgICAgbW9ja3MudGVlbl9wcm9jZXNzLmV4cGVjdHMoJ2V4ZWMnKS5vbmNlKCkucmV0dXJucyh7c3Rkb3V0OiBgcGFja2FnZTogbmFtZT0naW8uYXBwaXVtLnNldHRpbmdzJyB2ZXJzaW9uQ29kZT0nMicgdmVyc2lvbk5hbWU9JzEuMScgcGxhdGZvcm1CdWlsZFZlcnNpb25OYW1lPSc2LjAtMjE2Njc2NydcbiAgICAgIHNka1ZlcnNpb246JzE3J1xuICAgICAgdGFyZ2V0U2RrVmVyc2lvbjonMjMnXG4gICAgICB1c2VzLXBlcm1pc3Npb246IG5hbWU9J2FuZHJvaWQucGVybWlzc2lvbi5JTlRFUk5FVCdcbiAgICAgIHVzZXMtcGVybWlzc2lvbjogbmFtZT0nYW5kcm9pZC5wZXJtaXNzaW9uLkNIQU5HRV9ORVRXT1JLX1NUQVRFJ1xuICAgICAgdXNlcy1wZXJtaXNzaW9uOiBuYW1lPSdhbmRyb2lkLnBlcm1pc3Npb24uQUNDRVNTX05FVFdPUktfU1RBVEUnXG4gICAgICB1c2VzLXBlcm1pc3Npb246IG5hbWU9J2FuZHJvaWQucGVybWlzc2lvbi5SRUFEX1BIT05FX1NUQVRFJ1xuICAgICAgdXNlcy1wZXJtaXNzaW9uOiBuYW1lPSdhbmRyb2lkLnBlcm1pc3Npb24uV1JJVEVfU0VUVElOR1MnXG4gICAgICB1c2VzLXBlcm1pc3Npb246IG5hbWU9J2FuZHJvaWQucGVybWlzc2lvbi5DSEFOR0VfV0lGSV9TVEFURSdcbiAgICAgIHVzZXMtcGVybWlzc2lvbjogbmFtZT0nYW5kcm9pZC5wZXJtaXNzaW9uLkFDQ0VTU19XSUZJX1NUQVRFJ1xuICAgICAgdXNlcy1wZXJtaXNzaW9uOiBuYW1lPSdhbmRyb2lkLnBlcm1pc3Npb24uQUNDRVNTX0ZJTkVfTE9DQVRJT04nXG4gICAgICB1c2VzLXBlcm1pc3Npb246IG5hbWU9J2FuZHJvaWQucGVybWlzc2lvbi5BQ0NFU1NfQ09BUlNFX0xPQ0FUSU9OJ1xuICAgICAgdXNlcy1wZXJtaXNzaW9uOiBuYW1lPSdhbmRyb2lkLnBlcm1pc3Npb24uQUNDRVNTX01PQ0tfTE9DQVRJT04nXG4gICAgICBhcHBsaWNhdGlvbi1sYWJlbDonQXBwaXVtIFNldHRpbmdzJ1xuICAgICAgYXBwbGljYXRpb24taWNvbi0xMjA6J3Jlcy9kcmF3YWJsZS1sZHBpLXY0L2ljX2xhdW5jaGVyLnBuZydcbiAgICAgIGFwcGxpY2F0aW9uLWljb24tMTYwOidyZXMvZHJhd2FibGUtbWRwaS12NC9pY19sYXVuY2hlci5wbmcnXG4gICAgICBhcHBsaWNhdGlvbi1pY29uLTI0MDoncmVzL2RyYXdhYmxlLWhkcGktdjQvaWNfbGF1bmNoZXIucG5nJ1xuICAgICAgYXBwbGljYXRpb24taWNvbi0zMjA6J3Jlcy9kcmF3YWJsZS14aGRwaS12NC9pY19sYXVuY2hlci5wbmcnXG4gICAgICBhcHBsaWNhdGlvbjogbGFiZWw9J0FwcGl1bSBTZXR0aW5ncycgaWNvbj0ncmVzL2RyYXdhYmxlLW1kcGktdjQvaWNfbGF1bmNoZXIucG5nJ1xuICAgICAgYXBwbGljYXRpb24tZGVidWdnYWJsZVxuICAgICAgbGF1bmNoYWJsZS1hY3Rpdml0eTogbmFtZT0naW8uYXBwaXVtLnNldHRpbmdzLlNldHRpbmdzJyAgbGFiZWw9J0FwcGl1bSBTZXR0aW5ncycgaWNvbj0nJ1xuICAgICAgZmVhdHVyZS1ncm91cDogbGFiZWw9JydcbiAgICAgICAgdXNlcy1mZWF0dXJlOiBuYW1lPSdhbmRyb2lkLmhhcmR3YXJlLndpZmknXG4gICAgICAgIHVzZXMtZmVhdHVyZTogbmFtZT0nYW5kcm9pZC5oYXJkd2FyZS5sb2NhdGlvbidcbiAgICAgICAgdXNlcy1pbXBsaWVkLWZlYXR1cmU6IG5hbWU9J2FuZHJvaWQuaGFyZHdhcmUubG9jYXRpb24nIHJlYXNvbj0ncmVxdWVzdGVkIGFuZHJvaWQucGVybWlzc2lvbi5BQ0NFU1NfQ09BUlNFX0xPQ0FUSU9OIHBlcm1pc3Npb24sIHJlcXVlc3RlZCBhbmRyb2lkLnBlcm1pc3Npb24uQUNDRVNTX0ZJTkVfTE9DQVRJT04gcGVybWlzc2lvbiwgYW5kIHJlcXVlc3RlZCBhbmRyb2lkLnBlcm1pc3Npb24uQUNDRVNTX01PQ0tfTE9DQVRJT04gcGVybWlzc2lvbidcbiAgICAgICAgdXNlcy1mZWF0dXJlOiBuYW1lPSdhbmRyb2lkLmhhcmR3YXJlLmxvY2F0aW9uLmdwcydcbiAgICAgICAgdXNlcy1pbXBsaWVkLWZlYXR1cmU6IG5hbWU9J2FuZHJvaWQuaGFyZHdhcmUubG9jYXRpb24uZ3BzJyByZWFzb249J3JlcXVlc3RlZCBhbmRyb2lkLnBlcm1pc3Npb24uQUNDRVNTX0ZJTkVfTE9DQVRJT04gcGVybWlzc2lvbidcbiAgICAgICAgdXNlcy1mZWF0dXJlOiBuYW1lPSdhbmRyb2lkLmhhcmR3YXJlLmxvY2F0aW9uLm5ldHdvcmsnXG4gICAgICAgIHVzZXMtaW1wbGllZC1mZWF0dXJlOiBuYW1lPSdhbmRyb2lkLmhhcmR3YXJlLmxvY2F0aW9uLm5ldHdvcmsnIHJlYXNvbj0ncmVxdWVzdGVkIGFuZHJvaWQucGVybWlzc2lvbi5BQ0NFU1NfQ09BUlNFX0xPQ0FUSU9OIHBlcm1pc3Npb24nXG4gICAgICAgIHVzZXMtZmVhdHVyZTogbmFtZT0nYW5kcm9pZC5oYXJkd2FyZS50b3VjaHNjcmVlbidcbiAgICAgICAgdXNlcy1pbXBsaWVkLWZlYXR1cmU6IG5hbWU9J2FuZHJvaWQuaGFyZHdhcmUudG91Y2hzY3JlZW4nIHJlYXNvbj0nZGVmYXVsdCBmZWF0dXJlIGZvciBhbGwgYXBwcydcbiAgICAgIG1haW5cbiAgICAgIG90aGVyLXJlY2VpdmVyc1xuICAgICAgb3RoZXItc2VydmljZXNcbiAgICAgIHN1cHBvcnRzLXNjcmVlbnM6ICdzbWFsbCcgJ25vcm1hbCcgJ2xhcmdlJyAneGxhcmdlJ1xuICAgICAgc3VwcG9ydHMtYW55LWRlbnNpdHk6ICd0cnVlJ1xuICAgICAgbG9jYWxlczogJy0tXy0tJ1xuICAgICAgZGVuc2l0aWVzOiAnMTIwJyAnMTYwJyAnMjQwJyAnMzIwJ2B9KTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFkYi5nZXRBcGtJbmZvKCcvc29tZS9mb2xkZXIvcGF0aC5hcGsnKTtcbiAgICAgIGZvciAobGV0IFtuYW1lLCB2YWx1ZV0gb2YgW1snbmFtZScsICdpby5hcHBpdW0uc2V0dGluZ3MnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsndmVyc2lvbkNvZGUnLCAyXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsndmVyc2lvbk5hbWUnLCAnMS4xJ11dKSB7XG4gICAgICAgIHJlc3VsdC5zaG91bGQuaGF2ZS5wcm9wZXJ0eShuYW1lLCB2YWx1ZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pKTtcbiAgZGVzY3JpYmUoJ2dldFBhY2thZ2VJbmZvJywgd2l0aE1vY2tzKHthZGJ9LCAobW9ja3MpID0+IHtcbiAgICBpdCgnc2hvdWxkIHByb3Blcmx5IHBhcnNlIGluc3RhbGxlZCBwYWNrYWdlIGluZm8nLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cygnc2hlbGwnKS5vbmNlKCkucmV0dXJucyhgUGFja2FnZXM6XG4gICAgICBQYWNrYWdlIFtjb20uZXhhbXBsZS50ZXN0YXBwLmZpcnN0XSAoMjAzNmZkMSk6XG4gICAgICAgIHVzZXJJZD0xMDIyNVxuICAgICAgICBwa2c9UGFja2FnZXs0MmU3YTM2IGNvbS5leGFtcGxlLnRlc3RhcHAuZmlyc3R9XG4gICAgICAgIGNvZGVQYXRoPS9kYXRhL2FwcC9jb20uZXhhbXBsZS50ZXN0YXBwLmZpcnN0LTFcbiAgICAgICAgcmVzb3VyY2VQYXRoPS9kYXRhL2FwcC9jb20uZXhhbXBsZS50ZXN0YXBwLmZpcnN0LTFcbiAgICAgICAgbGVnYWN5TmF0aXZlTGlicmFyeURpcj0vZGF0YS9hcHAvY29tLmV4YW1wbGUudGVzdGFwcC5maXJzdC0xL2xpYlxuICAgICAgICBwcmltYXJ5Q3B1QWJpPW51bGxcbiAgICAgICAgc2Vjb25kYXJ5Q3B1QWJpPW51bGxcbiAgICAgICAgdmVyc2lvbkNvZGU9MSBtaW5TZGs9MjEgdGFyZ2V0U2RrPTI0XG4gICAgICAgIHZlcnNpb25OYW1lPTEuMFxuICAgICAgICBzcGxpdHM9W2Jhc2VdXG4gICAgICAgIGFwa1NpZ25pbmdWZXJzaW9uPTFcbiAgICAgICAgYXBwbGljYXRpb25JbmZvPUFwcGxpY2F0aW9uSW5mb3syOWNiMmE0IGNvbS5leGFtcGxlLnRlc3RhcHAuZmlyc3R9XG4gICAgICAgIGZsYWdzPVsgSEFTX0NPREUgQUxMT1dfQ0xFQVJfVVNFUl9EQVRBIEFMTE9XX0JBQ0tVUCBdXG4gICAgICAgIHByaXZhdGVGbGFncz1bIFJFU0laRUFCTEVfQUNUSVZJVElFUyBdXG4gICAgICAgIGRhdGFEaXI9L2RhdGEvdXNlci8wL2NvbS5leGFtcGxlLnRlc3RhcHAuZmlyc3RcbiAgICAgICAgc3VwcG9ydHNTY3JlZW5zPVtzbWFsbCwgbWVkaXVtLCBsYXJnZSwgeGxhcmdlLCByZXNpemVhYmxlLCBhbnlEZW5zaXR5XVxuICAgICAgICB0aW1lU3RhbXA9MjAxNi0xMS0wMyAwMToxMjowOFxuICAgICAgICBmaXJzdEluc3RhbGxUaW1lPTIwMTYtMTEtMDMgMDE6MTI6MDlcbiAgICAgICAgbGFzdFVwZGF0ZVRpbWU9MjAxNi0xMS0wMyAwMToxMjowOVxuICAgICAgICBzaWduYXR1cmVzPVBhY2thZ2VTaWduYXR1cmVzezlmZTM4MGQgWzUzZWExMDhkXX1cbiAgICAgICAgaW5zdGFsbFBlcm1pc3Npb25zRml4ZWQ9dHJ1ZSBpbnN0YWxsU3RhdHVzPTFcbiAgICAgICAgcGtnRmxhZ3M9WyBIQVNfQ09ERSBBTExPV19DTEVBUl9VU0VSX0RBVEEgQUxMT1dfQkFDS1VQIF1cbiAgICAgICAgVXNlciAwOiBjZURhdGFJbm9kZT00NzQzMTcgaW5zdGFsbGVkPXRydWUgaGlkZGVuPWZhbHNlIHN1c3BlbmRlZD1mYWxzZSBzdG9wcGVkPXRydWUgbm90TGF1bmNoZWQ9dHJ1ZSBlbmFibGVkPTBcbiAgICAgICAgICBydW50aW1lIHBlcm1pc3Npb25zOmApO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYWRiLmdldFBhY2thZ2VJbmZvKCdjb20uZXhhbXBsZS50ZXN0YXBwLmZpcnN0Jyk7XG4gICAgICBmb3IgKGxldCBbbmFtZSwgdmFsdWVdIG9mIFtbJ25hbWUnLCAnY29tLmV4YW1wbGUudGVzdGFwcC5maXJzdCddLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWyd2ZXJzaW9uQ29kZScsIDFdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWyd2ZXJzaW9uTmFtZScsICcxLjAnXV0pIHtcbiAgICAgICAgcmVzdWx0LnNob3VsZC5oYXZlLnByb3BlcnR5KG5hbWUsIHZhbHVlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSkpO1xuICBkZXNjcmliZSgnaW5zdGFsbE9yVXBncmFkZScsIHdpdGhNb2Nrcyh7YWRifSwgKG1vY2tzKSA9PiB7XG4gICAgY29uc3QgcGtnSWQgPSAnaW8uYXBwaXVtLnNldHRpbmdzJztcbiAgICBjb25zdCBhcGtQYXRoID0gJy9wYXRoL3RvL215LmFwayc7XG5cbiAgICBpdCgnc2hvdWxkIGV4ZWN1dGUgaW5zdGFsbCBpZiB0aGUgcGFja2FnZSBpcyBub3QgcHJlc2VudCcsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdnZXRBcGtJbmZvJykud2l0aEV4YWN0QXJncyhhcGtQYXRoKS5vbmNlKCkucmV0dXJucyh7XG4gICAgICAgIG5hbWU6IHBrZ0lkXG4gICAgICB9KTtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdpc0FwcEluc3RhbGxlZCcpLndpdGhFeGFjdEFyZ3MocGtnSWQpLm9uY2UoKS5yZXR1cm5zKGZhbHNlKTtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdpbnN0YWxsJykud2l0aEFyZ3MoYXBrUGF0aCwgZmFsc2UpLm9uY2UoKS5yZXR1cm5zKHRydWUpO1xuICAgICAgYXdhaXQgYWRiLmluc3RhbGxPclVwZ3JhZGUoYXBrUGF0aCk7XG4gICAgICBtb2Nrcy5hZGIudmVyaWZ5KCk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gaWYgdGhlIHNhbWUgcGFja2FnZSB2ZXJzaW9uIGlzIGFscmVhZHkgaW5zdGFsbGVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ2dldEFwa0luZm8nKS53aXRoRXhhY3RBcmdzKGFwa1BhdGgpLm9uY2UoKS5yZXR1cm5zKHtcbiAgICAgICAgdmVyc2lvbkNvZGU6IDFcbiAgICAgIH0pO1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ2dldFBhY2thZ2VJbmZvJykub25jZSgpLnJldHVybnMoe1xuICAgICAgICB2ZXJzaW9uQ29kZTogMVxuICAgICAgfSk7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cygnaXNBcHBJbnN0YWxsZWQnKS53aXRoRXhhY3RBcmdzKHBrZ0lkKS5vbmNlKCkucmV0dXJucyh0cnVlKTtcbiAgICAgIGF3YWl0IGFkYi5pbnN0YWxsT3JVcGdyYWRlKGFwa1BhdGgsIHBrZ0lkKTtcbiAgICAgIG1vY2tzLmFkYi52ZXJpZnkoKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBpZiBuZXdlciBwYWNrYWdlIHZlcnNpb24gaXMgYWxyZWFkeSBpbnN0YWxsZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cygnZ2V0QXBrSW5mbycpLndpdGhFeGFjdEFyZ3MoYXBrUGF0aCkub25jZSgpLnJldHVybnMoe1xuICAgICAgICBuYW1lOiBwa2dJZCxcbiAgICAgICAgdmVyc2lvbkNvZGU6IDFcbiAgICAgIH0pO1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ2dldFBhY2thZ2VJbmZvJykub25jZSgpLnJldHVybnMoe1xuICAgICAgICB2ZXJzaW9uQ29kZTogMlxuICAgICAgfSk7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cygnaXNBcHBJbnN0YWxsZWQnKS53aXRoRXhhY3RBcmdzKHBrZ0lkKS5vbmNlKCkucmV0dXJucyh0cnVlKTtcbiAgICAgIGF3YWl0IGFkYi5pbnN0YWxsT3JVcGdyYWRlKGFwa1BhdGgpO1xuICAgICAgbW9ja3MuYWRiLnZlcmlmeSgpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgbm90IHRocm93IGFuIGVycm9yIGlmIGFwayB2ZXJzaW9uIGNvZGUgY2Fubm90IGJlIHJlYWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cygnZ2V0QXBrSW5mbycpLndpdGhFeGFjdEFyZ3MoYXBrUGF0aCkub25jZSgpLnJldHVybnMoe1xuICAgICAgICBuYW1lOiBwa2dJZFxuICAgICAgfSk7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cygnZ2V0UGFja2FnZUluZm8nKS5vbmNlKCkucmV0dXJucyh7XG4gICAgICAgIHZlcnNpb25Db2RlOiAyXG4gICAgICB9KTtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdpc0FwcEluc3RhbGxlZCcpLndpdGhFeGFjdEFyZ3MocGtnSWQpLm9uY2UoKS5yZXR1cm5zKHRydWUpO1xuICAgICAgYXdhaXQgYWRiLmluc3RhbGxPclVwZ3JhZGUoYXBrUGF0aCk7XG4gICAgICBtb2Nrcy5hZGIudmVyaWZ5KCk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBub3QgdGhyb3cgYW4gZXJyb3IgaWYgcGtnIHZlcnNpb24gY29kZSBjYW5ub3QgYmUgcmVhZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdnZXRBcGtJbmZvJykud2l0aEV4YWN0QXJncyhhcGtQYXRoKS5vbmNlKCkucmV0dXJucyh7XG4gICAgICAgIG5hbWU6IHBrZ0lkLFxuICAgICAgICB2ZXJzaW9uQ29kZTogMVxuICAgICAgfSk7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cygnZ2V0UGFja2FnZUluZm8nKS5vbmNlKCkucmV0dXJucyh7fSk7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cygnaXNBcHBJbnN0YWxsZWQnKS53aXRoRXhhY3RBcmdzKHBrZ0lkKS5vbmNlKCkucmV0dXJucyh0cnVlKTtcbiAgICAgIGF3YWl0IGFkYi5pbnN0YWxsT3JVcGdyYWRlKGFwa1BhdGgpO1xuICAgICAgbW9ja3MuYWRiLnZlcmlmeSgpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgbm90IHRocm93IGFuIGVycm9yIGlmIHBrZyBpZCBjYW5ub3QgYmUgcmVhZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdnZXRBcGtJbmZvJykud2l0aEV4YWN0QXJncyhhcGtQYXRoKS5vbmNlKCkucmV0dXJucyh7fSk7XG4gICAgICBhd2FpdCBhZGIuaW5zdGFsbE9yVXBncmFkZShhcGtQYXRoKTtcbiAgICAgIG1vY2tzLmFkYi52ZXJpZnkoKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIHBlcmZvcm0gdXBncmFkZSBpZiBvbGRlciBwYWNrYWdlIHZlcnNpb24gaXMgaW5zdGFsbGVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ2dldEFwa0luZm8nKS53aXRoRXhhY3RBcmdzKGFwa1BhdGgpLm9uY2UoKS5yZXR1cm5zKHtcbiAgICAgICAgbmFtZTogcGtnSWQsXG4gICAgICAgIHZlcnNpb25Db2RlOiAyXG4gICAgICB9KTtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdnZXRQYWNrYWdlSW5mbycpLm9uY2UoKS5yZXR1cm5zKHtcbiAgICAgICAgdmVyc2lvbkNvZGU6IDFcbiAgICAgIH0pO1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ2lzQXBwSW5zdGFsbGVkJykud2l0aEV4YWN0QXJncyhwa2dJZCkub25jZSgpLnJldHVybnModHJ1ZSk7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cygnaW5zdGFsbCcpLndpdGhBcmdzKGFwa1BhdGgsIHRydWUpLm9uY2UoKS5yZXR1cm5zKHRydWUpO1xuICAgICAgYXdhaXQgYWRiLmluc3RhbGxPclVwZ3JhZGUoYXBrUGF0aCk7XG4gICAgICBtb2Nrcy5hZGIudmVyaWZ5KCk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCB0aHJvdyBhbiBleGNlcHRpb24gaWYgdXBncmFkZSBhbmQgcmVpbnN0YWxsIGZhaWwnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cygnZ2V0QXBrSW5mbycpLndpdGhFeGFjdEFyZ3MoYXBrUGF0aCkub25jZSgpLnJldHVybnMoe1xuICAgICAgICBuYW1lOiBwa2dJZCxcbiAgICAgICAgdmVyc2lvbkNvZGU6IDJcbiAgICAgIH0pO1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ2dldFBhY2thZ2VJbmZvJykub25jZSgpLnJldHVybnMoe1xuICAgICAgICB2ZXJzaW9uQ29kZTogMVxuICAgICAgfSk7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cygnaXNBcHBJbnN0YWxsZWQnKS53aXRoRXhhY3RBcmdzKHBrZ0lkKS5vbmNlKCkucmV0dXJucyh0cnVlKTtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCd1bmluc3RhbGxBcGsnKS53aXRoRXhhY3RBcmdzKHBrZ0lkKS5vbmNlKCkucmV0dXJucyh0cnVlKTtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdpbnN0YWxsJykud2l0aEFyZ3MoYXBrUGF0aCkudHdpY2UoKS50aHJvd3MoKTtcbiAgICAgIGxldCBpc0V4Y2VwdGlvblRocm93biA9IGZhbHNlO1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgYWRiLmluc3RhbGxPclVwZ3JhZGUoYXBrUGF0aCk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGlzRXhjZXB0aW9uVGhyb3duID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlzRXhjZXB0aW9uVGhyb3duLnNob3VsZC5iZS50cnVlO1xuICAgICAgbW9ja3MuYWRiLnZlcmlmeSgpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgdGhyb3cgYW4gZXhjZXB0aW9uIGlmIHVwZ3JhZGUgYW5kIHVuaW5zdGFsbCBmYWlsJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ2dldEFwa0luZm8nKS53aXRoRXhhY3RBcmdzKGFwa1BhdGgpLm9uY2UoKS5yZXR1cm5zKHtcbiAgICAgICAgbmFtZTogcGtnSWQsXG4gICAgICAgIHZlcnNpb25Db2RlOiAyXG4gICAgICB9KTtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdnZXRQYWNrYWdlSW5mbycpLm9uY2UoKS5yZXR1cm5zKHtcbiAgICAgICAgdmVyc2lvbkNvZGU6IDFcbiAgICAgIH0pO1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ2lzQXBwSW5zdGFsbGVkJykud2l0aEV4YWN0QXJncyhwa2dJZCkub25jZSgpLnJldHVybnModHJ1ZSk7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cygndW5pbnN0YWxsQXBrJykud2l0aEV4YWN0QXJncyhwa2dJZCkub25jZSgpLnJldHVybnMoZmFsc2UpO1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ2luc3RhbGwnKS53aXRoQXJncyhhcGtQYXRoLCB0cnVlKS5vbmNlKCkudGhyb3dzKCk7XG4gICAgICBsZXQgaXNFeGNlcHRpb25UaHJvd24gPSBmYWxzZTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IGFkYi5pbnN0YWxsT3JVcGdyYWRlKGFwa1BhdGgpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBpc0V4Y2VwdGlvblRocm93biA9IHRydWU7XG4gICAgICB9XG4gICAgICBpc0V4Y2VwdGlvblRocm93bi5zaG91bGQuYmUudHJ1ZTtcbiAgICAgIG1vY2tzLmFkYi52ZXJpZnkoKTtcbiAgICB9KTtcbiAgfSkpO1xufSk7XG4iXSwic291cmNlUm9vdCI6Ii4uLy4uLy4uIn0=

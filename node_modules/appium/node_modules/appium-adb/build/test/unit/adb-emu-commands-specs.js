'use strict';

var _regeneratorRuntime = require('babel-runtime/regenerator')['default'];

var _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];

var _this = this;

var _chai = require('chai');

var _chai2 = _interopRequireDefault(_chai);

var _chaiAsPromised = require('chai-as-promised');

var _chaiAsPromised2 = _interopRequireDefault(_chaiAsPromised);

var _ = require('../..');

var _2 = _interopRequireDefault(_);

var _appiumTestSupport = require('appium-test-support');

_chai2['default'].use(_chaiAsPromised2['default']);
_chai2['default'].should();

var emulators = [{ udid: 'emulator-5554', state: 'device', port: 5554 }, { udid: 'emulator-5556', state: 'device', port: 5556 }];
var fingerprintId = 1111;

describe('adb emulator commands', function () {
  var adb = new _2['default']();
  describe("emu", function () {
    describe("isEmulatorConnected", (0, _appiumTestSupport.withMocks)({ adb: adb }, function (mocks) {
      it("should verify emulators state", function callee$3$0() {
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              mocks.adb.expects("getConnectedEmulators").atLeast(3).returns(emulators);
              adb.curDeviceId = "emulator-5554";
              context$4$0.next = 4;
              return _regeneratorRuntime.awrap(adb.isEmulatorConnected());

            case 4:
              context$4$0.sent.should.equal(true);

              adb.curDeviceId = "emulator-5556";
              context$4$0.next = 8;
              return _regeneratorRuntime.awrap(adb.isEmulatorConnected());

            case 8:
              context$4$0.sent.should.equal(true);

              adb.curDeviceId = "emulator-5558";
              context$4$0.next = 12;
              return _regeneratorRuntime.awrap(adb.isEmulatorConnected());

            case 12:
              context$4$0.sent.should.equal(false);

              mocks.adb.verify();

            case 14:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this);
      });
    }));
    describe("verifyEmulatorConnected", (0, _appiumTestSupport.withMocks)({ adb: adb }, function (mocks) {
      it("should throw an exception on emulator not connected", function callee$3$0() {
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              adb.curDeviceId = "emulator-5558";
              mocks.adb.expects("isEmulatorConnected").once().returns(false);
              context$4$0.next = 4;
              return _regeneratorRuntime.awrap(adb.verifyEmulatorConnected().should.eventually.be.rejected);

            case 4:
              mocks.adb.verify();

            case 5:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this);
      });
    }));
    describe("fingerprint", (0, _appiumTestSupport.withMocks)({ adb: adb }, function (mocks) {
      it("should throw exception on undefined fingerprintId", function callee$3$0() {
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              context$4$0.next = 2;
              return _regeneratorRuntime.awrap(adb.fingerprint().should.eventually.be.rejected);

            case 2:
              mocks.adb.verify();

            case 3:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this);
      });
      it("should throw exception on apiLevel lower than 23", function callee$3$0() {
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              mocks.adb.expects("getApiLevel").once().withExactArgs().returns(21);
              context$4$0.next = 3;
              return _regeneratorRuntime.awrap(adb.fingerprint(fingerprintId).should.eventually.be.rejected);

            case 3:
              mocks.adb.verify();

            case 4:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this);
      });
      it("should call adbExec with the correct args", function callee$3$0() {
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              mocks.adb.expects("getApiLevel").once().withExactArgs().returns(23);
              mocks.adb.expects("isEmulatorConnected").once().withExactArgs().returns(true);
              mocks.adb.expects("resetTelnetAuthToken").once().withExactArgs().returns();
              mocks.adb.expects("adbExec").once().withExactArgs(["emu", "finger", "touch", fingerprintId]).returns();
              context$4$0.next = 6;
              return _regeneratorRuntime.awrap(adb.fingerprint(fingerprintId));

            case 6:
              mocks.adb.verify();

            case 7:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this);
      });
    }));
    describe("rotate", (0, _appiumTestSupport.withMocks)({ adb: adb }, function (mocks) {
      it("should call adbExec with the correct args", function callee$3$0() {
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              mocks.adb.expects("isEmulatorConnected").once().withExactArgs().returns(true);
              mocks.adb.expects("resetTelnetAuthToken").once().withExactArgs().returns();
              mocks.adb.expects("adbExec").once().withExactArgs(["emu", "rotate"]).returns();
              context$4$0.next = 5;
              return _regeneratorRuntime.awrap(adb.rotate());

            case 5:
              mocks.adb.verify();

            case 6:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this);
      });
    }));
    describe("power methods", (0, _appiumTestSupport.withMocks)({ adb: adb }, function (mocks) {
      it("should throw exception on invalid power ac state", function callee$3$0() {
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              context$4$0.next = 2;
              return _regeneratorRuntime.awrap(adb.powerAC('dead').should.eventually.be.rejectedWith("Wrong power AC state"));

            case 2:
              mocks.adb.verify();

            case 3:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this);
      });
      it("should set the power ac off", function callee$3$0() {
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              mocks.adb.expects("isEmulatorConnected").once().withExactArgs().returns(true);
              mocks.adb.expects("resetTelnetAuthToken").once().withExactArgs().returns();
              mocks.adb.expects("adbExec").once().withExactArgs(["emu", "power", "ac", adb.POWER_AC_STATES.POWER_AC_OFF]).returns();
              context$4$0.next = 5;
              return _regeneratorRuntime.awrap(adb.powerAC('off'));

            case 5:
              mocks.adb.verify();

            case 6:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this);
      });
      it("should set the power ac on", function callee$3$0() {
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              mocks.adb.expects("isEmulatorConnected").once().withExactArgs().returns(true);
              mocks.adb.expects("resetTelnetAuthToken").once().withExactArgs().returns();
              mocks.adb.expects("adbExec").once().withExactArgs(["emu", "power", "ac", adb.POWER_AC_STATES.POWER_AC_ON]).returns();
              context$4$0.next = 5;
              return _regeneratorRuntime.awrap(adb.powerAC('on'));

            case 5:
              mocks.adb.verify();

            case 6:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this);
      });
      it("should throw exception on invalid power battery percent", function callee$3$0() {
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              context$4$0.next = 2;
              return _regeneratorRuntime.awrap(adb.powerCapacity(-1).should.eventually.be.rejectedWith("should be valid integer between 0 and 100"));

            case 2:
              context$4$0.next = 4;
              return _regeneratorRuntime.awrap(adb.powerCapacity("a").should.eventually.be.rejectedWith("should be valid integer between 0 and 100"));

            case 4:
              context$4$0.next = 6;
              return _regeneratorRuntime.awrap(adb.powerCapacity(500).should.eventually.be.rejectedWith("should be valid integer between 0 and 100"));

            case 6:
              mocks.adb.verify();

            case 7:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this);
      });
      it("should set the power capacity", function callee$3$0() {
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              mocks.adb.expects("isEmulatorConnected").once().withExactArgs().returns(true);
              mocks.adb.expects("resetTelnetAuthToken").once().withExactArgs().returns();
              mocks.adb.expects("adbExec").once().withExactArgs(["emu", "power", "capacity", 0]).returns();
              context$4$0.next = 5;
              return _regeneratorRuntime.awrap(adb.powerCapacity(0));

            case 5:
              mocks.adb.verify();

            case 6:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this);
      });
      it("should call methods to power off the emulator", function callee$3$0() {
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              mocks.adb.expects("powerAC").once().withExactArgs('off').returns();
              mocks.adb.expects("powerCapacity").once().withExactArgs(0).returns();
              context$4$0.next = 4;
              return _regeneratorRuntime.awrap(adb.powerOFF());

            case 4:
              mocks.adb.verify();

            case 5:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this);
      });
    }));
    describe("sendSMS", (0, _appiumTestSupport.withMocks)({ adb: adb }, function (mocks) {
      it("should throw exception on invalid message", function callee$3$0() {
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              context$4$0.next = 2;
              return _regeneratorRuntime.awrap(adb.sendSMS("+549341312345678").should.eventually.be.rejectedWith("Sending an SMS requires a message"));

            case 2:
              mocks.adb.verify();

            case 3:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this);
      });
      it("should throw exception on invalid phoneNumber", function callee$3$0() {
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              context$4$0.next = 2;
              return _regeneratorRuntime.awrap(adb.sendSMS("00549341a312345678", 'Hello Appium').should.eventually.be.rejectedWith("Invalid sendSMS phoneNumber"));

            case 2:
              mocks.adb.verify();

            case 3:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this);
      });
      it("should call adbExec with the correct args", function callee$3$0() {
        var phoneNumber, message;
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              phoneNumber = 4509;
              message = " Hello Appium ";

              mocks.adb.expects("isEmulatorConnected").once().withExactArgs().returns(true);
              mocks.adb.expects("resetTelnetAuthToken").once().withExactArgs().returns();
              mocks.adb.expects("adbExec").once().withExactArgs(["emu", "sms", "send", "4509", "Hello Appium"]).returns();
              context$4$0.next = 7;
              return _regeneratorRuntime.awrap(adb.sendSMS(phoneNumber, message));

            case 7:
              mocks.adb.verify();

            case 8:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this);
      });
    }));
    describe("gsm signal method", (0, _appiumTestSupport.withMocks)({ adb: adb }, function (mocks) {
      it("should throw exception on invalid strength", function callee$3$0() {
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              context$4$0.next = 2;
              return _regeneratorRuntime.awrap(adb.gsmSignal(5).should.eventually.be.rejectedWith("Invalid signal strength"));

            case 2:
              mocks.adb.verify();

            case 3:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this);
      });
      it("should call adbExecEmu with the correct args", function callee$3$0() {
        var signalStrength;
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              signalStrength = 0;

              mocks.adb.expects("isEmulatorConnected").once().withExactArgs().returns(true);
              mocks.adb.expects("resetTelnetAuthToken").once().withExactArgs().returns();
              mocks.adb.expects("adbExec").once().withExactArgs(["emu", "gsm", 'signal-profile', signalStrength]).returns();
              context$4$0.next = 6;
              return _regeneratorRuntime.awrap(adb.gsmSignal(signalStrength));

            case 6:
              mocks.adb.verify();

            case 7:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this);
      });
    }));
    describe("gsm call methods", (0, _appiumTestSupport.withMocks)({ adb: adb }, function (mocks) {
      it("should throw exception on invalid action", function callee$3$0() {
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              context$4$0.next = 2;
              return _regeneratorRuntime.awrap(adb.gsmCall("+549341312345678").should.eventually.be.rejectedWith("Invalid gsm action"));

            case 2:
              mocks.adb.verify();

            case 3:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this);
      });
      it("should throw exception on invalid phoneNumber", function callee$3$0() {
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              context$4$0.next = 2;
              return _regeneratorRuntime.awrap(adb.gsmCall("+5493413a12345678", "call").should.eventually.be.rejectedWith("Invalid gsmCall phoneNumber"));

            case 2:
              mocks.adb.verify();

            case 3:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this);
      });
      it("should set the correct method for making gsm call", function callee$3$0() {
        var phoneNumber;
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              phoneNumber = 4509;

              mocks.adb.expects("isEmulatorConnected").once().withExactArgs().returns(true);
              mocks.adb.expects("resetTelnetAuthToken").once().withExactArgs().returns();
              mocks.adb.expects("adbExec").once().withExactArgs(["emu", "gsm", adb.GSM_CALL_ACTIONS.GSM_CALL, "4509"]).returns();
              context$4$0.next = 6;
              return _regeneratorRuntime.awrap(adb.gsmCall(phoneNumber, "call"));

            case 6:
              mocks.adb.verify();

            case 7:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this);
      });
      it("should set the correct method for accepting gsm call", function callee$3$0() {
        var phoneNumber;
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              phoneNumber = 4509;

              mocks.adb.expects("isEmulatorConnected").once().withExactArgs().returns(true);
              mocks.adb.expects("resetTelnetAuthToken").once().withExactArgs().returns();
              mocks.adb.expects("adbExec").once().withExactArgs(["emu", "gsm", adb.GSM_CALL_ACTIONS.GSM_ACCEPT, "4509"]).returns();
              context$4$0.next = 6;
              return _regeneratorRuntime.awrap(adb.gsmCall(phoneNumber, "accept"));

            case 6:
              mocks.adb.verify();

            case 7:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this);
      });
      it("should set the correct method for refusing gsm call", function callee$3$0() {
        var phoneNumber;
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              phoneNumber = 4509;

              mocks.adb.expects("isEmulatorConnected").once().withExactArgs().returns(true);
              mocks.adb.expects("resetTelnetAuthToken").once().withExactArgs().returns();
              mocks.adb.expects("adbExec").once().withExactArgs(["emu", "gsm", adb.GSM_CALL_ACTIONS.GSM_CANCEL, "4509"]).returns();
              context$4$0.next = 6;
              return _regeneratorRuntime.awrap(adb.gsmCall(phoneNumber, "cancel"));

            case 6:
              mocks.adb.verify();

            case 7:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this);
      });
      it("should set the correct method for holding gsm call", function callee$3$0() {
        var phoneNumber;
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              phoneNumber = 4509;

              mocks.adb.expects("isEmulatorConnected").once().withExactArgs().returns(true);
              mocks.adb.expects("resetTelnetAuthToken").once().withExactArgs().returns();
              mocks.adb.expects("adbExec").once().withExactArgs(["emu", "gsm", adb.GSM_CALL_ACTIONS.GSM_HOLD, "4509"]).returns();
              context$4$0.next = 6;
              return _regeneratorRuntime.awrap(adb.gsmCall(phoneNumber, "hold"));

            case 6:
              mocks.adb.verify();

            case 7:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this);
      });
    }));
    describe("gsm voice method", (0, _appiumTestSupport.withMocks)({ adb: adb }, function (mocks) {
      it("should throw exception on invalid strength", function callee$3$0() {
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              context$4$0.next = 2;
              return _regeneratorRuntime.awrap(adb.gsmVoice('weird').should.eventually.be.rejectedWith("Invalid gsm voice state"));

            case 2:
              mocks.adb.verify();

            case 3:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this);
      });
      it("should set gsm voice to unregistered", function callee$3$0() {
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              mocks.adb.expects("isEmulatorConnected").once().withExactArgs().returns(true);
              mocks.adb.expects("resetTelnetAuthToken").once().withExactArgs().returns();
              mocks.adb.expects("adbExec").once().withExactArgs(["emu", "gsm", "voice", adb.GSM_VOICE_STATES.GSM_VOICE_UNREGISTERED]).returns();
              context$4$0.next = 5;
              return _regeneratorRuntime.awrap(adb.gsmVoice("unregistered"));

            case 5:
              mocks.adb.verify();

            case 6:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this);
      });
      it("should set gsm voice to home", function callee$3$0() {
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              mocks.adb.expects("isEmulatorConnected").once().withExactArgs().returns(true);
              mocks.adb.expects("resetTelnetAuthToken").once().withExactArgs().returns();
              mocks.adb.expects("adbExec").once().withExactArgs(["emu", "gsm", "voice", adb.GSM_VOICE_STATES.GSM_VOICE_HOME]).returns();
              context$4$0.next = 5;
              return _regeneratorRuntime.awrap(adb.gsmVoice("home"));

            case 5:
              mocks.adb.verify();

            case 6:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this);
      });
      it("should set gsm voice to roaming", function callee$3$0() {
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              mocks.adb.expects("isEmulatorConnected").once().withExactArgs().returns(true);
              mocks.adb.expects("resetTelnetAuthToken").once().withExactArgs().returns();
              mocks.adb.expects("adbExec").once().withExactArgs(["emu", "gsm", "voice", adb.GSM_VOICE_STATES.GSM_VOICE_ROAMING]).returns();
              context$4$0.next = 5;
              return _regeneratorRuntime.awrap(adb.gsmVoice("roaming"));

            case 5:
              mocks.adb.verify();

            case 6:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this);
      });
      it("should set gsm voice to searching", function callee$3$0() {
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              mocks.adb.expects("isEmulatorConnected").once().withExactArgs().returns(true);
              mocks.adb.expects("resetTelnetAuthToken").once().withExactArgs().returns();
              mocks.adb.expects("adbExec").once().withExactArgs(["emu", "gsm", "voice", adb.GSM_VOICE_STATES.GSM_VOICE_SEARCHING]).returns();
              context$4$0.next = 5;
              return _regeneratorRuntime.awrap(adb.gsmVoice("searching"));

            case 5:
              mocks.adb.verify();

            case 6:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this);
      });
      it("should set gsm voice to denied", function callee$3$0() {
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              mocks.adb.expects("isEmulatorConnected").once().withExactArgs().returns(true);
              mocks.adb.expects("resetTelnetAuthToken").once().withExactArgs().returns();
              mocks.adb.expects("adbExec").once().withExactArgs(["emu", "gsm", "voice", adb.GSM_VOICE_STATES.GSM_VOICE_DENIED]).returns();
              context$4$0.next = 5;
              return _regeneratorRuntime.awrap(adb.gsmVoice("denied"));

            case 5:
              mocks.adb.verify();

            case 6:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this);
      });
      it("should set gsm voice to off", function callee$3$0() {
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              mocks.adb.expects("isEmulatorConnected").once().withExactArgs().returns(true);
              mocks.adb.expects("resetTelnetAuthToken").once().withExactArgs().returns();
              mocks.adb.expects("adbExec").once().withExactArgs(["emu", "gsm", "voice", adb.GSM_VOICE_STATES.GSM_VOICE_OFF]).returns();
              context$4$0.next = 5;
              return _regeneratorRuntime.awrap(adb.gsmVoice("off"));

            case 5:
              mocks.adb.verify();

            case 6:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this);
      });
      it("should set gsm voice to on", function callee$3$0() {
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              mocks.adb.expects("isEmulatorConnected").once().withExactArgs().returns(true);
              mocks.adb.expects("resetTelnetAuthToken").once().withExactArgs().returns();
              mocks.adb.expects("adbExec").once().withExactArgs(["emu", "gsm", "voice", adb.GSM_VOICE_STATES.GSM_VOICE_ON]).returns();
              context$4$0.next = 5;
              return _regeneratorRuntime.awrap(adb.gsmVoice("on"));

            case 5:
              mocks.adb.verify();

            case 6:
            case 'end':
              return context$4$0.stop();
          }
        }, null, _this);
      });
    }));
  });
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QvdW5pdC9hZGItZW11LWNvbW1hbmRzLXNwZWNzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O29CQUFpQixNQUFNOzs7OzhCQUNJLGtCQUFrQjs7OztnQkFDN0IsT0FBTzs7OztpQ0FDRyxxQkFBcUI7O0FBRy9DLGtCQUFLLEdBQUcsNkJBQWdCLENBQUM7QUFDekIsa0JBQUssTUFBTSxFQUFFLENBQUM7O0FBRWQsSUFBTSxTQUFTLEdBQUcsQ0FDaEIsRUFBRSxJQUFJLEVBQUUsZUFBZSxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxFQUN0RCxFQUFFLElBQUksRUFBRSxlQUFlLEVBQUUsS0FBSyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLENBQ3ZELENBQUM7QUFDRixJQUFNLGFBQWEsR0FBRyxJQUFJLENBQUM7O0FBRTNCLFFBQVEsQ0FBQyx1QkFBdUIsRUFBRSxZQUFNO0FBQ3RDLE1BQUksR0FBRyxHQUFHLG1CQUFTLENBQUM7QUFDcEIsVUFBUSxDQUFDLEtBQUssRUFBRSxZQUFNO0FBQ3BCLFlBQVEsQ0FBQyxxQkFBcUIsRUFBRSxrQ0FBVSxFQUFDLEdBQUcsRUFBSCxHQUFHLEVBQUMsRUFBRSxVQUFDLEtBQUssRUFBSztBQUMxRCxRQUFFLENBQUMsK0JBQStCLEVBQUU7Ozs7QUFDbEMsbUJBQUssQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLHVCQUF1QixDQUFDLENBQ3ZDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FDVixPQUFPLENBQUMsU0FBUyxDQUFDLENBQUM7QUFDdEIsaUJBQUcsQ0FBQyxXQUFXLEdBQUcsZUFBZSxDQUFDOzsrQ0FDM0IsR0FBRyxDQUFDLG1CQUFtQixFQUFFOzs7K0JBQUUsTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJOztBQUNuRCxpQkFBRyxDQUFDLFdBQVcsR0FBRyxlQUFlLENBQUM7OytDQUMzQixHQUFHLENBQUMsbUJBQW1CLEVBQUU7OzsrQkFB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QUFTLENBQUMsQ0FDekIsSUFBSSxFQUFFLENBQUMsYUFBYSxDQUFDLENBQUMsS0FBSyxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQUUsR0FBRyxDQUFDLGdCQUFnQixDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQ2pGLE9BQU8sRUFBRSxDQUFDOzsrQ0FDUCxHQUFHLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQzs7O0FBQ3pCLG1CQUFLLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSxDQUFDOzs7Ozs7O09BQ3BCLENBQUMsQ0FBQztBQUNILFFBQUUsQ0FBQyw0QkFBNEIsRUFBRTs7OztBQUMvQixtQkFBSyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMscUJBQXFCLENBQUMsQ0FDckMsSUFBSSxFQUFFLENBQUMsYUFBYSxFQUFFLENBQ3RCLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUNqQixtQkFBSyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsc0JBQXNCLENBQUMsQ0FDdEMsSUFBSSxFQUFFLENBQUMsYUFBYSxFQUFFLENBQ3RCLE9BQU8sRUFBRSxDQUFDO0FBQ2IsbUJBQUssQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUN6QixJQUFJLEVBQUUsQ0FBQyxhQUFhLENBQUMsQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRSxHQUFHLENBQUMsZ0JBQWdCLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FDaEYsT0FBTyxFQUFFLENBQUM7OytDQUNQLEdBQUcsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDOzs7QUFDeEIsbUJBQUssQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLENBQUM7Ozs7Ozs7T0FDcEIsQ0FBQyxDQUFDO0tBQ0osQ0FBQyxDQUFDLENBQUM7R0FDTCxDQUFDLENBQUM7Q0FDSixDQUFDLENBQUMiLCJmaWxlIjoidGVzdC91bml0L2FkYi1lbXUtY29tbWFuZHMtc3BlY3MuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY2hhaSBmcm9tICdjaGFpJztcbmltcG9ydCBjaGFpQXNQcm9taXNlZCBmcm9tICdjaGFpLWFzLXByb21pc2VkJztcbmltcG9ydCBBREIgZnJvbSAnLi4vLi4nO1xuaW1wb3J0IHsgd2l0aE1vY2tzIH0gZnJvbSAnYXBwaXVtLXRlc3Qtc3VwcG9ydCc7XG5cblxuY2hhaS51c2UoY2hhaUFzUHJvbWlzZWQpO1xuY2hhaS5zaG91bGQoKTtcblxuY29uc3QgZW11bGF0b3JzID0gW1xuICB7IHVkaWQ6ICdlbXVsYXRvci01NTU0Jywgc3RhdGU6ICdkZXZpY2UnLCBwb3J0OiA1NTU0IH0sXG4gIHsgdWRpZDogJ2VtdWxhdG9yLTU1NTYnLCBzdGF0ZTogJ2RldmljZScsIHBvcnQ6IDU1NTYgfSxcbl07XG5jb25zdCBmaW5nZXJwcmludElkID0gMTExMTtcblxuZGVzY3JpYmUoJ2FkYiBlbXVsYXRvciBjb21tYW5kcycsICgpID0+IHtcbiAgbGV0IGFkYiA9IG5ldyBBREIoKTtcbiAgZGVzY3JpYmUoXCJlbXVcIiwgKCkgPT4ge1xuICAgIGRlc2NyaWJlKFwiaXNFbXVsYXRvckNvbm5lY3RlZFwiLCB3aXRoTW9ja3Moe2FkYn0sIChtb2NrcykgPT4ge1xuICAgICAgaXQoXCJzaG91bGQgdmVyaWZ5IGVtdWxhdG9ycyBzdGF0ZVwiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIG1vY2tzLmFkYi5leHBlY3RzKFwiZ2V0Q29ubmVjdGVkRW11bGF0b3JzXCIpXG4gICAgICAgICAgLmF0TGVhc3QoMylcbiAgICAgICAgICAucmV0dXJucyhlbXVsYXRvcnMpO1xuICAgICAgICBhZGIuY3VyRGV2aWNlSWQgPSBcImVtdWxhdG9yLTU1NTRcIjtcbiAgICAgICAgKGF3YWl0IGFkYi5pc0VtdWxhdG9yQ29ubmVjdGVkKCkpLnNob3VsZC5lcXVhbCh0cnVlKTtcbiAgICAgICAgYWRiLmN1ckRldmljZUlkID0gXCJlbXVsYXRvci01NTU2XCI7XG4gICAgICAgIChhd2FpdCBhZGIuaXNFbXVsYXRvckNvbm5lY3RlZCgpKS5zaG91bGQuZXF1YWwodHJ1ZSk7XG4gICAgICAgIGFkYi5jdXJEZXZpY2VJZCA9IFwiZW11bGF0b3ItNTU1OFwiO1xuICAgICAgICAoYXdhaXQgYWRiLmlzRW11bGF0b3JDb25uZWN0ZWQoKSkuc2hvdWxkLmVxdWFsKGZhbHNlKTtcbiAgICAgICAgbW9ja3MuYWRiLnZlcmlmeSgpO1xuICAgICAgfSk7XG4gICAgfSkpO1xuICAgIGRlc2NyaWJlKFwidmVyaWZ5RW11bGF0b3JDb25uZWN0ZWRcIiwgd2l0aE1vY2tzKHthZGJ9LCAobW9ja3MpID0+IHtcbiAgICAgIGl0KFwic2hvdWxkIHRocm93IGFuIGV4Y2VwdGlvbiBvbiBlbXVsYXRvciBub3QgY29ubmVjdGVkXCIsIGFzeW5jICgpID0+IHtcbiAgICAgICAgYWRiLmN1ckRldmljZUlkID0gXCJlbXVsYXRvci01NTU4XCI7XG4gICAgICAgIG1vY2tzLmFkYi5leHBlY3RzKFwiaXNFbXVsYXRvckNvbm5lY3RlZFwiKVxuICAgICAgICAgIC5vbmNlKClcbiAgICAgICAgICAucmV0dXJucyhmYWxzZSk7XG4gICAgICAgIGF3YWl0IGFkYi52ZXJpZnlFbXVsYXRvckNvbm5lY3RlZCgpLnNob3VsZC5ldmVudHVhbGx5LmJlLnJlamVjdGVkO1xuICAgICAgICBtb2Nrcy5hZGIudmVyaWZ5KCk7XG4gICAgICB9KTtcbiAgICB9KSk7XG4gICAgZGVzY3JpYmUoXCJmaW5nZXJwcmludFwiLCB3aXRoTW9ja3Moe2FkYn0sIChtb2NrcykgPT4ge1xuICAgICAgaXQoXCJzaG91bGQgdGhyb3cgZXhjZXB0aW9uIG9uIHVuZGVmaW5lZCBmaW5nZXJwcmludElkXCIsIGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgYWRiLmZpbmdlcnByaW50KCkuc2hvdWxkLmV2ZW50dWFsbHkuYmUucmVqZWN0ZWQ7XG4gICAgICAgIG1vY2tzLmFkYi52ZXJpZnkoKTtcbiAgICAgIH0pO1xuICAgICAgaXQoXCJzaG91bGQgdGhyb3cgZXhjZXB0aW9uIG9uIGFwaUxldmVsIGxvd2VyIHRoYW4gMjNcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICBtb2Nrcy5hZGIuZXhwZWN0cyhcImdldEFwaUxldmVsXCIpXG4gICAgICAgICAgLm9uY2UoKS53aXRoRXhhY3RBcmdzKClcbiAgICAgICAgICAucmV0dXJucygyMSk7XG4gICAgICAgIGF3YWl0IGFkYi5maW5nZXJwcmludChmaW5nZXJwcmludElkKS5zaG91bGQuZXZlbnR1YWxseS5iZS5yZWplY3RlZDtcbiAgICAgICAgbW9ja3MuYWRiLnZlcmlmeSgpO1xuICAgICAgfSk7XG4gICAgICBpdChcInNob3VsZCBjYWxsIGFkYkV4ZWMgd2l0aCB0aGUgY29ycmVjdCBhcmdzXCIsIGFzeW5jICgpID0+IHtcbiAgICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoXCJnZXRBcGlMZXZlbFwiKVxuICAgICAgICAgIC5vbmNlKCkud2l0aEV4YWN0QXJncygpXG4gICAgICAgICAgLnJldHVybnMoMjMpO1xuICAgICAgICBtb2Nrcy5hZGIuZXhwZWN0cyhcImlzRW11bGF0b3JDb25uZWN0ZWRcIilcbiAgICAgICAgICAub25jZSgpLndpdGhFeGFjdEFyZ3MoKVxuICAgICAgICAgIC5yZXR1cm5zKHRydWUpO1xuICAgICAgICBtb2Nrcy5hZGIuZXhwZWN0cyhcInJlc2V0VGVsbmV0QXV0aFRva2VuXCIpXG4gICAgICAgICAgLm9uY2UoKS53aXRoRXhhY3RBcmdzKClcbiAgICAgICAgICAucmV0dXJucygpO1xuICAgICAgICBtb2Nrcy5hZGIuZXhwZWN0cyhcImFkYkV4ZWNcIilcbiAgICAgICAgICAub25jZSgpLndpdGhFeGFjdEFyZ3MoW1wiZW11XCIsIFwiZmluZ2VyXCIsIFwidG91Y2hcIiwgZmluZ2VycHJpbnRJZF0pXG4gICAgICAgICAgLnJldHVybnMoKTtcbiAgICAgICAgYXdhaXQgYWRiLmZpbmdlcnByaW50KGZpbmdlcnByaW50SWQpO1xuICAgICAgICBtb2Nrcy5hZGIudmVyaWZ5KCk7XG4gICAgICB9KTtcbiAgICB9KSk7XG4gICAgZGVzY3JpYmUoXCJyb3RhdGVcIiwgd2l0aE1vY2tzKHthZGJ9LCAobW9ja3MpID0+IHtcbiAgICAgIGl0KFwic2hvdWxkIGNhbGwgYWRiRXhlYyB3aXRoIHRoZSBjb3JyZWN0IGFyZ3NcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICBtb2Nrcy5hZGIuZXhwZWN0cyhcImlzRW11bGF0b3JDb25uZWN0ZWRcIilcbiAgICAgICAgICAub25jZSgpLndpdGhFeGFjdEFyZ3MoKVxuICAgICAgICAgIC5yZXR1cm5zKHRydWUpO1xuICAgICAgICBtb2Nrcy5hZGIuZXhwZWN0cyhcInJlc2V0VGVsbmV0QXV0aFRva2VuXCIpXG4gICAgICAgICAgLm9uY2UoKS53aXRoRXhhY3RBcmdzKClcbiAgICAgICAgICAucmV0dXJucygpO1xuICAgICAgICBtb2Nrcy5hZGIuZXhwZWN0cyhcImFkYkV4ZWNcIilcbiAgICAgICAgICAub25jZSgpLndpdGhFeGFjdEFyZ3MoW1wiZW11XCIsIFwicm90YXRlXCJdKVxuICAgICAgICAgIC5yZXR1cm5zKCk7XG4gICAgICAgIGF3YWl0IGFkYi5yb3RhdGUoKTtcbiAgICAgICAgbW9ja3MuYWRiLnZlcmlmeSgpO1xuICAgICAgfSk7XG4gICAgfSkpO1xuICAgIGRlc2NyaWJlKFwicG93ZXIgbWV0aG9kc1wiLCB3aXRoTW9ja3Moe2FkYn0sIChtb2NrcykgPT4ge1xuICAgICAgaXQoXCJzaG91bGQgdGhyb3cgZXhjZXB0aW9uIG9uIGludmFsaWQgcG93ZXIgYWMgc3RhdGVcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCBhZGIucG93ZXJBQygnZGVhZCcpLnNob3VsZC5ldmVudHVhbGx5LmJlLnJlamVjdGVkV2l0aChcIldyb25nIHBvd2VyIEFDIHN0YXRlXCIpO1xuICAgICAgICBtb2Nrcy5hZGIudmVyaWZ5KCk7XG4gICAgICB9KTtcbiAgICAgIGl0KFwic2hvdWxkIHNldCB0aGUgcG93ZXIgYWMgb2ZmXCIsIGFzeW5jICgpID0+IHtcbiAgICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoXCJpc0VtdWxhdG9yQ29ubmVjdGVkXCIpXG4gICAgICAgICAgLm9uY2UoKS53aXRoRXhhY3RBcmdzKClcbiAgICAgICAgICAucmV0dXJucyh0cnVlKTtcbiAgICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoXCJyZXNldFRlbG5ldEF1dGhUb2tlblwiKVxuICAgICAgICAgIC5vbmNlKCkud2l0aEV4YWN0QXJncygpXG4gICAgICAgICAgLnJldHVybnMoKTtcbiAgICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoXCJhZGJFeGVjXCIpXG4gICAgICAgICAgLm9uY2UoKS53aXRoRXhhY3RBcmdzKFtcImVtdVwiLCBcInBvd2VyXCIsIFwiYWNcIiwgYWRiLlBPV0VSX0FDX1NUQVRFUy5QT1dFUl9BQ19PRkZdKVxuICAgICAgICAgIC5yZXR1cm5zKCk7XG4gICAgICAgIGF3YWl0IGFkYi5wb3dlckFDKCdvZmYnKTtcbiAgICAgICAgbW9ja3MuYWRiLnZlcmlmeSgpO1xuICAgICAgfSk7XG4gICAgICBpdChcInNob3VsZCBzZXQgdGhlIHBvd2VyIGFjIG9uXCIsIGFzeW5jICgpID0+IHtcbiAgICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoXCJpc0VtdWxhdG9yQ29ubmVjdGVkXCIpXG4gICAgICAgICAgLm9uY2UoKS53aXRoRXhhY3RBcmdzKClcbiAgICAgICAgICAucmV0dXJucyh0cnVlKTtcbiAgICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoXCJyZXNldFRlbG5ldEF1dGhUb2tlblwiKVxuICAgICAgICAgIC5vbmNlKCkud2l0aEV4YWN0QXJncygpXG4gICAgICAgICAgLnJldHVybnMoKTtcbiAgICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoXCJhZGJFeGVjXCIpXG4gICAgICAgICAgLm9uY2UoKS53aXRoRXhhY3RBcmdzKFtcImVtdVwiLCBcInBvd2VyXCIsIFwiYWNcIiwgYWRiLlBPV0VSX0FDX1NUQVRFUy5QT1dFUl9BQ19PTl0pXG4gICAgICAgICAgLnJldHVybnMoKTtcbiAgICAgICAgYXdhaXQgYWRiLnBvd2VyQUMoJ29uJyk7XG4gICAgICAgIG1vY2tzLmFkYi52ZXJpZnkoKTtcbiAgICAgIH0pO1xuICAgICAgaXQoXCJzaG91bGQgdGhyb3cgZXhjZXB0aW9uIG9uIGludmFsaWQgcG93ZXIgYmF0dGVyeSBwZXJjZW50XCIsIGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgYWRiLnBvd2VyQ2FwYWNpdHkoLTEpLnNob3VsZC5ldmVudHVhbGx5LmJlLnJlamVjdGVkV2l0aChcInNob3VsZCBiZSB2YWxpZCBpbnRlZ2VyIGJldHdlZW4gMCBhbmQgMTAwXCIpO1xuICAgICAgICBhd2FpdCBhZGIucG93ZXJDYXBhY2l0eShcImFcIikuc2hvdWxkLmV2ZW50dWFsbHkuYmUucmVqZWN0ZWRXaXRoKFwic2hvdWxkIGJlIHZhbGlkIGludGVnZXIgYmV0d2VlbiAwIGFuZCAxMDBcIik7XG4gICAgICAgIGF3YWl0IGFkYi5wb3dlckNhcGFjaXR5KDUwMCkuc2hvdWxkLmV2ZW50dWFsbHkuYmUucmVqZWN0ZWRXaXRoKFwic2hvdWxkIGJlIHZhbGlkIGludGVnZXIgYmV0d2VlbiAwIGFuZCAxMDBcIik7XG4gICAgICAgIG1vY2tzLmFkYi52ZXJpZnkoKTtcbiAgICAgIH0pO1xuICAgICAgaXQoXCJzaG91bGQgc2V0IHRoZSBwb3dlciBjYXBhY2l0eVwiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIG1vY2tzLmFkYi5leHBlY3RzKFwiaXNFbXVsYXRvckNvbm5lY3RlZFwiKVxuICAgICAgICAgIC5vbmNlKCkud2l0aEV4YWN0QXJncygpXG4gICAgICAgICAgLnJldHVybnModHJ1ZSk7XG4gICAgICAgIG1vY2tzLmFkYi5leHBlY3RzKFwicmVzZXRUZWxuZXRBdXRoVG9rZW5cIilcbiAgICAgICAgICAub25jZSgpLndpdGhFeGFjdEFyZ3MoKVxuICAgICAgICAgIC5yZXR1cm5zKCk7XG4gICAgICAgIG1vY2tzLmFkYi5leHBlY3RzKFwiYWRiRXhlY1wiKVxuICAgICAgICAgIC5vbmNlKCkud2l0aEV4YWN0QXJncyhbXCJlbXVcIiwgXCJwb3dlclwiLCBcImNhcGFjaXR5XCIsIDBdKVxuICAgICAgICAgIC5yZXR1cm5zKCk7XG4gICAgICAgIGF3YWl0IGFkYi5wb3dlckNhcGFjaXR5KDApO1xuICAgICAgICBtb2Nrcy5hZGIudmVyaWZ5KCk7XG4gICAgICB9KTtcbiAgICAgIGl0KFwic2hvdWxkIGNhbGwgbWV0aG9kcyB0byBwb3dlciBvZmYgdGhlIGVtdWxhdG9yXCIsIGFzeW5jICgpID0+IHtcbiAgICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoXCJwb3dlckFDXCIpXG4gICAgICAgICAgLm9uY2UoKS53aXRoRXhhY3RBcmdzKCdvZmYnKVxuICAgICAgICAgIC5yZXR1cm5zKCk7XG4gICAgICAgIG1vY2tzLmFkYi5leHBlY3RzKFwicG93ZXJDYXBhY2l0eVwiKVxuICAgICAgICAgIC5vbmNlKCkud2l0aEV4YWN0QXJncygwKVxuICAgICAgICAgIC5yZXR1cm5zKCk7XG4gICAgICAgIGF3YWl0IGFkYi5wb3dlck9GRigpO1xuICAgICAgICBtb2Nrcy5hZGIudmVyaWZ5KCk7XG4gICAgICB9KTtcbiAgICB9KSk7XG4gICAgZGVzY3JpYmUoXCJzZW5kU01TXCIsIHdpdGhNb2Nrcyh7YWRifSwgKG1vY2tzKSA9PiB7XG4gICAgICBpdChcInNob3VsZCB0aHJvdyBleGNlcHRpb24gb24gaW52YWxpZCBtZXNzYWdlXCIsIGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgYWRiLnNlbmRTTVMoXCIrNTQ5MzQxMzEyMzQ1Njc4XCIpLnNob3VsZC5ldmVudHVhbGx5LmJlLnJlamVjdGVkV2l0aChcIlNlbmRpbmcgYW4gU01TIHJlcXVpcmVzIGEgbWVzc2FnZVwiKTtcbiAgICAgICAgbW9ja3MuYWRiLnZlcmlmeSgpO1xuICAgICAgfSk7XG4gICAgICBpdChcInNob3VsZCB0aHJvdyBleGNlcHRpb24gb24gaW52YWxpZCBwaG9uZU51bWJlclwiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IGFkYi5zZW5kU01TKFwiMDA1NDkzNDFhMzEyMzQ1Njc4XCIsICdIZWxsbyBBcHBpdW0nKS5zaG91bGQuZXZlbnR1YWxseS5iZS5yZWplY3RlZFdpdGgoXCJJbnZhbGlkIHNlbmRTTVMgcGhvbmVOdW1iZXJcIik7XG4gICAgICAgIG1vY2tzLmFkYi52ZXJpZnkoKTtcbiAgICAgIH0pO1xuICAgICAgaXQoXCJzaG91bGQgY2FsbCBhZGJFeGVjIHdpdGggdGhlIGNvcnJlY3QgYXJnc1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGxldCBwaG9uZU51bWJlciA9IDQ1MDk7XG4gICAgICAgIGxldCBtZXNzYWdlID0gXCIgSGVsbG8gQXBwaXVtIFwiO1xuICAgICAgICBtb2Nrcy5hZGIuZXhwZWN0cyhcImlzRW11bGF0b3JDb25uZWN0ZWRcIilcbiAgICAgICAgICAub25jZSgpLndpdGhFeGFjdEFyZ3MoKVxuICAgICAgICAgIC5yZXR1cm5zKHRydWUpO1xuICAgICAgICBtb2Nrcy5hZGIuZXhwZWN0cyhcInJlc2V0VGVsbmV0QXV0aFRva2VuXCIpXG4gICAgICAgICAgLm9uY2UoKS53aXRoRXhhY3RBcmdzKClcbiAgICAgICAgICAucmV0dXJucygpO1xuICAgICAgICBtb2Nrcy5hZGIuZXhwZWN0cyhcImFkYkV4ZWNcIilcbiAgICAgICAgICAub25jZSgpLndpdGhFeGFjdEFyZ3MoW1wiZW11XCIsIFwic21zXCIsIFwic2VuZFwiLCBcIjQ1MDlcIiwgXCJIZWxsbyBBcHBpdW1cIl0pXG4gICAgICAgICAgLnJldHVybnMoKTtcbiAgICAgICAgYXdhaXQgYWRiLnNlbmRTTVMocGhvbmVOdW1iZXIsIG1lc3NhZ2UpO1xuICAgICAgICBtb2Nrcy5hZGIudmVyaWZ5KCk7XG4gICAgICB9KTtcbiAgICB9KSk7XG4gICAgZGVzY3JpYmUoXCJnc20gc2lnbmFsIG1ldGhvZFwiLCB3aXRoTW9ja3Moe2FkYn0sIChtb2NrcykgPT4ge1xuICAgICAgaXQoXCJzaG91bGQgdGhyb3cgZXhjZXB0aW9uIG9uIGludmFsaWQgc3RyZW5ndGhcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCBhZGIuZ3NtU2lnbmFsKDUpLnNob3VsZC5ldmVudHVhbGx5LmJlLnJlamVjdGVkV2l0aChcIkludmFsaWQgc2lnbmFsIHN0cmVuZ3RoXCIpO1xuICAgICAgICBtb2Nrcy5hZGIudmVyaWZ5KCk7XG4gICAgICB9KTtcbiAgICAgIGl0KFwic2hvdWxkIGNhbGwgYWRiRXhlY0VtdSB3aXRoIHRoZSBjb3JyZWN0IGFyZ3NcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICBsZXQgc2lnbmFsU3RyZW5ndGggPSAwO1xuICAgICAgICBtb2Nrcy5hZGIuZXhwZWN0cyhcImlzRW11bGF0b3JDb25uZWN0ZWRcIilcbiAgICAgICAgICAub25jZSgpLndpdGhFeGFjdEFyZ3MoKVxuICAgICAgICAgIC5yZXR1cm5zKHRydWUpO1xuICAgICAgICBtb2Nrcy5hZGIuZXhwZWN0cyhcInJlc2V0VGVsbmV0QXV0aFRva2VuXCIpXG4gICAgICAgICAgLm9uY2UoKS53aXRoRXhhY3RBcmdzKClcbiAgICAgICAgICAucmV0dXJucygpO1xuICAgICAgICBtb2Nrcy5hZGIuZXhwZWN0cyhcImFkYkV4ZWNcIilcbiAgICAgICAgICAub25jZSgpLndpdGhFeGFjdEFyZ3MoW1wiZW11XCIsIFwiZ3NtXCIsICdzaWduYWwtcHJvZmlsZScsIHNpZ25hbFN0cmVuZ3RoXSlcbiAgICAgICAgICAucmV0dXJucygpO1xuICAgICAgICBhd2FpdCBhZGIuZ3NtU2lnbmFsKHNpZ25hbFN0cmVuZ3RoKTtcbiAgICAgICAgbW9ja3MuYWRiLnZlcmlmeSgpO1xuICAgICAgfSk7XG4gICAgfSkpO1xuICAgIGRlc2NyaWJlKFwiZ3NtIGNhbGwgbWV0aG9kc1wiLCB3aXRoTW9ja3Moe2FkYn0sIChtb2NrcykgPT4ge1xuICAgICAgaXQoXCJzaG91bGQgdGhyb3cgZXhjZXB0aW9uIG9uIGludmFsaWQgYWN0aW9uXCIsIGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgYWRiLmdzbUNhbGwoXCIrNTQ5MzQxMzEyMzQ1Njc4XCIpLnNob3VsZC5ldmVudHVhbGx5LmJlLnJlamVjdGVkV2l0aChcIkludmFsaWQgZ3NtIGFjdGlvblwiKTtcbiAgICAgICAgbW9ja3MuYWRiLnZlcmlmeSgpO1xuICAgICAgfSk7XG4gICAgICBpdChcInNob3VsZCB0aHJvdyBleGNlcHRpb24gb24gaW52YWxpZCBwaG9uZU51bWJlclwiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IGFkYi5nc21DYWxsKFwiKzU0OTM0MTNhMTIzNDU2NzhcIiwgXCJjYWxsXCIpLnNob3VsZC5ldmVudHVhbGx5LmJlLnJlamVjdGVkV2l0aChcIkludmFsaWQgZ3NtQ2FsbCBwaG9uZU51bWJlclwiKTtcbiAgICAgICAgbW9ja3MuYWRiLnZlcmlmeSgpO1xuICAgICAgfSk7XG4gICAgICBpdChcInNob3VsZCBzZXQgdGhlIGNvcnJlY3QgbWV0aG9kIGZvciBtYWtpbmcgZ3NtIGNhbGxcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICBsZXQgcGhvbmVOdW1iZXIgPSA0NTA5O1xuICAgICAgICBtb2Nrcy5hZGIuZXhwZWN0cyhcImlzRW11bGF0b3JDb25uZWN0ZWRcIilcbiAgICAgICAgICAub25jZSgpLndpdGhFeGFjdEFyZ3MoKVxuICAgICAgICAgIC5yZXR1cm5zKHRydWUpO1xuICAgICAgICBtb2Nrcy5hZGIuZXhwZWN0cyhcInJlc2V0VGVsbmV0QXV0aFRva2VuXCIpXG4gICAgICAgICAgLm9uY2UoKS53aXRoRXhhY3RBcmdzKClcbiAgICAgICAgICAucmV0dXJucygpO1xuICAgICAgICBtb2Nrcy5hZGIuZXhwZWN0cyhcImFkYkV4ZWNcIilcbiAgICAgICAgICAub25jZSgpLndpdGhFeGFjdEFyZ3MoW1wiZW11XCIsIFwiZ3NtXCIsIGFkYi5HU01fQ0FMTF9BQ1RJT05TLkdTTV9DQUxMLCBcIjQ1MDlcIl0pXG4gICAgICAgICAgLnJldHVybnMoKTtcbiAgICAgICAgYXdhaXQgYWRiLmdzbUNhbGwocGhvbmVOdW1iZXIsIFwiY2FsbFwiKTtcbiAgICAgICAgbW9ja3MuYWRiLnZlcmlmeSgpO1xuICAgICAgfSk7XG4gICAgICBpdChcInNob3VsZCBzZXQgdGhlIGNvcnJlY3QgbWV0aG9kIGZvciBhY2NlcHRpbmcgZ3NtIGNhbGxcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICBsZXQgcGhvbmVOdW1iZXIgPSA0NTA5O1xuICAgICAgICBtb2Nrcy5hZGIuZXhwZWN0cyhcImlzRW11bGF0b3JDb25uZWN0ZWRcIilcbiAgICAgICAgICAub25jZSgpLndpdGhFeGFjdEFyZ3MoKVxuICAgICAgICAgIC5yZXR1cm5zKHRydWUpO1xuICAgICAgICBtb2Nrcy5hZGIuZXhwZWN0cyhcInJlc2V0VGVsbmV0QXV0aFRva2VuXCIpXG4gICAgICAgICAgLm9uY2UoKS53aXRoRXhhY3RBcmdzKClcbiAgICAgICAgICAucmV0dXJucygpO1xuICAgICAgICBtb2Nrcy5hZGIuZXhwZWN0cyhcImFkYkV4ZWNcIilcbiAgICAgICAgICAub25jZSgpLndpdGhFeGFjdEFyZ3MoW1wiZW11XCIsIFwiZ3NtXCIsIGFkYi5HU01fQ0FMTF9BQ1RJT05TLkdTTV9BQ0NFUFQsIFwiNDUwOVwiXSlcbiAgICAgICAgICAucmV0dXJucygpO1xuICAgICAgICBhd2FpdCBhZGIuZ3NtQ2FsbChwaG9uZU51bWJlciwgXCJhY2NlcHRcIik7XG4gICAgICAgIG1vY2tzLmFkYi52ZXJpZnkoKTtcbiAgICAgIH0pO1xuICAgICAgaXQoXCJzaG91bGQgc2V0IHRoZSBjb3JyZWN0IG1ldGhvZCBmb3IgcmVmdXNpbmcgZ3NtIGNhbGxcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICBsZXQgcGhvbmVOdW1iZXIgPSA0NTA5O1xuICAgICAgICBtb2Nrcy5hZGIuZXhwZWN0cyhcImlzRW11bGF0b3JDb25uZWN0ZWRcIilcbiAgICAgICAgICAub25jZSgpLndpdGhFeGFjdEFyZ3MoKVxuICAgICAgICAgIC5yZXR1cm5zKHRydWUpO1xuICAgICAgICBtb2Nrcy5hZGIuZXhwZWN0cyhcInJlc2V0VGVsbmV0QXV0aFRva2VuXCIpXG4gICAgICAgICAgLm9uY2UoKS53aXRoRXhhY3RBcmdzKClcbiAgICAgICAgICAucmV0dXJucygpO1xuICAgICAgICBtb2Nrcy5hZGIuZXhwZWN0cyhcImFkYkV4ZWNcIilcbiAgICAgICAgICAub25jZSgpLndpdGhFeGFjdEFyZ3MoW1wiZW11XCIsIFwiZ3NtXCIsIGFkYi5HU01fQ0FMTF9BQ1RJT05TLkdTTV9DQU5DRUwsIFwiNDUwOVwiXSlcbiAgICAgICAgICAucmV0dXJucygpO1xuICAgICAgICBhd2FpdCBhZGIuZ3NtQ2FsbChwaG9uZU51bWJlciwgXCJjYW5jZWxcIik7XG4gICAgICAgIG1vY2tzLmFkYi52ZXJpZnkoKTtcbiAgICAgIH0pO1xuICAgICAgaXQoXCJzaG91bGQgc2V0IHRoZSBjb3JyZWN0IG1ldGhvZCBmb3IgaG9sZGluZyBnc20gY2FsbFwiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGxldCBwaG9uZU51bWJlciA9IDQ1MDk7XG4gICAgICAgIG1vY2tzLmFkYi5leHBlY3RzKFwiaXNFbXVsYXRvckNvbm5lY3RlZFwiKVxuICAgICAgICAgIC5vbmNlKCkud2l0aEV4YWN0QXJncygpXG4gICAgICAgICAgLnJldHVybnModHJ1ZSk7XG4gICAgICAgIG1vY2tzLmFkYi5leHBlY3RzKFwicmVzZXRUZWxuZXRBdXRoVG9rZW5cIilcbiAgICAgICAgICAub25jZSgpLndpdGhFeGFjdEFyZ3MoKVxuICAgICAgICAgIC5yZXR1cm5zKCk7XG4gICAgICAgIG1vY2tzLmFkYi5leHBlY3RzKFwiYWRiRXhlY1wiKVxuICAgICAgICAgIC5vbmNlKCkud2l0aEV4YWN0QXJncyhbXCJlbXVcIiwgXCJnc21cIiwgYWRiLkdTTV9DQUxMX0FDVElPTlMuR1NNX0hPTEQsIFwiNDUwOVwiXSlcbiAgICAgICAgICAucmV0dXJucygpO1xuICAgICAgICBhd2FpdCBhZGIuZ3NtQ2FsbChwaG9uZU51bWJlciwgXCJob2xkXCIpO1xuICAgICAgICBtb2Nrcy5hZGIudmVyaWZ5KCk7XG4gICAgICB9KTtcbiAgICB9KSk7XG4gICAgZGVzY3JpYmUoXCJnc20gdm9pY2UgbWV0aG9kXCIsIHdpdGhNb2Nrcyh7YWRifSwgKG1vY2tzKSA9PiB7XG4gICAgICBpdChcInNob3VsZCB0aHJvdyBleGNlcHRpb24gb24gaW52YWxpZCBzdHJlbmd0aFwiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IGFkYi5nc21Wb2ljZSgnd2VpcmQnKS5zaG91bGQuZXZlbnR1YWxseS5iZS5yZWplY3RlZFdpdGgoXCJJbnZhbGlkIGdzbSB2b2ljZSBzdGF0ZVwiKTtcbiAgICAgICAgbW9ja3MuYWRiLnZlcmlmeSgpO1xuICAgICAgfSk7XG4gICAgICBpdChcInNob3VsZCBzZXQgZ3NtIHZvaWNlIHRvIHVucmVnaXN0ZXJlZFwiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIG1vY2tzLmFkYi5leHBlY3RzKFwiaXNFbXVsYXRvckNvbm5lY3RlZFwiKVxuICAgICAgICAgIC5vbmNlKCkud2l0aEV4YWN0QXJncygpXG4gICAgICAgICAgLnJldHVybnModHJ1ZSk7XG4gICAgICAgIG1vY2tzLmFkYi5leHBlY3RzKFwicmVzZXRUZWxuZXRBdXRoVG9rZW5cIilcbiAgICAgICAgICAub25jZSgpLndpdGhFeGFjdEFyZ3MoKVxuICAgICAgICAgIC5yZXR1cm5zKCk7XG4gICAgICAgIG1vY2tzLmFkYi5leHBlY3RzKFwiYWRiRXhlY1wiKVxuICAgICAgICAgIC5vbmNlKCkud2l0aEV4YWN0QXJncyhbXCJlbXVcIiwgXCJnc21cIiwgXCJ2b2ljZVwiLCBhZGIuR1NNX1ZPSUNFX1NUQVRFUy5HU01fVk9JQ0VfVU5SRUdJU1RFUkVEXSlcbiAgICAgICAgICAucmV0dXJucygpO1xuICAgICAgICBhd2FpdCBhZGIuZ3NtVm9pY2UoXCJ1bnJlZ2lzdGVyZWRcIik7XG4gICAgICAgIG1vY2tzLmFkYi52ZXJpZnkoKTtcbiAgICAgIH0pO1xuICAgICAgaXQoXCJzaG91bGQgc2V0IGdzbSB2b2ljZSB0byBob21lXCIsIGFzeW5jICgpID0+IHtcbiAgICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoXCJpc0VtdWxhdG9yQ29ubmVjdGVkXCIpXG4gICAgICAgICAgLm9uY2UoKS53aXRoRXhhY3RBcmdzKClcbiAgICAgICAgICAucmV0dXJucyh0cnVlKTtcbiAgICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoXCJyZXNldFRlbG5ldEF1dGhUb2tlblwiKVxuICAgICAgICAgIC5vbmNlKCkud2l0aEV4YWN0QXJncygpXG4gICAgICAgICAgLnJldHVybnMoKTtcbiAgICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoXCJhZGJFeGVjXCIpXG4gICAgICAgICAgLm9uY2UoKS53aXRoRXhhY3RBcmdzKFtcImVtdVwiLCBcImdzbVwiLCBcInZvaWNlXCIsIGFkYi5HU01fVk9JQ0VfU1RBVEVTLkdTTV9WT0lDRV9IT01FXSlcbiAgICAgICAgICAucmV0dXJucygpO1xuICAgICAgICBhd2FpdCBhZGIuZ3NtVm9pY2UoXCJob21lXCIpO1xuICAgICAgICBtb2Nrcy5hZGIudmVyaWZ5KCk7XG4gICAgICB9KTtcbiAgICAgIGl0KFwic2hvdWxkIHNldCBnc20gdm9pY2UgdG8gcm9hbWluZ1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIG1vY2tzLmFkYi5leHBlY3RzKFwiaXNFbXVsYXRvckNvbm5lY3RlZFwiKVxuICAgICAgICAgIC5vbmNlKCkud2l0aEV4YWN0QXJncygpXG4gICAgICAgICAgLnJldHVybnModHJ1ZSk7XG4gICAgICAgIG1vY2tzLmFkYi5leHBlY3RzKFwicmVzZXRUZWxuZXRBdXRoVG9rZW5cIilcbiAgICAgICAgICAub25jZSgpLndpdGhFeGFjdEFyZ3MoKVxuICAgICAgICAgIC5yZXR1cm5zKCk7XG4gICAgICAgIG1vY2tzLmFkYi5leHBlY3RzKFwiYWRiRXhlY1wiKVxuICAgICAgICAgIC5vbmNlKCkud2l0aEV4YWN0QXJncyhbXCJlbXVcIiwgXCJnc21cIiwgXCJ2b2ljZVwiLCBhZGIuR1NNX1ZPSUNFX1NUQVRFUy5HU01fVk9JQ0VfUk9BTUlOR10pXG4gICAgICAgICAgLnJldHVybnMoKTtcbiAgICAgICAgYXdhaXQgYWRiLmdzbVZvaWNlKFwicm9hbWluZ1wiKTtcbiAgICAgICAgbW9ja3MuYWRiLnZlcmlmeSgpO1xuICAgICAgfSk7XG4gICAgICBpdChcInNob3VsZCBzZXQgZ3NtIHZvaWNlIHRvIHNlYXJjaGluZ1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIG1vY2tzLmFkYi5leHBlY3RzKFwiaXNFbXVsYXRvckNvbm5lY3RlZFwiKVxuICAgICAgICAgIC5vbmNlKCkud2l0aEV4YWN0QXJncygpXG4gICAgICAgICAgLnJldHVybnModHJ1ZSk7XG4gICAgICAgIG1vY2tzLmFkYi5leHBlY3RzKFwicmVzZXRUZWxuZXRBdXRoVG9rZW5cIilcbiAgICAgICAgICAub25jZSgpLndpdGhFeGFjdEFyZ3MoKVxuICAgICAgICAgIC5yZXR1cm5zKCk7XG4gICAgICAgIG1vY2tzLmFkYi5leHBlY3RzKFwiYWRiRXhlY1wiKVxuICAgICAgICAgIC5vbmNlKCkud2l0aEV4YWN0QXJncyhbXCJlbXVcIiwgXCJnc21cIiwgXCJ2b2ljZVwiLCBhZGIuR1NNX1ZPSUNFX1NUQVRFUy5HU01fVk9JQ0VfU0VBUkNISU5HXSlcbiAgICAgICAgICAucmV0dXJucygpO1xuICAgICAgICBhd2FpdCBhZGIuZ3NtVm9pY2UoXCJzZWFyY2hpbmdcIik7XG4gICAgICAgIG1vY2tzLmFkYi52ZXJpZnkoKTtcbiAgICAgIH0pO1xuICAgICAgaXQoXCJzaG91bGQgc2V0IGdzbSB2b2ljZSB0byBkZW5pZWRcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICBtb2Nrcy5hZGIuZXhwZWN0cyhcImlzRW11bGF0b3JDb25uZWN0ZWRcIilcbiAgICAgICAgICAub25jZSgpLndpdGhFeGFjdEFyZ3MoKVxuICAgICAgICAgIC5yZXR1cm5zKHRydWUpO1xuICAgICAgICBtb2Nrcy5hZGIuZXhwZWN0cyhcInJlc2V0VGVsbmV0QXV0aFRva2VuXCIpXG4gICAgICAgICAgLm9uY2UoKS53aXRoRXhhY3RBcmdzKClcbiAgICAgICAgICAucmV0dXJucygpO1xuICAgICAgICBtb2Nrcy5hZGIuZXhwZWN0cyhcImFkYkV4ZWNcIilcbiAgICAgICAgICAub25jZSgpLndpdGhFeGFjdEFyZ3MoW1wiZW11XCIsIFwiZ3NtXCIsIFwidm9pY2VcIiwgYWRiLkdTTV9WT0lDRV9TVEFURVMuR1NNX1ZPSUNFX0RFTklFRF0pXG4gICAgICAgICAgLnJldHVybnMoKTtcbiAgICAgICAgYXdhaXQgYWRiLmdzbVZvaWNlKFwiZGVuaWVkXCIpO1xuICAgICAgICBtb2Nrcy5hZGIudmVyaWZ5KCk7XG4gICAgICB9KTtcbiAgICAgIGl0KFwic2hvdWxkIHNldCBnc20gdm9pY2UgdG8gb2ZmXCIsIGFzeW5jICgpID0+IHtcbiAgICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoXCJpc0VtdWxhdG9yQ29ubmVjdGVkXCIpXG4gICAgICAgICAgLm9uY2UoKS53aXRoRXhhY3RBcmdzKClcbiAgICAgICAgICAucmV0dXJucyh0cnVlKTtcbiAgICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoXCJyZXNldFRlbG5ldEF1dGhUb2tlblwiKVxuICAgICAgICAgIC5vbmNlKCkud2l0aEV4YWN0QXJncygpXG4gICAgICAgICAgLnJldHVybnMoKTtcbiAgICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoXCJhZGJFeGVjXCIpXG4gICAgICAgICAgLm9uY2UoKS53aXRoRXhhY3RBcmdzKFtcImVtdVwiLCBcImdzbVwiLCBcInZvaWNlXCIsIGFkYi5HU01fVk9JQ0VfU1RBVEVTLkdTTV9WT0lDRV9PRkZdKVxuICAgICAgICAgIC5yZXR1cm5zKCk7XG4gICAgICAgIGF3YWl0IGFkYi5nc21Wb2ljZShcIm9mZlwiKTtcbiAgICAgICAgbW9ja3MuYWRiLnZlcmlmeSgpO1xuICAgICAgfSk7XG4gICAgICBpdChcInNob3VsZCBzZXQgZ3NtIHZvaWNlIHRvIG9uXCIsIGFzeW5jICgpID0+IHtcbiAgICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoXCJpc0VtdWxhdG9yQ29ubmVjdGVkXCIpXG4gICAgICAgICAgLm9uY2UoKS53aXRoRXhhY3RBcmdzKClcbiAgICAgICAgICAucmV0dXJucyh0cnVlKTtcbiAgICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoXCJyZXNldFRlbG5ldEF1dGhUb2tlblwiKVxuICAgICAgICAgIC5vbmNlKCkud2l0aEV4YWN0QXJncygpXG4gICAgICAgICAgLnJldHVybnMoKTtcbiAgICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoXCJhZGJFeGVjXCIpXG4gICAgICAgICAgLm9uY2UoKS53aXRoRXhhY3RBcmdzKFtcImVtdVwiLCBcImdzbVwiLCBcInZvaWNlXCIsIGFkYi5HU01fVk9JQ0VfU1RBVEVTLkdTTV9WT0lDRV9PTl0pXG4gICAgICAgICAgLnJldHVybnMoKTtcbiAgICAgICAgYXdhaXQgYWRiLmdzbVZvaWNlKFwib25cIik7XG4gICAgICAgIG1vY2tzLmFkYi52ZXJpZnkoKTtcbiAgICAgIH0pO1xuICAgIH0pKTtcbiAgfSk7XG59KTtcbiJdLCJzb3VyY2VSb290IjoiLi4vLi4vLi4ifQ==
